"use strict";(self.webpackChunkisomorphic=self.webpackChunkisomorphic||[]).push([[634],{27204:(n,t,a)=>{a.d(t,{A:()=>c});var e,i=a(89379),s=(a(65043),a(57528));const o=a(94574).Ay.div(e||(e=(0,s.A)(["\n  padding: 15px 20px 5px 20px;\n  display: flex;\n  flex-flow: row wrap;\n  overflow-y: hidden;\n  \n  @media only screen and (max-width: 767px) {\n    padding: 15px 20px;\n  }\n  \n  .action-btn {\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    \n    .anticon {\n      margin-right: 10px;\n      font-size: 26px;\n      \n      &:last-child {\n        margin-right: 0;\n      }\n    }\n    \n    .ant-switch {\n      border-radius: 10px;\n    }\n    \n    a {\n      color: inherit !important;\n      margin-right: 10px;\n    }\n  }\n"])));var h=a(71349),l=a(70579);const r=(new Date).getFullYear(),c=n=>(0,l.jsxs)(o,(0,i.A)((0,i.A)({className:null!=n.className?"".concat(n.className," isoLayoutContentWrapper"):"isoLayoutContentWrapper"},n),{},{children:[n.children,(0,l.jsxs)("div",{className:"footer-main",children:[(0,l.jsx)("img",{src:h,alt:"",width:30,style:{marginRight:10}}),(0,l.jsxs)("i",{children:["Copyright \xa9 2010-",r," ",(0,l.jsx)("b",{children:"GO SOLUTIONS"}),". All rights"]})]})]}))},30443:(n,t,a)=>{a.d(t,{A:()=>c});a(65043);var e,i=a(57528),s=a(94574),o=a(93317);const h=s.Ay.div(e||(e=(0,i.A)(["\n  text-align: right;\n  display: inline-block;\n  flex: 1;\n  padding: 0 3px 0 0;\n  margin-bottom: 15px;\n  \n  @media only screen and (max-width: 720px) {\n    text-align: left;\n    display: block;\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n  }\n  \n  button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n  }\n"]))),l=(0,o.A)(h);var r=a(70579);const c=n=>(0,r.jsx)(l,{children:n.children})},41617:(n,t,a)=>{a.d(t,{A:()=>c});a(65043);var e,i=a(57528),s=a(94574),o=a(93317);const h=s.Ay.div(e||(e=(0,i.A)(["\n  padding-bottom: 20px;\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  /* .ant-select-search, .ant-select, .ant-calendar-picker {\n    margin-right: 10px;\n    \n    &.ant-calendar-picker {\n      margin-left: 5px;\n    }\n    \n    &:last-child {\n      margin-right: 0;\n    }\n  } */\n"]))),l=(0,o.A)(h);var r=a(70579);const c=n=>(0,r.jsx)(l,{children:n.children})},44138:(n,t,a)=>{a.d(t,{A:()=>d});a(65043);var e,i=a(57528),s=a(94574),o=a(17159),h=a(93317);const l=s.Ay.h1(e||(e=(0,i.A)(["\n  font-size: 19px;\n  font-weight: 500;\n  color: ",";\n  margin-bottom: 15px;\n  display: inline-flex;\n  align-items: center;\n  white-space: nowrap;\n  text-transform: uppercase;\n\n  &:before {\n    content: '';\n    width: 5px;\n    height: 40px;\n    background-color: ",";\n    display: flex;\n    margin: 0 15px 0 0;\n  }\n"])),(0,o.palette)("secondary",2),(0,o.palette)("secondary",3)),r=(0,h.A)(l);a.p;var c=a(70579);const d=n=>(0,c.jsx)(r,{className:"isoComponentTitle",children:n.children})},73162:(n,t,a)=>{a.r(t),a.d(t,{default:()=>xn});var e,i=a(89379),s=a(65043),o=a(44398),h=a(26367),l=a(18161),r=a.n(l),c=a(45594),d=a(52528),u=a(35696),g=a(41264),p=a(27204),m=a(44138),C=a(83305),x=a(41617),D=a(92089),A=a(30443),T=a(96365),f=a(36497),S=a(25850),j=a(89421),y=a(59877),b=a(47419),v=a(11645),I=a(19292),Q=a(12758),B=a(57528);const N=a(94574).Ay.div(e||(e=(0,B.A)(["\n  &.modal {\n    input {\n      &::placeholder {\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n    \n    .ant-select-selection__placeholder {\n      color: rgba(0, 0, 0, 0.5);\n    }  \n    \n    .frame-picture {\n      width: 150px;\n      height: 150px;\n      border: dotted 5px #ccc;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      color: #ccc;\n      \n      .anticon {\n        font-size: 30px;\n        margin-bottom: 15px;\n      }\n      \n      &:hover {\n        cursor: pointer;\n        border-color: #71a4eb;\n        color: #71a4eb\n      }\n    }\n    \n    .img-nhan-dien {\n      width: 150px;\n      height: 150px;\n      max-width: 150px;\n      max-height: 150px;\n    }\n  }\n  \n  &.index {\n    width: 100%;\n    \n    .action-btn {\n      color: #096dd9;\n    }\n    \n    .qr-container {\n      display: flex;\n      justify-content: space-around;\n      \n      .qr-img {\n        width: 80px;\n        height: 80px;\n      }\n      \n      .qr-action {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        \n        .qr-download {\n          color: #096dd9;\n        }\n        \n        .qr-printer {\n          color: #ea3146;\n        }\n        \n        .anticon {\n          font-size: 26px;\n        }\n      }\n    }\n    \n    .tk-container {\n      display: flex;\n      justify-content: space-between;\n      \n      .tk-action {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        \n        .anticon {\n          font-size: 26px;\n          color: #096dd9;\n          margin-bottom: 15px;\n          \n          &:last-child {\n            margin-bottom: 0;\n          }\n        }\n      }\n    }\n    \n    .row-content {\n      width: calc(100vw - 135px);\n      \n      .col-qr {\n        padding: 10px;\n      \n        .qr-container {\n          width: 100%;\n          display: block;\n          text-align: center;\n        \n          .img-qr {\n            width: 200px;\n            height: 200px;\n          }\n          \n          .action-qr {\n            margin-top: 10px;\n            display: flex;\n            justify-content: space-around;\n            align-items: center;\n          }\n        }\n      }\n      \n      .col-table {\n        margin-bottom: 10px;\n      }\n    }\n  }\n  \n  &.modal-camera {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"])));var w=a(70579);const{REQUIRED:M}=r(),{Option:k}=f.A,V=n=>{let{visible:t,onCancel:a,onCreate:e,dataEdit:o={},loading:h,DanhSachTinh:l=[]}=n;const[u]=S.A.useForm(),[g,p]=(0,s.useState)([]),[m,C]=(0,s.useState)([]);(0,s.useEffect)(()=>{o&&o.CoQuanID&&(u.setFieldsValue((0,i.A)({},o)),D(o.TinhID,!1),A(o.HuyenID,!1))},[o]);const x=async(n,t)=>{if(!n)return[];try{const a=await Q.A.DanhSachDiaGioi({ID:n,Cap:t});return a.data.Status>0?a.data.Data:(d.Ay.error(a.data.Message),[])}catch(a){return d.Ay.error(a.toString()),[]}},D=async function(n){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=await x(n,r().HUYEN);p(a),C([]),t&&u.setFieldsValue({HuyenID:void 0,XaID:void 0})},A=async function(n){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=await x(n,r().XA);C(a),t&&u.setFieldsValue({XaID:void 0})};return(0,w.jsx)(c.A,{title:"".concat(o.CoQuanID?"S\u1eeda":"Th\xeam"," th\xf4ng tin \u0111\u01a1n v\u1ecb"),visible:t,onCancel:a,width:650,footer:[(0,w.jsx)(j.A,{onClick:a,children:"H\u1ee7y"},"back"),(0,w.jsx)(j.A,{type:"primary",onClick:()=>{u.validateFields().then(n=>{n.TenCanBo=(0,I.Fj)(n.TenCanBo),e(n)}).catch(n=>console.log("Validate Failed:",n))},loading:h,children:"L\u01b0u"},"submit")],children:(0,w.jsx)(N,{className:"modal",children:(0,w.jsxs)(S.A,{form:u,layout:"vertical",children:[(0,w.jsx)(S.A.Item,{name:"CoQuanID",initialValue:null,hidden:!0}),(0,w.jsx)(S.A.Item,{name:"CanBoID",initialValue:null,hidden:!0}),(0,w.jsx)(S.A.Item,{name:"NguoiDungID",initialValue:null,hidden:!0}),(0,w.jsx)(S.A.Item,{name:"TrangThai",initialValue:!0,hidden:!0}),(0,w.jsx)(S.A.Item,{label:"T\xean \u0111\u01a1n v\u1ecb",name:"TenCoQuan",rules:[M],children:(0,w.jsx)(y.A,{autoFocus:!0})}),(0,w.jsxs)(b.A,{gutter:10,children:[(0,w.jsx)(v.A,{span:8,children:(0,w.jsx)(S.A.Item,{label:"T\u1ec9nh/Th\xe0nh ph\u1ed1",name:"TinhID",rules:[M],children:(0,w.jsx)(f.A,{showSearch:!0,onChange:D,children:l.map(n=>(0,w.jsx)(k,{value:n.ID,children:n.Ten},n.ID))})})}),(0,w.jsx)(v.A,{span:8,children:(0,w.jsx)(S.A.Item,{label:"Qu\u1eadn/Huy\u1ec7n",name:"HuyenID",rules:[M],children:(0,w.jsx)(f.A,{showSearch:!0,onChange:A,children:g.map(n=>(0,w.jsx)(k,{value:n.ID,children:n.Ten},n.ID))})})}),(0,w.jsx)(v.A,{span:8,children:(0,w.jsx)(S.A.Item,{label:"X\xe3/Ph\u01b0\u1eddng",name:"XaID",rules:[M],children:(0,w.jsx)(f.A,{showSearch:!0,children:m.map(n=>(0,w.jsx)(k,{value:n.ID,children:n.Ten},n.ID))})})})]}),(0,w.jsx)(S.A.Item,{label:"\u0110\u1ecba ch\u1ec9 \u0111\u01a1n v\u1ecb",name:"DiaChi",children:(0,w.jsx)(y.A,{})}),(0,w.jsx)(S.A.Item,{label:"H\u1ecd v\xe0 t\xean qu\u1ea3n tr\u1ecb",name:"TenCanBo",rules:[M],children:(0,w.jsx)(y.A,{style:{textTransform:"capitalize"}})}),(0,w.jsx)(S.A.Item,{label:"Email li\xean h\u1ec7",name:"Email",rules:[M,{type:"email",message:"Email kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng"}],children:(0,w.jsx)(y.A,{})}),o.CoQuanID&&(0,w.jsx)(S.A.Item,{label:"T\xean ng\u01b0\u1eddi d\xf9ng",name:"TenNguoiDung",rules:[M],children:(0,w.jsx)(y.A,{})}),(0,w.jsx)(S.A.Item,{label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"DienThoai",rules:[M],children:(0,w.jsx)(y.A,{maxLength:11,onKeyPress:n=>{const t=n.charCode;(t<48||t>57)&&n.preventDefault()}})})]})})})};var P=a(9370),E=a(45543),R=a(84236);const O={suacanbo:R.Ay.apiInOutv2+"HeThongCanBo/CapNhatThongTinCanBo",suacanbov4:R.Ay.apiInOutv2+"HeThongCanBo/CapNhatThongTinCanBo_v4",chitiettaikhoan:R.Ay.apiInOut+"HeThongCanBo/getbyid",resetmatkhau:R.Ay.apiInOut+"HeThongNguoiDung/ResetPassword",diagioi:R.Ay.apiInOut+"danhmucdiagioihanhchinh/getallbycap",coquansudungpm:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/DanhSachDonViSuDungPhanMem",xoacoquan:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/XoaPhongBan",capnhattrangthai:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/CapNhatTrangThaiSuDungPhanMem",suacoquan:R.Ay.apiInOut+"DanhMucCoQuanDonVi/Update",themdonvi:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/KhoiTaoDonViSuDungPhanMem",chitietdonvi:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/ChiTietDonViSuDungPhanMem",suadonvi:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/CapNhatThongTinDonViSuDungPhanMem",danhsachcanbodonvi:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/DanhSachCanBoThuocDonViSuDungPhanMen",themcanbo:R.Ay.apiInOutv4+"DanhMucCoQuanDonVi/ThemCanBoVaoDonViSuDungPhanMen",xoacanbo:R.Ay.apiInOut+"HeThongCanBo/delete",chitietcanbo:R.Ay.apiInOut+"HeThongCanBo/GetByID",suatencoquan:R.Ay.apiInOutv2+"DanhMucCoQuanDonVi/SuaPhongBan"},L={ChiTietTaiKhoan:n=>(0,E.vk)(O.chitiettaikhoan,(0,i.A)({},n)),SuaCanBo:n=>(0,E.zO)(O.suacanbo,(0,i.A)({},n)),ResetMatKhau:n=>(0,E.vk)(O.resetmatkhau,(0,i.A)({},n)),DanhSachDiaGioi:n=>(0,E.vk)(O.diagioi,(0,i.A)({},n)),DanhSachCoQuanSuDungPM:n=>(0,E.vk)(O.coquansudungpm,(0,i.A)((0,i.A)({},n),{},{PageNumber:n.PageNumber?n.PageNumber:1,PageSize:n.PageSize?n.PageSize:(0,I.WT)()})),XoaCoQuan:n=>(0,E.zO)(O.xoacoquan,(0,i.A)((0,i.A)({},n),{},{TenCoQuan:"empty"})),CapNhatTrangThai:n=>(0,E.zO)(O.capnhattrangthai,(0,i.A)({},n)),SuaCoQuan:n=>(0,E.zO)(O.suacoquan,(0,i.A)({},n)),ThemDonVi:n=>(0,E.zO)(O.themdonvi,(0,i.A)({},n)),SuaDonVi:n=>(0,E.zO)(O.suadonvi,(0,i.A)({},n)),ChiTietCoQuanSuDungPM:n=>(0,E.vk)(O.chitietdonvi,(0,i.A)({},n)),DanhSachCanBoDonVi:n=>(0,E.vk)(O.danhsachcanbodonvi,(0,i.A)((0,i.A)({},n),{},{PageNumber:n.PageNumber?n.PageNumber:1,PageSize:n.PageSize?n.PageSize:(0,I.WT)()})),XoaTaiKhoan:n=>(0,E.zO)(O.xoacanbo,(0,i.A)({},n)),ThemCanBo:n=>(0,E.zO)(O.themcanbo,(0,i.A)({},n)),ChiTietCanBo:n=>(0,E.vk)(O.chitietcanbo,(0,i.A)({},n)),SuaTenCoQuan:n=>(0,E.zO)(O.suatencoquan,(0,i.A)({},n))};var F=a(827),K=a(92003),z=a(95399),q=a(91522),H=a(67889),X=a(9316);class U extends s.Component{constructor(n){super(n),this.onSearch=(n,t)=>{let a=this.state.filterData,e={value:n,property:t},i=(0,I.D5)(a,e,null);this.setState({filterData:i},()=>{(0,I._Y)(this.state.filterData),this.props.getListSP(this.state.filterData)})},this.onTableChange=(n,t,a)=>{let e=this.state.filterData,i={pagination:n,filters:t,sorter:a},s=(0,I.D5)(e,null,i);this.setState({filterData:s},()=>{(0,I._Y)(this.state.filterData),this.props.getListSP(this.state.filterData)})},this.resetPassword=n=>{const{defaultPassword:t}=this.props;c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{L.ResetMatKhau({NguoiDungID:n}).then(n=>{n.data.Status>0?c.A.success({title:"Th\xf4ng b\xe1o",content:"M\u1eadt kh\u1ea9u \u0111\xe3 \u0111\u01b0\u1ee3c chuy\u1ec3n v\u1ec1 m\u1eb7c \u0111\u1ecbnh l\xe0: ".concat(t),okText:"\u0110\xf3ng"}):(0,I.M)(n.data.Message)}).catch(n=>{(0,I.M)(n.toString())})}})},this.ThemDonVi=()=>{let{modalKey:n}=this.state;n++,this.setState({dataEditDonVi:{},action:"add",visibleModalDonVi:!0,modalKey:n})},this.closeModalDonVi=()=>{this.setState({visibleModalDonVi:!1})},this.submitModalDonVi=n=>{const{action:t}=this.state;"add"===t?(delete n.CoQuanID,delete n.CanBoID,delete n.NguoiDungID,delete n.TrangThai,this.setState({loading:!0}),L.ThemDonVi(n).then(n=>{this.setState({loading:!1}),n.data.Status>0?(d.Ay.success("Th\xeam \u0111\u01a1n v\u1ecb s\u1eed d\u1ee5ng th\xe0nh c\xf4ng"),this.closeModalDonVi(),this.props.getListSP(this.state.filterData)):(0,I.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())})):"edit"===t&&(this.setState({loading:!0}),L.SuaDonVi(n).then(n=>{this.setState({loading:!1}),n.data.Status>0?(d.Ay.success("C\u1eadp nh\u1eadt th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.closeModalDonVi(),this.props.getListSP(this.state.filterData)):(0,I.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())}))},this.XoaDonVi=n=>{c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{L.XoaCoQuan({CoQuanID:n}).then(n=>{n.data.Status>0?(d.Ay.success("X\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.props.getListSP(this.state.filterData)):(0,I.M)(n.data.Message)}).catch(n=>{(0,I.M)(n.toString())})}})},this.printQR=n=>{this.setState({CoQuanQRPrint:n},()=>{setTimeout(()=>{(0,I.Tu)(this.printRef.current.innerHTML)},500)})},this.downloadQR=n=>{const t=document.createElement("a");t.href=n.QRCode,t.target="_blank",t.download="QRCheckin-".concat(n.TenCoQuan,".png"),t.click()},this.changeTrangThaiSuDung=(n,t)=>{const a={CoQuanID:n.CoQuanID,TrangThai:t,TenCoQuan:"a"};L.CapNhatTrangThai(a).then(n=>{n.data.Status>0?(d.Ay.destroy(),d.Ay.success("C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i s\u1eed d\u1ee5ng th\xe0nh c\xf4ng"),this.props.getListSP(this.state.filterData)):(0,I.M)(n.data.Message)}).catch(n=>{(0,I.M)(n.toString())})},this.EditCoQuan=n=>{L.ChiTietCoQuanSuDungPM({CoQuanID:n.CoQuanID}).then(n=>{if(n.data.Status>0){let{modalKey:t}=this.state;t++,this.setState({dataEditDonVi:n.data.Data,modalKey:t,action:"edit",visibleModalDonVi:!0})}else(0,I.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())})},this.renderTenCoQuan=n=>{const t="".concat(n.DiaChi?n.DiaChi+", ":"").concat(n.TenXa,", ").concat(n.TenHuyen,", ").concat(n.TenTinh);return(0,w.jsxs)("div",{children:[n.TenCoQuan,(0,w.jsx)("div",{style:{fontSize:12},children:t})]})},this.renderQRCode=n=>(0,w.jsxs)("div",{className:"qr-container",children:[(0,w.jsx)("img",{className:"qr-img",src:n.QRCode}),(0,w.jsxs)("div",{className:"qr-action",children:[(0,w.jsx)(K.A,{className:"qr-download",onClick:()=>this.downloadQR(n)}),(0,w.jsx)(z.A,{className:"qr-printer",onClick:()=>this.printQR(n)})]})]}),this.renderTaiKhoan=n=>(0,w.jsxs)("div",{className:"tk-container",children:[(0,w.jsxs)("div",{children:[n.TenCanBo,(0,w.jsx)("br",{}),n.TenNguoiDung]}),(0,w.jsx)("div",{className:"tk-action",children:(0,w.jsx)(u.A,{title:"Reset m\u1eadt kh\u1ea9u",children:(0,w.jsx)(q.A,{onClick:()=>this.resetPassword(n.NguoiDungID)})})})]}),this.renderThaoTac=n=>(0,w.jsxs)("div",{className:"action-btn",children:[(0,w.jsx)(H.A,{onClick:()=>this.EditCoQuan(n)}),(0,w.jsx)(X.A,{onClick:()=>this.XoaDonVi(n.CoQuanID)}),(0,w.jsx)(g.A,{checked:n.TrangThai,onChange:t=>this.changeTrangThaiSuDung(n,t)})]});const t=P.parse(this.props.location.search);this.state={modalKey:0,visibleModalDonVi:!1,dataEditDonVi:{},action:"",loading:!1,filterData:t,CoQuanQRPrint:{}},this.printRef=s.createRef()}componentDidMount(){this.props.getInitDataSP(this.state.filterData)}render(){const{modalKey:n,visibleModalDonVi:t,dataEditDonVi:a,loading:e,filterData:i,action:s,CoQuanQRPrint:o}=this.state,{DanhSachQuanTri:h,DanhSachTinh:l,TotalRow:r,TableLoading:c,role:d}=this.props,u=i.PageNumber?parseInt(i.PageNumber):1,g=i.PageSize?parseInt(i.PageSize):(0,I.WT)(),f=[{title:"STT",align:"center",width:"5%",render:(n,t,a)=>(0,w.jsx)("span",{children:(u-1)*g+(a+1)})},{title:"T\xean c\u01a1 quan \u0111\u01a1n v\u1ecb",width:"35%",render:(n,t)=>this.renderTenCoQuan(t)},{title:"QR Code",width:"20%",render:(n,t)=>this.renderQRCode(t)},{title:"T\xe0i kho\u1ea3n \u0111\u01a1n v\u1ecb",width:"25%",render:(n,t)=>this.renderTaiKhoan(t)},{title:"Thao t\xe1c",width:"15%",align:"center",render:(n,t)=>this.renderThaoTac(t)}];return(0,w.jsxs)(p.A,{children:[(0,w.jsx)(m.A,{children:"Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng"}),(0,w.jsx)(A.A,{children:d.add?(0,w.jsx)(T.$n,{type:"primary",onClick:this.ThemDonVi,children:"Th\xeam m\u1edbi"}):""}),(0,w.jsxs)(N,{className:"index",children:[(0,w.jsxs)(C.A,{children:[(0,w.jsx)(x.A,{children:(0,w.jsx)(T.NJ,{placeholder:"T\xecm ki\u1ebfm \u0111\u01a1n v\u1ecb",style:{width:300},allowClear:!0,onSearch:n=>this.onSearch(n,"Keyword"),defaultValue:i.Keyword})}),(0,w.jsx)(D.Ay,{columns:f,rowKey:"CoQuanID",dataSource:h,pagination:{showSizeChanger:!0,showTotal:(n,t)=>"T\u1eeb ".concat(t[0]," \u0111\u1ebfn ").concat(t[1]," tr\xean ").concat(n),total:r,current:u,pageSize:g},loading:c,onChange:this.onTableChange})]}),(0,w.jsx)(V,{visible:t,dataEdit:a,DanhSachTinh:l,onCreate:this.submitModalDonVi,onCancel:this.closeModalDonVi,loading:e},n),(0,w.jsx)("div",{ref:this.printRef,style:{display:"none"},children:(0,w.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,w.jsx)("img",{style:{marginTop:20,width:400,height:400},src:o.QRCode}),(0,w.jsx)("div",{style:{marginTop:20,fontWeight:"bold",fontSize:30},children:o.TenCoQuan})]})})]})]})}}const $=(0,o.Ng)(function(n){return(0,i.A)((0,i.A)({},n.QuanTriHeThong),{},{role:(0,I.vh)(n.Auth.role,"quan-tri-he-thong"),defaultPassword:(0,I.op)("defaultPassword",10)})},h.A)(U);var _=a(32064),G=a(58409),W=a(81353),Y=a(17029),J=a.n(Y);const Z=class extends s.Component{constructor(n){super(n),this.handlePlayChanDung=()=>{this.setState({disableChup:!1})},this.ChupAnh=()=>{const{CanBoID:n}=this.props;let t=this.cameraRef.current.getScreenshot({width:600,height:400});fetch(t).then(n=>n.blob()).then(a=>{const e=new File([a],"anh_chan_dung_".concat(n,".jpeg"));this.props.onOk(e,t)})},this.state={cameraChanDung:null,disableChup:!0},this.cameraRef=s.createRef()}componentDidMount(){navigator.getUserMedia&&navigator.mediaDevices.enumerateDevices().then(n=>{const t=n.filter(n=>"videoinput"===n.kind);if(t.length){const n=t.find(n=>n.label.includes("USB CAM2"));this.setState({cameraChanDung:n})}}).catch(n=>{d.Ay.error(n.toString())})}render(){const{onCancel:n,visible:t}=this.props,{cameraChanDung:a,disableChup:e}=this.state;return(0,w.jsx)(T.aF,{title:"Ch\u1ee5p \u1ea3nh nh\u1eadn di\u1ec7n",width:700,onCancel:n,visible:t,footer:(0,w.jsxs)("div",{style:{textAlign:"center"},children:[(0,w.jsx)(T.$n,{type:"primary",disabled:e,onClick:this.ChupAnh,children:"Ch\u1ee5p \u1ea3nh"}),(0,w.jsx)(T.$n,{onClick:n,children:"\u0110\xf3ng"})]}),children:(0,w.jsx)(N,{className:"modal-camera",children:(0,w.jsx)(J(),{audio:!1,ref:this.cameraRef,screenshotFormat:"image/jpeg",onUserMedia:this.handlePlayChanDung,videoConstraints:(0,i.A)((0,i.A)({},{width:600,height:400}),{},{deviceId:a&&a.deviceId?a.deviceId:""})},a&&a.deviceId?a.deviceId:"")})})}};var nn=a(73847),tn=a(20575);const{REQUIRED:an}=r(),{Item:en}=S.A,{Group:sn}=_.Ay,on=class extends s.Component{constructor(n){var t;super(n),t=this,this.onOk=async n=>{n.preventDefault();const t=this.formRef.current,a=await t.validateFields();if(!a.CoQuanID&&!a.TenCoQuan)return d.Ay.destroy(),void d.Ay.warn("Ch\u01b0a ch\u1ecdn c\u01a1 quan");if(!a.DanhSachCanBo||!a.DanhSachCanBo.length)return d.Ay.destroy(),void d.Ay.warn("Danh s\xe1ch c\xe1n b\u1ed9 r\u1ed7ng");a.DanhSachCanBo.forEach(n=>{n.TenCanBo=(0,I.Fj)(n.TenCanBo),n.DanhSachNhomNguoiDung=n.ListNhomNguoiDungID.map(n=>({NhomNguoiDungID:n})),delete n.ListNhomNguoiDungID});if(this.checkDuplicateEmail(a.DanhSachCanBo))return;const{AnhNhanDien:e}=this.state;this.props.onCreate(a,e)},this.checkDuplicateEmail=n=>{const t=n.map(n=>n.Email);return!!t.filter((n,a)=>t.indexOf(n)!==a).length&&((0,I.M)("Email nh\u1eadp m\u1edbi b\u1ecb tr\xf9ng, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"),!0)},this.setInitialCoQuan=()=>{const{DanhSachCoQuan:n}=this.props;if(n.length){const t=n[0].CoQuanID,a=this.formRef.current;a&&a.setFieldsValue({CoQuanID:t}),this.changeCoQuan(t,!0)}},this.setInitialTenCoQuan=()=>{const n=this.formRef.current;n&&n.setFieldsValue({TenCoQuan:""}),this.changeCoQuan(null,!0);const{DanhSachCoQuan:t}=this.props;if(t.length){const n=t[0].CoQuanID;F.A.DanhSachNhomByCoQuanID({CoQuanID:n}).then(n=>{if(n.data.Status>0){const t=n.data.Data;t.forEach(n=>{n.NhomNguoiDungID=n.NhomTongID});const a=t.find(n=>"Truy v\u1ebft Y t\u1ebf tr\xean to\xe0n t\u1ec9nh"===n.TenNhom);if(a){const n=t.indexOf(a);t.splice(n,1)}this.setState({DanhSachNhomNguoiDung:t})}})}},this.onCancel=()=>{const{onCancel:n}=this.props;n()},this.changeCoQuan=function(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const e=t.formRef.current;if(e){const{DanhSachCanBo:n}=t.state;let i=e.getFieldValue("DanhSachCanBo")||[];i=i&&Object.values(i),a&&n.forEach((n,t)=>{e.setFieldsValue({DanhSachCanBo:{[t]:{ListNhomNguoiDungID:[],TenCanBo:i[t].TenCanBo,Email:i[t].Email}}})})}n?F.A.DanhSachNhomByCoQuanID({CoQuanID:n}).then(n=>{if(n.data.Status>0){const a=n.data.Data,e=a.find(n=>"Truy v\u1ebft Y t\u1ebf tr\xean to\xe0n t\u1ec9nh"===n.TenNhom);if(e){const n=a.indexOf(e);a.splice(n,1)}t.setState({DanhSachNhomNguoiDung:a})}}):t.setState({DanhSachNhomNguoiDung:[]})},this.ThemCanBo=()=>{const{DanhSachCanBo:n}=this.state;n.unshift({});let t={};const a=this.formRef.current;if(a){const{getFieldValue:n}=a;t=n("DanhSachCanBo")||[]}this.setState({DanhSachCanBo:n},()=>{if(t=Object.values(t),t.unshift({TenCanBo:"",Email:"",ListNhomNguoiDungID:[]}),a){const{setFieldsValue:n}=a;n({DanhSachCanBo:t})}})},this.XoaCanBo=n=>{const{DanhSachCanBo:t}=this.state,a=this.formRef.current,{setFieldsValue:e,getFieldValue:i}=a;let s=i("DanhSachCanBo");s&&(s=Object.values(s),s.splice(n,1),e({DanhSachCanBo:s}),t.splice(n,1),this.setState({DanhSachCanBo:t}))},this.changeLoaiThemCoQuan=n=>{const t=n.target.value;1===t&&this.setInitialCoQuan(),2===t&&this.setInitialTenCoQuan(),this.setState({LoaiThemCoQuan:t})},this.beforeUpload=(n,t)=>{const{fileLimit:a}=this.props,e=n.size/1024/1024<a,i=n.type.includes("image");return e?i?(0,I.In)(n,t):d.Ay.error("Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ea3i l\xean file \u1ea3nh"):d.Ay.error("File \u0111\xednh k\xe8m ph\u1ea3i nh\u1ecf h\u01a1n ".concat(a,"MB")),!1},this.renderAnhNhanDien=(n,t)=>{const a={FileUrl:t,FileData:n};this.setState({AnhNhanDien:a})},this.checkFileImage=n=>{const{fileLimit:t}=this.props,a=n.size/1024/1024<t,e=n.type.includes("image");return e||d.Ay.error("Sai \u0111\u1ecbnh d\u1ea1ng \u1ea3nh (JPG ho\u1eb7c PNG)"),a||d.Ay.error("File \u1ea3nh ph\u1ea3i nh\u1ecf h\u01a1n ".concat(t,"MB")),e&&a},this.openCamera=()=>{let{modalKey:n}=this.state;n++,this.setState({visibleModalCamera:!0,modalKey:n})},this.closeModalCamera=()=>{this.setState({visibleModalCamera:!1})},this.submitModalCamera=(n,t)=>{this.renderAnhNhanDien(n,t),this.closeModalCamera()},this.state={DanhSachNhomNguoiDung:[],DanhSachCanBo:[],LoaiThemCoQuan:1,AnhNhanDien:null,visibleModalCamera:!1,modalKey:0},this.formRef=s.createRef()}componentDidMount(){const{dataEdit:n}=this.props;n.CanBoID?setTimeout(()=>{const t=this.formRef.current,{DanhSachCanBo:a}=this.state;a.push({}),this.setState({DanhSachCanBo:a},()=>{const a=n.CoQuanID.toString(),e=n.CanBoID,i=[{TenCanBo:n.TenCanBo,Email:n.Email,ListNhomNguoiDungID:n.ListNhomNguoiDungID}];if(this.changeCoQuan(a,!1),t&&t.setFieldsValue({CoQuanID:a,CanBoID:e,DanhSachCanBo:i}),n.AnhHoSo){const t={FileUrl:n.AnhHoSo};this.setState({AnhNhanDien:t})}})},200):(this.ThemCanBo(),setTimeout(()=>{this.setInitialCoQuan()},200))}render(){const{visible:n,onCancel:t,dataEdit:a,loading:e,DanhSachCoQuan:s}=this.props,{DanhSachNhomNguoiDung:o,DanhSachCanBo:h,LoaiThemCoQuan:l,AnhNhanDien:r}=this.state,{visibleModalCamera:c,modalKey:d}=this.state;return(0,w.jsxs)(T.aF,{title:"".concat(a.CanBoID?"S\u1eeda":"Th\xeam"," th\xf4ng tin c\xe1n b\u1ed9"),width:950,onCancel:this.onCancel,visible:n,footer:[(0,w.jsx)(T.$n,{onClick:t,children:"H\u1ee7y"},"back"),(0,w.jsx)(T.$n,{htmlType:"submit",type:"primary",form:"formsp",onClick:this.onOk,loading:e,children:"L\u01b0u"},"submit")],children:[(0,w.jsx)(N,{className:"modal",children:(0,w.jsxs)(S.A,(0,i.A)((0,i.A)({ref:this.formRef},{wrapperCol:24,labelAlign:"left"}),{},{children:[(0,w.jsx)(en,{name:"CanBoID",hidden:!0,initialValue:null}),(0,w.jsxs)(sn,{value:l,onChange:this.changeLoaiThemCoQuan,style:{marginBottom:15},children:[(0,w.jsx)(_.Ay,{value:1,children:"Ch\u1ecdn ph\xf2ng ban"}),(0,w.jsx)(_.Ay,{value:2,disabled:a.CanBoID,children:"Th\xeam ph\xf2ng ban"})]}),(0,w.jsx)(b.A,{style:{borderBottom:"solid 1px #e6e6e6",marginBottom:15},children:1===l?(0,w.jsx)(en,{name:"CoQuanID",initialValue:void 0,children:(0,w.jsx)(T.f7,{style:{width:400},placeholder:"Ch\u1ecdn ph\xf2ng ban",noGetPopupContainer:!0,showSearch:!0,treeData:s,dropdownStyle:{maxHeight:400,overflow:"auto"},allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title",onChange:n=>this.changeCoQuan(n)})}):(0,w.jsx)(en,{name:"TenCoQuan",initialValue:"",children:(0,w.jsx)(T.pd,{style:{width:400},placeholder:"T\xean ph\xf2ng ban"})})}),a.CanBoID?"":(0,w.jsxs)(b.A,{style:{marginBottom:20},children:[(0,w.jsxs)(v.A,{span:7,children:["T\xean c\xe1n b\u1ed9 ",(0,w.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,w.jsx)(v.A,{span:6,push:1,children:"Email"}),(0,w.jsx)(v.A,{span:6,push:2,children:"Vai tr\xf2"}),(0,w.jsx)(v.A,{span:1,push:4,children:a.CanBoID?"":(0,w.jsx)("div",{style:{textAlign:"right"},children:(0,w.jsx)(u.A,{title:"Th\xeam c\xe1n b\u1ed9",children:(0,w.jsx)(T.$n,{type:"primary",onClick:this.ThemCanBo,style:{borderRadius:"50%",width:40,height:40},children:(0,w.jsx)(nn.A,{})})})})})]}),a.CanBoID?"":h.map((n,t)=>(0,w.jsxs)(b.A,{children:[(0,w.jsx)(v.A,{span:7,children:(0,w.jsx)(en,{name:["DanhSachCanBo",t,"TenCanBo"],initialValue:"",rules:[(0,i.A)({},an)],children:(0,w.jsx)(T.pd,{style:{textTransform:"capitalize"}})})}),(0,w.jsx)(v.A,{span:6,push:1,children:(0,w.jsx)(en,{name:["DanhSachCanBo",t,"Email"],initialValue:"",children:(0,w.jsx)(T.pd,{})})}),(0,w.jsx)(v.A,{span:8,push:2,children:(0,w.jsx)(en,{initialValue:[],name:["DanhSachCanBo",t,"ListNhomNguoiDungID"],children:(0,w.jsx)(T.l6,{allowClear:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",showSearch:!0,mode:"multiple",noGetPopupContainer:!0,children:o.map(n=>(0,w.jsx)(T.c$,{value:n.NhomNguoiDungID,children:n.TenNhom}))})})}),a.CanBoID?"":(0,w.jsx)(v.A,{span:1,push:2,children:(0,w.jsx)(en,{style:{textAlign:"right"},children:(0,w.jsx)(T.$n,{type:"danger",onClick:()=>this.XoaCanBo(t),children:(0,w.jsx)(tn.A,{})})})})]})),a.CanBoID?(0,w.jsxs)(b.A,{children:[(0,w.jsx)(v.A,(0,i.A)((0,i.A)({},{lg:{span:8},md:{span:10},sm:{span:24},xs:{span:24}}),{},{children:h.map((n,t)=>(0,w.jsxs)(b.A,{children:[(0,w.jsx)(en,{label:"T\xean c\xe1n b\u1ed9",name:["DanhSachCanBo",t,"TenCanBo"],initialValue:"",rules:[(0,i.A)({},an)],children:(0,w.jsx)(T.pd,{style:{textTransform:"capitalize"}})}),(0,w.jsx)(en,{label:"Email",name:["DanhSachCanBo",t,"Email"],initialValue:"",children:(0,w.jsx)(T.pd,{})}),(0,w.jsx)(en,{label:"Vai tr\xf2",initialValue:[],name:["DanhSachCanBo",t,"ListNhomNguoiDungID"],children:(0,w.jsx)(T.l6,{allowClear:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",showSearch:!0,mode:"multiple",noGetPopupContainer:!0,children:o.map(n=>(0,w.jsx)(T.c$,{value:n.NhomNguoiDungID,children:n.TenNhom}))})})]}))})),(0,w.jsxs)(v.A,(0,i.A)((0,i.A)({},{lg:{span:12,push:2},md:{span:13,push:1},sm:{span:24},xs:{span:24}}),{},{children:[(0,w.jsx)(en,{label:"\u1ea2nh nh\u1eadn di\u1ec7n",labelCol:{xs:6,md:6,lg:8},wrapperCol:{xs:18,md:18,lg:16},children:(0,w.jsx)(W.A,(0,i.A)((0,i.A)({},{grid:!0,modalOk:"C\u1eaft \u1ea3nh",modalCancel:"H\u1ee7y",modalTitle:"Ch\u1ec9nh s\u1eeda h\xecnh \u1ea3nh",maxZoom:5,minZoom:.8}),{},{beforeCrop:this.checkFileImage,children:(0,w.jsx)(G.A,{accept:".jpg, .png",showUploadList:!1,beforeUpload:n=>this.beforeUpload(n,this.renderAnhNhanDien),children:r?(0,w.jsx)("img",{className:"img-nhan-dien",src:r.FileUrl}):(0,w.jsxs)("div",{className:"frame-picture",children:[(0,w.jsx)(nn.A,{}),(0,w.jsx)("div",{children:"Nh\u1ea5n \u0111\u1ec3 t\u1ea3i \u1ea3nh"})]})})}))}),(0,w.jsx)(en,{label:"Ho\u1eb7c",labelCol:{xs:6,md:6,lg:8},wrapperCol:{xs:18,md:18,lg:16},children:(0,w.jsx)(T.$n,{type:"primary",style:{width:150},onClick:this.openCamera,children:"M\u1edf camera"})})]}))]}):""]}))}),a.CanBoID?(0,w.jsx)(Z,{visible:c,onCancel:this.closeModalCamera,onOk:this.submitModalCamera,CanBoID:a.CanBoID}):""]})}};var hn=a(40854),ln=a.n(hn);var rn=a(16522),cn=a(15615),dn=a(30033);class un extends s.Component{constructor(n){super(n),this.onSearch=(n,t)=>{let a=this.state.filterData,e={value:n,property:t},i=(0,I.D5)(a,e,null);this.setState({filterData:i},()=>{(0,I._Y)(this.state.filterData),this.props.getList(this.state.filterData)})},this.onTableChange=(n,t,a)=>{let e=this.state.filterData,i={pagination:n,filters:t,sorter:a},s=(0,I.D5)(e,null,i);this.setState({filterData:s},()=>{(0,I._Y)(this.state.filterData),this.props.getList(this.state.filterData)})},this.resetPassword=n=>{const{defaultPassword:t}=this.props;c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{L.ResetMatKhau({NguoiDungID:n}).then(n=>{n.data.Status>0?c.A.success({title:"Th\xf4ng b\xe1o",content:"M\u1eadt kh\u1ea9u \u0111\xe3 \u0111\u01b0\u1ee3c chuy\u1ec3n v\u1ec1 m\u1eb7c \u0111\u1ecbnh l\xe0: ".concat(t),okText:"\u0110\xf3ng"}):(0,I.M)(n.data.Message)}).catch(n=>{(0,I.M)(n.toString())})}})},this.ThemCanBo=()=>{let{modalKey:n}=this.state;n++,this.setState({dataEditCanBo:{},action:"add",visibleModalCanBo:!0,modalKey:n})},this.EditCanBo=(n,t)=>{L.ChiTietCanBo({CanBoID:n}).then(n=>{if(n.data.Status>0){let{modalKey:a}=this.state;a++,this.setState({dataEditCanBo:n.data.Data,action:"edit",visibleModalCanBo:!0,modalKey:a,NguoiDungID:t})}else(0,I.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())})},this.closeModalCanBo=()=>{this.setState({visibleModalCanBo:!1})},this.submitModalCanBo=(n,t)=>{const{action:a}=this.state;if("add"===a)delete n.CanBoID,this.setState({loading:!0}),L.ThemCanBo(n).then(t=>{this.setState({loading:!1}),t.data.Status>0?(d.Ay.success("Th\xeam c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),this.closeModalCanBo(),this.props.getList(this.state.filterData),!n.CoQuanID&&n.TenCoQuan&&this.props.getCQ()):(0,I.M)(t.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())});else if("edit"===a){const a=n.DanhSachCanBo[0],o=(0,i.A)({CanBoID:n.CanBoID,CoQuanID:n.CoQuanID,NguoiDungID:this.state.NguoiDungID},a),h=new FormData;t&&t.FileData&&h.append("files",t.FileData),h.append("HeThongCanBoV2ModelStr",JSON.stringify(o)),this.setState({loading:!0}),(e=O.suacanbov4,s=h,ln()({method:"POST",url:e,data:s,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).catch(n=>{const{status:t,statusText:a}=n.response;return{Status:0,Message:t||a?"".concat(t," - ").concat(a):"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"}})).then(n=>{this.setState({loading:!1}),n.data.Status>0?(d.Ay.success("C\u1eadp nh\u1eadt th\xf4ng tin c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),this.closeModalCanBo(),this.setState({NguoiDungID:null}),this.props.getList(this.state.filterData)):(0,I.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())})}var e,s},this.XoaCanBo=n=>{c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a th\xf4ng tin c\xe1n b\u1ed9 n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{L.XoaTaiKhoan({ListID:[n]}).then(n=>{n.data.Status>0?(d.Ay.success("X\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.props.getList(this.state.filterData)):(0,I.M)(n.data.Message)}).catch(n=>{(0,I.M)(n.toString())})}})},this.XoaCoQuan=n=>{c.A.confirm({title:"Th\xf4ng b\xe1o",content:"Thao t\xe1c n\xe0y s\u1ebd x\xf3a ph\xf2ng ban v\xe0 to\xe0n b\u1ed9 c\xe1n b\u1ed9 thu\u1ed9c ph\xf2ng ban, b\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ph\xf2ng ban n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{L.XoaCoQuan({CoQuanID:n}).then(n=>{n.data.Status>0?(d.Ay.success("X\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.props.getListSP(this.state.filterData),this.props.getCQ()):(0,I.M)(n.data.Message)}).catch(n=>{(0,I.M)(n.toString())})}})},this.EditCoQuan=n=>{this.setState({CoQuanEdit:n.CoQuanID,TenCoQuanEdit:n.TenCoQuan})},this.CancelEditCoQuan=()=>{this.setState({CoQuanEdit:null,TenCoQuanEdit:""})},this.SaveEditCoQuan=(n,t)=>{L.SuaTenCoQuan({CoQuanID:n,TenCoQuan:t}).then(n=>{n.data.Status>0?(d.Ay.destroy(),d.Ay.success("Thay \u0111\u1ed5i th\xf4ng tin ph\xf2ng ban th\xe0nh c\xf4ng"),this.CancelEditCoQuan(),this.props.getList(this.state.filterData),this.props.getCQ()):(0,I.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,I.M)(n.toString())})},this.printQR=()=>{setTimeout(()=>{(0,I.Tu)(this.printRef.current.innerHTML)},500)},this.downloadQR=()=>{const{QRCode:n,TenCoQuan:t}=this.props,a=document.createElement("a");a.href=n,a.target="_blank",a.download="QRCheckin-".concat(t,".png"),a.click()},this.renderTenCanBo=n=>{const{DanhSachNhomNguoiDung:t}=n,a=t.map(n=>n.TenNhom),e=a.join(", ");return(0,w.jsxs)("div",{children:["T\xean c\xe1n b\u1ed9: ",n.TenCanBo,(0,w.jsx)("br",{}),"T\xe0i kho\u1ea3n: ",n.TenNguoiDung,(0,w.jsx)("br",{}),a.length?"Vai tr\xf2: ".concat(e):""]})},this.renderTenCoQuan=(n,t)=>{const{CoQuanEdit:a,TenCoQuanEdit:e}=this.state;return a&&a===t.CoQuanID?(0,w.jsx)(T.NJ,{enterButton:(0,w.jsx)(rn.A,{}),value:e,onSearch:n=>this.SaveEditCoQuan(a,n),onChange:this.changeEditCoQuan}):n},this.changeEditCoQuan=n=>{this.setState({TenCoQuanEdit:n.target.value})},this.renderThaoTacCoQuan=n=>{const{CoQuanEdit:t}=this.state;return(0,w.jsxs)("div",{className:"action-btn",children:[(0,w.jsx)(u.A,{title:t&&t===n.CoQuanID?"H\u1ee7y":"S\u1eeda ph\xf2ng ban",children:t&&t===n.CoQuanID?(0,w.jsx)(cn.A,{style:{color:"red"},onClick:this.CancelEditCoQuan}):(0,w.jsx)(H.A,{onClick:()=>this.EditCoQuan(n)})}),(0,w.jsx)(u.A,{title:"X\xf3a ph\xf2ng b\u1ea1n",children:(0,w.jsx)(X.A,{onClick:()=>this.XoaCoQuan(n.CoQuanID)})})]})},this.renderThaoTacCanBo=n=>(0,w.jsxs)("div",{className:"action-btn",children:[(0,w.jsx)(u.A,{title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",children:(0,w.jsx)(q.A,{onClick:()=>this.resetPassword(n.NguoiDungID)})}),(0,w.jsx)(u.A,{title:"S\u1eeda c\xe1n b\u1ed9",children:(0,w.jsx)(H.A,{onClick:()=>this.EditCanBo(n.CanBoID,n.NguoiDungID)})}),(0,w.jsx)(u.A,{title:"X\xf3a c\xe1n b\u1ed9",children:(0,w.jsx)(X.A,{onClick:()=>this.XoaCanBo(n.CanBoID)})})]});const t=P.parse(this.props.location.search);this.state={modalKey:0,visibleModalCanBo:!1,dataEditCanBo:{},action:"",loading:!1,filterData:t,NguoiDungID:null,CoQuanEdit:null,TenCoQuanEdit:""},this.printRef=s.createRef()}componentDidMount(){this.props.getInitData(this.state.filterData)}render(){const{modalKey:n,visibleModalCanBo:t,dataEditCanBo:a,loading:e,filterData:i,CoQuanQRPrint:s}=this.state,{DanhSachCanBo:o,DanhSachCoQuan:h,TotalRow:l,TableLoading:r,role:c,QRCode:d,TenCoQuan:u,fileLimit:g}=this.props,f=i.PageNumber?parseInt(i.PageNumber):1,S=i.PageSize?parseInt(i.PageSize):(0,I.WT)(),j=[{title:"STT",align:"center",width:"5%",render:(n,t,a)=>(0,w.jsx)("span",{children:(f-1)*S+(a+1)})},{title:"C\xe1n b\u1ed9 \u0111\u01a1n v\u1ecb",width:"35%",render:(n,t)=>this.renderTenCanBo(t)},{title:"Thao t\xe1c",width:"15%",render:(n,t)=>this.renderThaoTacCanBo(t)},{title:"Ph\xf2ng ban",width:"30%",dataIndex:"TenCoQuan",render:(n,t)=>this.renderTenCoQuan(n,t)},{title:"Thao t\xe1c",width:"15%",render:(n,t)=>this.renderThaoTacCoQuan(t)}];return(0,w.jsxs)(p.A,{children:[(0,w.jsx)(m.A,{children:"Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng"}),(0,w.jsx)(A.A,{children:c.add?(0,w.jsxs)(T.$n,{type:"primary",onClick:this.ThemCanBo,children:[(0,w.jsx)(dn.A,{})," Th\xeam m\u1edbi"]}):""}),(0,w.jsxs)(N,{className:"index",children:[(0,w.jsx)(C.A,{children:(0,w.jsxs)(b.A,{className:"row-content",children:[(0,w.jsxs)(v.A,{xs:24,md:24,lg:18,xl:20,className:"col-table",children:[(0,w.jsxs)(x.A,{children:[(0,w.jsx)(T.f7,{showSearch:!0,treeData:h,defaultValue:i.CoQuanID,style:{width:200},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ph\xf2ng ban",allowClear:!0,treeDefaultExpandAll:!0,onChange:n=>this.onSearch(n,"CoQuanID"),notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}),(0,w.jsx)(T.NJ,{placeholder:"T\xecm ki\u1ebfm c\xe1n b\u1ed9",style:{width:300},allowClear:!0,onSearch:n=>this.onSearch(n,"Keyword"),defaultValue:i.Keyword})]}),(0,w.jsx)(D.Ay,{columns:j,rowKey:"CanBoID",dataSource:o,pagination:{showSizeChanger:!0,showTotal:(n,t)=>"T\u1eeb ".concat(t[0]," \u0111\u1ebfn ").concat(t[1]," tr\xean ").concat(n),total:l,current:f,pageSize:S},loading:r,onChange:this.onTableChange,scroll:{y:"calc(100vh - 400px)",x:800}})]}),(0,w.jsx)(v.A,{xs:24,md:24,lg:6,xl:4,className:"col-qr",children:(0,w.jsxs)("div",{className:"qr-container",children:[(0,w.jsx)("img",{src:d,className:"img-qr",style:{width:200,height:200}}),(0,w.jsxs)("div",{className:"action-qr",children:[(0,w.jsxs)(T.$n,{type:"danger",onClick:this.printQR,children:[(0,w.jsx)(z.A,{})," In"]}),(0,w.jsxs)(T.$n,{type:"primary",onClick:this.downloadQR,children:[(0,w.jsx)(K.A,{})," T\u1ea3i xu\u1ed1ng"]})]})]})})]})}),(0,w.jsx)(on,{visible:t,dataEdit:a,DanhSachCoQuan:h,onCreate:this.submitModalCanBo,onCancel:this.closeModalCanBo,fileLimit:g},n),(0,w.jsx)("div",{ref:this.printRef,style:{display:"none"},children:(0,w.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,w.jsx)("img",{style:{marginTop:"20%",width:400,height:400},src:d}),(0,w.jsx)("div",{style:{marginTop:20,fontWeight:"bold",fontSize:30},children:u})]})})]})]})}}const gn=(0,o.Ng)(function(n){return(0,i.A)((0,i.A)({},n.QuanTriHeThong),{},{role:(0,I.vh)(n.Auth.role,"quan-tri-he-thong"),defaultPassword:(0,I.op)("defaultPassword",10),fileLimit:(0,I.op)("fileLimit",10)})},h.A)(un);var pn=a(11643);const{ROLEID:mn}=r();class Cn extends s.Component{constructor(n){document.title="Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng",super(n)}render(){const{user:n,role:t}=this.props;if(!t.view)return(0,w.jsx)(pn.A,{to:"/dashboard"});return(n&&n.RoleID||0)===mn.ADMIN?(0,w.jsx)($,(0,i.A)({},this.props)):(0,w.jsx)(gn,(0,i.A)({},this.props))}}const xn=(0,o.Ng)(function(n){return{user:n.Auth.user,role:(0,I.vh)(n.Auth.role,"quan-tri-he-thong")}},h.A)(Cn)},83305:(n,t,a)=>{a.d(t,{A:()=>p});a(65043);var e,i,s=a(57528),o=a(94574),h=a(17159);const l=o.Ay.h3(e||(e=(0,s.A)(["\n  font-size: 14px;\n  font-weight: 500;\n  color: ",";\n  margin: 0;\n  margin-bottom: 5px;\n"])),(0,h.palette)("text",0)),r=o.Ay.p(i||(i=(0,s.A)(["\n  font-size: 13px;\n  font-weight: 400;\n  color: ",";\n  line-height: 24px;\n"])),(0,h.palette)("text",3));var c=a(70579);const d=n=>(0,c.jsxs)("div",{children:[n.title?(0,c.jsxs)(l,{className:"isoBoxTitle",children:[" ",n.title," "]}):"",n.subtitle?(0,c.jsxs)(r,{className:"isoBoxSubTitle",children:[" ",n.subtitle," "]}):""]});var u;const g=o.Ay.div(u||(u=(0,s.A)(["\n  width: 100%;\n  height: 100%;\n  padding: 20px 20px 5px 20px;\n  background-color: #ffffff;\n  border: 1px solid ",";\n  margin: 0 0 30px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  @media only screen and (max-width: 767px) {\n    padding: 20px;\n    ",";\n  }\n\n  &.half {\n    width: calc(50% - 34px);\n    @media (max-width: 767px) {\n      width: 100%;\n    }\n  }\n"])),(0,h.palette)("border",0),""),p=n=>(0,c.jsxs)(g,{className:"".concat(n.className||""," isoBoxWrapper"),style:n.style,children:[(0,c.jsx)(d,{title:n.title,subtitle:n.subtitle}),n.children]})}}]);