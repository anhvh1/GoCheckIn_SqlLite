(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[202],{18082:()=>{},40745:()=>{},76174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>xe});var n=a(89379),i=a(65043),o=a(1262),s=a(78143),h=a(44246),c=a(45543),r=a(84236);const l={uploadimage:r.Ay.apiImage+"recognition",verification:r.Ay.apiImage+"verification",checkin:r.Ay.apiInOut+"VaoRa/Vao",checkinv4:r.Ay.apiInOutv4+"VaoRa/Vao",checkout:r.Ay.apiInOut+"VaoRa/Ra",checkoutv4:r.Ay.apiInOutv4+"VaoRa/Ra",danhsachcanbo:r.Ay.apiInOut+"HeThongCanBo/DanhSachCanBo_TrongCoQuanSuDungPhanMem",danhsachletan:r.Ay.apiInOut+"HeThongCanBo/GetDanhSachLeTan",getbymathe:r.Ay.apiInOutv4+"VaoRa/GetByMaThe",getbychandung:r.Ay.apiInOut+"VaoRa/Get_By_AnhChanDung",getimagecamera:r.Ay.apiInOut+"VaoRa/Get_AnhChanDung_FromCamera",getipcamera:r.Ay.apiInOut+"SystemConfig/GetByKey",getlistpaging:r.Ay.apiInOutv4+"VaoRa/GetListPageBySearch",nhandien:r.Ay.apiInOutv4+"VaoRa/NhanDienKhuonMat"},d={UploadImage:e=>(0,c.p3)(l.uploadimage,(0,n.A)({},e)),Checkin:e=>(0,c.zO)(l.checkin,(0,n.A)({},e)),Checkinv4:e=>(0,c.zO)(l.checkinv4,(0,n.A)({},e)),Checkout:e=>(0,c.zO)(l.checkout,(0,n.A)({},e)),Checkoutv4:e=>(0,c.zO)(l.checkoutv4,(0,n.A)({},e)),DanhSachCanBo:()=>(0,c.vk)(l.danhsachcanbo),DanhSachLeTan:()=>(0,c.vk)(l.danhsachletan),GetByMaThe:e=>(0,c.vk)(l.getbymathe,(0,n.A)({},e)),Verification:e=>(0,c.p3)(l.verification,(0,n.A)({},e)),GetByChanDung:e=>(0,c.zO)(l.getbychandung,(0,n.A)({},e)),GetImageCamera:e=>(0,c.vk)(l.getimagecamera,(0,n.A)({},e)),GetIPCamera:e=>(0,c.vk)(l.getipcamera,(0,n.A)({},e)),GetList:e=>(0,c.vk)(l.getlistpaging,(0,n.A)({},e)),NhanDien:e=>(0,c.zO)(l.nhandien,(0,n.A)({},e))};var g,C=a(69907),p=a(18161),u=a.n(p),m=a(2252),x=a(33496),T=a(93940),A=a(94635),D=a(47419),v=a(11645),y=a(82314),N=a(5397),M=a(76649),S=a(3259),b=a(53793),f=a(86178),j=a.n(f),k=a(17029),w=a.n(k),L=a(57528),I=a(22121);const B=I.Ay.div(g||(g=(0,L.A)(["\n  .title {\n    font-weight: bold;\n    font-size: 18px;\n    \n    .sub-title {\n      font-weight: normal;\n      font-size: 14px;\n    }\n  }\n  \n  .queue-title {\n    cursor: pointer;\n    text-decoration: underline;\n    color: #d9363e;\n  }\n  \n  .flex {\n    display: flex;\n    align-items: center;\n  }\n  \n  .center {\n    text-align: center;\n  }\n  \n  .ant-form .ant-form-item {\n    margin-bottom: 5px !important;\n  }\n\n  .col-container {\n    width: 100%;\n    display: flex;\n    padding: 5px 10px;\n    \n    .col {\n      margin-right: 10px;\n    \n      &:last-child {\n        margin-right: 0;\n      }\n    }\n    \n    .col-first {\n      // width: 50%;\n      \n      .box-container {\n        overflow: auto;\n        max-height: calc(100vh - 180px);\n      }\n      \n      .box {\n        box-shadow: rgba(0, 0, 0, 0.35) 0px 2px 2px;\n        border-radius: 4px;\n        margin-bottom: 10px;\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n      \n      .box-relative {\n        position: relative;\n      }\n      \n      .div-loading {\n        background-color: rgba(255, 255, 255, 0.6);\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        top: 0;\n        z-index: 1000;\n        \n        .spin {\n          top: 50%;\n          left: 50%;\n          position: absolute;\n        }\n      }\n      \n      .box-camera {\n        box-shadow: none;\n        \n        .camera-content {\n          width: 100%;\n          height: 190px;\n          border: dotted 4px #ccc;\n          border-radius: 8px;\n          \n          .content {\n            height: 140px;\n            width: 100%;\n            text-align: center;\n            padding-top: 5px;\n            \n            .box-image {\n              position: relative;\n              \n              .close-ico {\n                color: #000;\n                position: absolute;\n                top: 0;\n                right: 5px;\n              }\n            }\n            \n            .camera-canvas {\n              display: flex;\n              position: relative;\n              justify-content: center;\n              \n              #detect-canvas {\n                position: absolute;\n              }\n            }\n          }\n          \n          .action {\n            text-align: center;\n            \n            button {\n              background: #ccc;\n              \n              &:hover {\n                &:not(.ant-btn[disabled]) {\n                  border-color: #ccc;\n                  color: #000;\n                }\n              }\n            }\n          }\n        }\n      }\n      \n      .box-info {\n        padding: 20px;\n      \n        .ant-col {\n          margin-bottom: 0;\n        }\n        \n        .ant-input[disabled] {\n          color: rgba(0, 0, 0, 0.7);\n        }\n        \n        .ant-select-disabled {\n          color: rgba(0, 0, 0, 0.7);\n        }\n      }\n    }\n    \n    .col-second {\n      .boxSearch {\n        padding: 5px 25px;\n        \n        input {\n          border-radius: 14px;\n        }\n      }\n      \n      .card-container {\n        padding: 0 15px;\n        max-height: calc(100vh - 250px);\n        overflow: auto;\n      }\n    } \n    \n    .col-third {\n      .box-container {\n        padding: 0 15px;\n        overflow: auto;\n        min-height: 430px;\n        max-height: calc(100vh - 230px);\n        \n        .box-info {\n          width: 100%;\n          height: 120px;\n          box-shadow: rgba(0, 0, 0, 0.35) 0px 2px 2px;\n          border-radius: 8px;\n          margin-top: 15px;\n          position: relative;\n          background-size: cover;\n          background-position: center;\n          \n          &:last-child {\n            margin-bottom: 15px;\n          }\n          \n          .text-number {\n            color: #fff;\n            text-align: center;\n            font-size: 18px;\n            line-height: 50px;\n            background: rgba(84, 73, 241, 0.8);\n            position: absolute;\n            bottom: 0;\n            height: 50px;\n            width: 100%;\n            border-bottom-right-radius: 8px;\n            border-bottom-left-radius: 8px;\n          }\n        }\n      }\n      \n      .div-report {\n        margin-top: 20px;\n        border-top: solid 1px #ccc;\n        \n        .flex {\n          display: flex;\n        }\n        \n        .main-report {\n          // display: flex;\n          margin-top: 10px;\n          \n          .report-label {\n            font-weight: bold;\n            // width: 30%;\n          }\n          \n          .report-wrapper {\n            // width: 70%;\n          }\n        }\n        \n        .action-report {\n          width: 100%;\n          text-align: center;\n          margin-top: 15px;\n          \n          button {\n            border-radius: 8px;\n          }          \n        }\n      }\n    }   \n  }\n  \n  .div-footer {\n    width: 100%;\n    position: fixed;\n    bottom: 25px;   \n    background-color: #e8e8e8;\n    padding: 10px 0 20px 0;\n    z-index: 999;\n    border-top: solid 1px #ccc;\n    height: 75px;\n      \n    .div-action {\n      width: 100%;\n      text-align: center;\n    }\n  }\n  \n  .footer-main {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    text-align: center;\n    color: black;\n    font-size: 12px;\n    font-family: generic-family, serif;\n    background-color: #fff;\n    z-index: 999;\n    height: 25px;\n    padding-bottom: 5px;\n  }\n  \n  .x-red {\n    text-align: center;\n    color: red;\n    font-weight: bold;\n    font-size: 16px;\n    cursor: pointer;\n  }\n"])));var H,G=a(36282),Y=a(70579);const O=(0,I.Ay)(G.A)(H||(H=(0,L.A)(["\n  \n"]))),V=e=>(0,Y.jsx)(O,(0,n.A)((0,n.A)({},e),{},{children:e.children}));var P,R=a(71349);const _=I.Ay.div(P||(P=(0,L.A)(["\n  width: 100%;\n  border: solid 1px #5449F1;\n  display: flex;\n  min-height: 75px;\n  margin: 10px 0;\n  border-radius: 4px;\n  cursor: pointer;\n  position: relative;\n  \n  &:hover {\n    border: solid 2px #5449F1;\n  }\n  \n  .image-div {\n    display: flex;\n    width: calc(100% / 3); \n    justify-content: center;\n    align-items: center;\n    \n    img {\n      //width: 100%;\n      //height: 75%;\n      max-height: 60px;\n    }\n    \n    .icon-empty {\n      font-size: 36px;\n      color: #ccc;\n    }\n  }\n  \n  .info-div {\n    width: calc(100% * 2 / 3);\n    padding: 5px 10px;\n    font-size: 14px;\n    position: relative;\n    \n    .info-mathe {\n      border: solid 1px #ccc;\n      border-radius: 4px;\n      width: 50px;\n      height: 20px;\n      line-height: 20px;\n      text-align: center;\n      font-weight: normal;\n      margin-left: auto;\n      order: 2;\n    }\n    \n    .info-giovao {\n      \n    }\n    \n    .info-name {\n      font-weight: bold;\n      display: flex;\n    }\n  }\n  \n  .btn-checkout {\n    background-color: rgba(96, 80, 244, 0.5);\n    color: #fff;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    padding: 0;\n    position: absolute;\n    right: 5px;\n    bottom: 5px;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    \n    &:hover {\n      background-color: #513ff3;\n    }\n  }\n"]))),K=e=>(0,Y.jsxs)(_,{onClick:e.onClick,style:{border:"".concat(e.isPicked?"solid 2px #5449F1":"solid 1px #5449F1")},children:[(0,Y.jsx)("div",{className:"image-div",children:""!==e.AnhChanDung||""!==e.AnhCMT?(0,Y.jsx)("img",{src:e.AnhChanDung?e.AnhChanDung:e.AnhCMT}):(0,Y.jsx)(A.A,{className:"icon-empty",type:"audit"})}),(0,Y.jsxs)("div",{className:"info-div",children:[(0,Y.jsxs)("div",{className:"info-name",children:[e.TenCanBo,e.MaThe&&""!==e.MaThe?(0,Y.jsx)("div",{className:"info-mathe",children:e.MaThe}):""]}),(0,Y.jsxs)("div",{children:["S\u1ed1 gi\u1ea5y t\u1edd: ",e.SoCMT]}),(0,Y.jsxs)("div",{className:"info-giovao",children:["Gi\u1edd v\xe0o: ",j()(e.GioVao).format("DD/MM/YYYY - HH:mm")]})]}),(0,Y.jsx)("div",{className:"btn-checkout",onClick:e.onCheckOut,children:(0,Y.jsx)(A.A,{type:"logout"})})]});var F=a(85341),U=a.n(F),E=a(9370);const Q=a.p+"static/media/checkin.1724412cf6e39fa1e13e.png",z=a.p+"static/media/checkout.a53284b48765516505bc.png",W=a.p+"static/media/meetting.b059f563e98b5af39d8b.png";var q,$=a(41528);const J=I.Ay.div(q||(q=(0,L.A)(["\n  .title {\n    text-align: center;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  \n  .weight {\n    font-weight: bold;\n  }\n  \n  .queue-container {\n    .queue-item {\n      display: flex;\n      justify-items: center;\n      padding: 10px;\n      border-bottom: solid 1px #ccc;\n      \n      &:hover {\n        cursor: pointer;\n        color: #fff;\n        background: #8cc8ff;\n      }\n      \n      .action {\n        margin-left: auto;\n        \n        .anticon {\n          &:hover {\n            color: red;\n          }\n        }\n      }\n    }\n  }\n"])));var X=a(92089);class Z extends i.Component{constructor(e){super(e),this.renderDivPrint=()=>{const{dataBaoCao:e,filterData:t}=this.props,a={table:{width:"100%",borderCollapse:"collapse",fontFamily:"Times New Roman"},th:{textAlign:"center",fontWeight:"bold",border:"solid 0.5pt #999",padding:5},td:{border:"solid 0.5pt #999",padding:5}};return(0,Y.jsxs)("table",{style:a.table,children:[(0,Y.jsx)("tr",{children:(0,Y.jsx)("td",{colSpan:10,style:(0,n.A)((0,n.A)({},a.td),{},{border:"none",textAlign:"center"}),children:(0,Y.jsx)("b",{children:"DANH S\xc1CH KH\xc1CH V\xc0O - RA C\u1ee6A C\u01a0 QUAN"})})}),(0,Y.jsx)("tr",{children:(0,Y.jsxs)("td",{colSpan:10,style:(0,n.A)((0,n.A)({},a.td),{},{border:"none",textAlign:"center"}),children:["T\u1eeb ng\xe0y: ",j()(t.TuNgay).format("DD/MM/YYYY")," - \u0110\u1ebfn ng\xe0y: ",j()(t.DenNgay).format("DD/MM/YYYY")]})}),(0,Y.jsx)("tr",{}),(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:50}),children:"STT"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:200}),children:"H\u1ecd t\xean kh\xe1ch"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:200}),children:"C\u01a1 quan"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:100}),children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:150}),children:"S\u1ed1 CMND"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:200}),children:"\u0110\u1ecba ch\u1ec9"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:150}),children:"Ng\xe0y gi\u1edd v\xe0o"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:150}),children:"Ng\xe0y gi\u1edd ra"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:100}),children:"Th\xe2n nhi\u1ec7t"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:200}),children:"C\xe1n b\u1ed9 g\u1eb7p"}),(0,Y.jsx)("th",{style:(0,n.A)((0,n.A)({},a.th),{},{width:200}),children:"B\u1ed9 ph\u1eadn"})]}),e.map((e,t)=>(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:t+1}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"left"}),children:e.HoVaTen}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"left"}),children:e.TenCoQuan}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:e.DienThoai}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:"'".concat(e.SoCMND)}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"left"}),children:e.HoKhau}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:j()(e.GioVao).format("DD/MM/YYYY HH:ss")}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:e.GioRa?j()(e.GioRa).format("DD/MM/YYYY HH:ss"):""}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:e.ThanNhiet?"".concat(e.ThanNhiet," \xb0C"):""}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"left"}),children:e.TenCanBoGap}),(0,Y.jsx)("td",{style:(0,n.A)((0,n.A)({},a.td),{},{textAlign:"center"}),children:e.TenBoPhanGap})]}))]})},this.exportExcel=()=>{let e,t,a,n;e="<html><head><meta charset='utf-8'></head><body>"+this.refPrint.current.innerHTML+"</body></html>",a=new Blob(["\ufeff",e],{type:"application/vnd.ms-excel"}),n=URL.createObjectURL(a),t=document.createElement("A"),t.href=n,t.download="B\xe1o c\xe1o ra v\xe0o.xls",document.body.appendChild(t),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,"B\xe1o c\xe1o ra v\xe0o.xls"):t.click(),document.body.removeChild(t)},this.printComponent=()=>{let e=document.querySelectorAll("iframe");e&&e.length&&e.forEach(e=>{e.parentNode.removeChild(e)});const t=this.refPrint.current.innerHTML;let a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a),a.contentWindow.document.open(),a.contentWindow.document.write(t),a.contentWindow.document.close(),a.contentWindow.focus(),a.contentWindow.print()},this.renderLyDoGap=e=>{switch(e.LyDoGap){case 1:return"H\u1ecdp";case 2:return"G\u1eb7p ".concat(e.TenCanBoGap?"c\xe1n b\u1ed9 ".concat(e.TenCanBoGap):e.TenBoPhanGap);case 3:return"L\xfd do kh\xe1c".concat(e.LyDoKhac?": ".concat(e.LyDoKhac):"")}},this.refPrint=i.createRef(),this.state={}}render(){const{visible:e,onCancel:t,dataBaoCao:a,filterData:n}=this.props,i=[{title:"STT",align:"center",width:"5%",render:(e,t,a)=>a+1},{title:"H\u1ecd t\xean kh\xe1ch",dataIndex:"HoVaTen",width:"15%"},{title:"C\u01a1 quan",dataIndex:"TenCoQuan",width:"10%"},{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",dataIndex:"DienThoai",align:"center",width:"10%"},{title:"S\u1ed1 CMND",dataIndex:"SoCMND",align:"center",width:"10%"},{title:"\u0110\u1ecba ch\u1ec9",dataIndex:"HoKhau",width:"10%"},{title:"Ng\xe0y gi\u1edd v\xe0o",width:"10%",align:"center",dataIndex:"GioVao",render:e=>j()(e).format("DD/MM/YYYY HH:mm")},{title:"Ng\xe0y gi\u1edd ra",width:"10%",align:"center",dataIndex:"GioRa",render:(e,t)=>t.GioRa?j()(e).format("DD/MM/YYYY HH:mm"):""},{title:"Th\xe2n nhi\u1ec7t",dataIndex:"ThanNhiet",width:"5%",align:"center",render:(e,t)=>t.ThanNhiet?"".concat(t.ThanNhiet," \xb0C"):""},{title:"L\xfd do g\u1eb7p",align:"center",width:"15%",render:(e,t)=>this.renderLyDoGap(t)}];return(0,Y.jsx)(T.A,{title:"",width:1200,onCancel:t,visible:e,style:{top:20},footer:(0,Y.jsxs)("div",{style:{textAlign:"center"},children:[(0,Y.jsx)($.A,{type:"primary",onClick:this.printComponent,children:"In danh s\xe1ch"}),(0,Y.jsx)($.A,{type:"primary",style:{marginLeft:20},onClick:this.exportExcel,children:"Xu\u1ea5t excel"})]}),children:(0,Y.jsxs)(J,{children:[(0,Y.jsx)("div",{className:"title weight",children:"DANH S\xc1CH KH\xc1CH V\xc0O - RA C\u1ee6A C\u01a0 QUAN"}),(0,Y.jsxs)("div",{className:"title",children:["T\u1eeb ng\xe0y: ",j()(n.TuNgay).format("DD/MM/YYYY")," \u0111\u1ebfn ng\xe0y: ",j()(n.DenNgay).format("DD/MM/YYYY")]}),(0,Y.jsx)(X.Ay,{columns:i,rowKey:"ThongTinVaoRaID",dataSource:a,pagination:!1,scroll:{y:600}}),(0,Y.jsx)("div",{style:{display:"none"},children:(0,Y.jsx)("div",{ref:this.refPrint,children:this.renderDivPrint()})})]})})}}const ee=class extends i.Component{constructor(e){super(e),this.deleteLine=(e,t)=>{e.stopPropagation(),this.props.deleteLine(t)},this.refPrint=i.createRef(),this.state={}}render(){const{visible:e,onCancel:t,listCheckin:a,chooseLine:n}=this.props;return(0,Y.jsx)(m.aF,{title:"Danh s\xe1ch h\xe0ng \u0111\u1ee3i checkin",width:450,onCancel:t,visible:e,footer:null,children:(0,Y.jsx)(J,{children:(0,Y.jsx)("div",{className:"queue-container",children:a.map((e,t)=>(0,Y.jsxs)("div",{className:"queue-item",onClick:()=>n(t),children:[(0,Y.jsxs)("div",{className:"item",children:[e.HoVaTen," - S\u1ed1 gi\u1ea5y t\u1edd: ",e.SoCMND]}),(0,Y.jsx)("div",{className:"action",children:(0,Y.jsx)(A.A,{type:"close",onClick:e=>this.deleteLine(e,t)})})]}))})})})}};var te=a(45722),ae=a(42575),ne=a(53536),ie=a.n(ne),oe=a(19292),se=a(79336);const{changeCurrent:he,setListTemperWait:ce,getListTemperFromSite:re}=h.A,le=(new Date).getFullYear(),{Item:de}=S.A,{COL_COL_ITEM_LAYOUT_RIGHT:ge}=u(),{ITEM_LAYOUT_HALF:Ce,COL_ITEM_LAYOUT_HALF:pe}=U();let ue=new Date;class me extends i.Component{constructor(e){super(e),this.changeLoadingDataScan=e=>{this.setState((0,n.A)((0,n.A)({},this.state),{},{loadingDataScan:e}))},this.handleConnectSocketScan=()=>{const e=new WebSocket("ws://localhost:5431?key=123");console.log("start connect websocket"),e.onopen=()=>{console.log("\u2705 \u0110\xe3 k\u1ebft n\u1ed1i t\u1edbi ws://localhost:5431")},e.onmessage=e=>{this.changeLoadingDataScan(!0);const t=JSON.parse(e.data);console.log("ALL_STEP_DONE"===t.status,t.status),"ALL_STEP_DONE"===t.status&&(console.log("\ud83d\udce9 Data nh\u1eadn \u0111\u01b0\u1ee3c done: "+JSON.parse(e.data)),console.log("link photo",t.cardObj.facePhoto),this.setState({loadingDataScan:!1,dataCMT:(0,n.A)((0,n.A)({},this.state.dataCMT),{},{HoVaTen:t.cardObj.fullName,GioiTinh:t.cardObj.sex,SoCMND:t.cardObj.identityNumber,LoaiGiayTo:"CCCD",HoKhau:t.cardObj.placeOfResidence,SoCMND:t.cardObj.identityNumber}),imageChanDung:"data:image/jpeg;base64,"+t.faceObj.faceImage})),console.log("\ud83d\udce9 Data nh\u1eadn \u0111\u01b0\u1ee3c: "+JSON.parse(e.data))},e.onerror=e=>{this.changeLoadingDataScan(!1),console.log("\u274c L\u1ed7i: "+e)},e.onclose=()=>{this.changeLoadingDataScan(!1),console.log("\ud83d\udd0c K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng")}},this.componentDidMount=async()=>{this.handleConnectSocketScan(),this.props.getInitData(this.state.filterData),this.interval=setInterval(()=>{ue=new Date,this.setState({today:ue})},1e3),this.getCamera(),this.GetListCheckin();const e=document.getElementsByClassName("card-container");e[0]&&e[0].addEventListener("scroll",this.ScrollContainer),this.socket&&this.socket.close(),this.connect(),this.socketIO&&this.socketIO.stop(),this.socketIO=(0,oe.Qc)(),await this.socketIO.start(),this.socketIO.on("scan",e=>{this.setDataOnSocket(e)}),this.getListTemperFromTopBar();const t="/model";await se.B0.tinyFaceDetector.loadFromUri(t),await se.B0.faceLandmark68Net.loadFromUri(t),await se.B0.ssdMobilenetv1.loadFromUri(t)},this.connect=()=>{this.socket=new WebSocket("ws://localhost:8000"),this.socket.onopen=()=>{console.log("Socket temperate connected")},this.socket.onclose=e=>{console.log("Socket temperate disconnected",e)},this.socket.onerror=e=>{console.error("Socket temperate encountered error: ",e,"Closing socket temperate"),this.socket.close()},this.socket.onmessage=e=>{this.handleOnTemper(e)}},this.handleOnTemper=e=>{try{const t=JSON.parse(e.data);if(t.status){t.timeDate=j()(t.time,"YYYYMMDDHHmmss"),t.timeString=j()(t.time,"YYYYMMDDHHmmss").format("DD/MM/YYYY HH:mm:ss"),console.log(t.timeString,t);const{listTemper:e,temperUsing:a}=this.state;a.time?(e.push(t),this.setState({listTemper:e})):this.selectTemper(t)}}catch(t){console.log(t)}},this.setDataOnSocket=e=>{const{dataCMT:t,listCheckin:a}=this.state;let i=localStorage.getItem("user");i=JSON.parse(i);if(i.CoQuanSuDungPhanMem==e.coQuanSuDungPhanMem){const i=(0,n.A)((0,n.A)({},t),{},{HoVaTen:e.hoVaTen,SoCMND:e.soCMND,HoKhau:e.hoKhau,LoaiGiayTo:e.loaiGiayTo,GioiTinh:e.gioiTinh,sessionCode:e.sessionCode,CoQuanSuDungPhanMem:e.coQuanSuDungPhanMem,LyDoGap:e.lyDoGap,GapCanBo:"".concat(e.gapCanBo,"_").concat(e.donViCaNhan),DienThoai:e.dienThoai,TenCoQuan:e.tenCoQuan});""!==t.HoVaTen||""!==t.SoCMND?a.push((0,n.A)((0,n.A)({},i),{},{imageCMTTruoc:e.anhCMND_MTBase64,ThanNhiet:""})):this.setState({dataCMT:i,imageCMTTruoc:e.anhCMND_MTBase64})}},this.getListTemperFromTopBar=()=>{const{app:e}=this.props,{temperWait:t}=e;if(t.length){const e=t[0];if(this.selectTemper(e),t.length>1){const e=t.slice(1,t.length);this.setState({listTemper:e})}this.props.setListTemperWait(!1)}},this.ScrollContainer=e=>{const t=e.target;if(t.scrollTop===t.scrollHeight-t.clientHeight){let e=this.state.filterData;const{ListCheckinLoaded:t,TotalRow:a}=this.state;t.length<a&&(e.PageNumber+=1,this.setState({filterData:e},()=>this.GetListCheckin()))}},this.GetListCheckin=()=>{let{filterData:e,ListCheckinLoaded:t,TotalRow:a}=this.state;d.GetList((0,n.A)({},e)).then(n=>{n.data.Status>0&&(1===e.PageNumber?t=n.data.Data:n.data.Data.forEach(e=>t.push(e)),a=n.data.TotalRow,this.setState({ListCheckinLoaded:t,TotalRow:a}))})},this.onSearch=(e,t)=>{let{filterData:a}=this.state;a[t]=e,a.PageNumber=1,this.setState({filterData:a,ListCheckinLoaded:[]},()=>this.GetListCheckin())},this.fillData=(e,t)=>{const{dataCMT:a}=this.state;a.HoVaTen="N/A"!==e.name?e.name:2===t?a.HoVaTen:"",a.NgaySinh="N/A"!==e.birthday?j()(e.birthday,"DD-MM-YYYY"):2===t?a.NgaySinh:"",a.HoKhau="N/A"!==e.address?e.address:2===t?a.HoKhau:"",a.SoCMND="N/A"!==e.id?e.id:2===t?a.SoCMND:"",a.NoiCapCMND="N/A"!==e.issue_by?e.issue_by:1===t?a.NoiCapCMND:"",a.NgayCapCMND="N/A"!==e.issue_date?j()(e.issue_date,"DD-MM-YYYY"):1===t?a.NgayCapCMND:"",a.GioiTinh="N/A"!==e.sex?e.sex:2===t?a.GioiTinh:void 0,a.LoaiGiayTo="N/A"!==e.document?e.document:2===t?a.LoaiGiayTo:"",1===t?"N/A"!==e.name&&"N/A"!==e.id||(x.A.destroy(),x.A.warning("\u1ea2nh CMND m\u1eb7t tr\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7")):2===t&&("N/A"===e.name&&"N/A"===e.id||(x.A.destroy(),x.A.warning("\u1ea2nh CMND m\u1eb7t sau kh\xf4ng h\u1ee3p l\u1ec7"))),this.setState({dataCMT:a})},this.inputNumber=e=>{const t=e.charCode;(t<48||t>57)&&e.preventDefault()},this.CheckIn=()=>{const e=(0,n.A)({},this.state.dataCMT);if(e.NgaySinh=""!==e.NgaySinh?j()(e.NgaySinh,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.NgayCapCMND=""!==e.NgayCapCMND?j()(e.NgayCapCMND,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.AnhChanDungBase64=this.state.imageChanDung,e.AnhCMND_MTBase64=this.state.imageCMTTruoc,e.AnhCMND_MSBase64=this.state.imageCMTSau,delete e.GioVao,void 0===e.LyDoGap)return x.A.destroy(),void x.A.warning("Ch\u01b0a ch\u1ecdn l\xfd do v\xe0o c\u01a1 quan");if(2===e.LyDoGap){if(void 0===e.GapCanBo)return x.A.destroy(),void x.A.warning("Ch\u01b0a ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng g\u1eb7p");{const t=e.GapCanBo.split("_");e.GapCanBo=t[0],e.DonViCaNhan=t[1]}}else e.GapCanBo=0,e.DonViCaNhan=0;this.setState({loading:!0}),d.Checkinv4(e).then(t=>{if(t.data.Status>0){const a={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0};T.A.success({title:"Th\xf4ng b\xe1o",content:"Checkin th\xe0nh c\xf4ng",okText:"\u0110\xf3ng",onOk:()=>{let{filterData:e}=this.state;e.PageNumber=1,this.setState({dataCMT:a,loading:!1,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckIn:!1,showCamera:!0,ListCheckinLoaded:[],filterData:e,temperUsing:{}},()=>{this.props.getList(),this.GetListCheckin(),this.handlePlayChanDung()})}});const i=t.data.Data;"Connected"===this.socketIO.connectionState&&this.socketIO.invoke("scan",(0,n.A)((0,n.A)({},i),{},{sessionCode:e.sessionCode}))}else this.setState({loading:!1}),x.A.destroy(),x.A.error(t.data.Message)}).catch(e=>{this.setState({loading:!1}),x.A.destroy(),x.A.error(e.toString())})},this.CheckInv4=()=>{const e=(0,n.A)({},this.state.dataCMT);if(e.NgaySinh=""!==e.NgaySinh?j()(e.NgaySinh,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.NgayCapCMND=""!==e.NgayCapCMND?j()(e.NgayCapCMND,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.AnhChanDungBase64=this.state.imageChanDung,e.AnhCMND_MTBase64=this.state.imageCMTTruoc,e.AnhCMND_MSBase64=this.state.imageCMTSau,delete e.GioVao,void 0===e.LyDoGap)return x.A.destroy(),void x.A.warning("Ch\u01b0a ch\u1ecdn l\xfd do v\xe0o c\u01a1 quan");if(2===e.LyDoGap){if(void 0===e.GapCanBo)return x.A.destroy(),void x.A.warning("Ch\u01b0a ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng g\u1eb7p");{const t=e.GapCanBo.split("_");e.GapCanBo=t[0],e.DonViCaNhan=t[1]}}else e.GapCanBo=0,e.DonViCaNhan=0;this.setState({loading:!0}),d.Checkinv4(e).then(t=>{if(t.data.Status>0){x.A.destroy(),x.A.success("C\xe1n b\u1ed9 checkin th\xe0nh c\xf4ng");const a={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0};let{filterData:i}=this.state;i.PageNumber=1,this.setState({dataCMT:a,loading:!1,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckIn:!1,showCamera:!0,ListCheckinLoaded:[],filterData:i,temperUsing:{}},()=>{this.props.getList(),this.GetListCheckin(),this.handlePlayChanDung()});const o=t.data.Data;"Connected"===this.socketIO.connectionState&&this.socketIO.invoke("scan",(0,n.A)((0,n.A)({},o),{},{sessionCode:e.sessionCode}))}else this.setState({loading:!1}),x.A.destroy(),x.A.error(t.data.Message)}).catch(e=>{this.setState({loading:!1}),x.A.destroy(),x.A.error(e.toString())})},this.CheckOut=()=>{const e={ThongTinVaoRaID:this.state.dataCMT.ThongTinVaoRaID};this.setState({loading:!0}),d.Checkoutv4(e).then(e=>{if(e.data.Status>0){const e={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0,ThongTinVaoRaID:0};T.A.success({title:"Th\xf4ng b\xe1o",content:"Checkout th\xe0nh c\xf4ng",okText:"\u0110\xf3ng",onOk:()=>{let{filterData:t}=this.state;t.PageNumber=1,this.setState({dataCMT:e,loading:!1,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckOut:!1,showCamera:!0,ListCheckinLoaded:[],filterData:t},()=>{this.props.getList(),this.GetListCheckin(),this.handlePlayChanDung()})}})}else this.setState({loading:!1}),x.A.destroy(),x.A.error(e.data.Message)}).catch(e=>{this.setState({loading:!1}),x.A.destroy(),x.A.error(e.toString())})},this.CheckOutv4=()=>{const e={ThongTinVaoRaID:this.state.dataCMT.ThongTinVaoRaID};this.setState({loading:!0}),d.Checkoutv4(e).then(e=>{if(this.setState({loading:!1}),e.data.Status>0){3!==e.data.Status&&(x.A.destroy(),x.A.success("C\xe1n b\u1ed9 checkout th\xe0nh c\xf4ng"));const t={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0,ThongTinVaoRaID:0};let{filterData:a}=this.state;a.PageNumber=1,this.setState({dataCMT:t,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckOut:!1,showCamera:!0,ListCheckinLoaded:[],filterData:a},()=>{this.props.getList(),this.GetListCheckin(),this.handlePlayChanDung()})}else this.setState({loading:!1}),x.A.destroy(),x.A.error(e.data.Message)}).catch(e=>{this.setState({loading:!1}),x.A.destroy(),x.A.error(e.toString())})},this.callCheckOut=(e,t)=>{e.stopPropagation(),T.A.confirm({title:"Checkout",content:"B\u1ea1n c\xf3 mu\u1ed1n checkout kh\xe1ch n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{const e={ThongTinVaoRaID:t};d.Checkout(e).then(e=>{if(e.data.Status>0){T.A.success({title:"Th\xf4ng b\xe1o",content:"Checkout th\xe0nh c\xf4ng",okText:"\u0110\xf3ng",onOk:()=>{let{filterData:e}=this.state;e.PageNumber=1,this.setState({loading:!1,isCheckOut:!1,showCamera:!0,ListCheckinLoaded:[],filterData:e},()=>{this.props.getList(),this.GetListCheckin()})}})}else this.setState({loading:!1}),x.A.destroy(),x.A.error(e.data.Message)}).catch(e=>{this.setState({loading:!1}),x.A.destroy(),x.A.error(e.toString())})}})},this.changeCanBo=e=>{const{dataCMT:t}=this.state;t.GapCanBo=e,this.setState({dataCMT:t})},this.scanFile=e=>{const{videoInput:t}=this.state;if(3===e){const e=!this.state.showCamera;t.length||this.getCamera(),this.setState({showCamera:e,imageChanDung:""})}else if(1===e){const t=this.webcamRefTruoc.current.getScreenshot({width:1200,height:1e3});this.setState({imageCMTTruoc:t,loadingTruoc:!1,recognitionTruoc:!0}),d.UploadImage({image:t}).then(t=>{200===t.data.result_code?(this.fillData(t.data,e),this.setState({recognitionTruoc:!1})):500===t.data.result_code?(this.setState({recognitionTruoc:!1}),x.A.destroy(),x.A.error("\u1ea2nh CMND m\u1eb7t tr\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7")):(this.setState({recognitionTruoc:!1}),x.A.destroy(),x.A.error(t.data.result_message))}).catch(e=>{this.setState({recognitionTruoc:!1}),x.A.destroy(),x.A.error(e.toString())})}else if(2===e){const t=this.webcamRefSau.current.getScreenshot({width:1200,height:1e3});this.setState({imageCMTSau:t,loadingSau:!1,recognitionSau:!0}),d.UploadImage({image:t}).then(t=>{200===t.data.result_code?(this.fillData(t.data,e),this.setState({recognitionSau:!1})):500===t.data.result_code?(this.setState({recognitionSau:!1}),x.A.destroy(),x.A.error("\u1ea2nh CMND m\u1eb7t tr\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7")):(this.setState({recognitionSau:!1}),x.A.destroy(),x.A.error(t.data.result_message))}).catch(e=>{this.setState({recognitionSau:!1}),x.A.destroy(),x.A.error(e.toString())})}else this.Scan(e)},this.triggerUpload=()=>{clearInterval(this.videoCapture),this.setState({loadingChanDung:!0});let e=this.webcamRefChanDung.current.getScreenshot({width:600,height:500});this.setState({imageChanDung:e,showCamera:!1,loadingChanDung:!1});const{imageCMTTruoc:t,imageCMTSau:a}=this.state;if(""===t&&""===a);else{const n={image_cmt:t,image_cmt2:a,image_live:e};this.setState({recognitionChanDung:!0}),d.Verification(n).then(e=>{2===e.data.verify_result?this.setState({isCheckIn:!0,recognitionChanDung:!1}):(x.A.destroy(),x.A.warning("\u1ea2nh ch\xe2n dung kh\xf4ng kh\u1edbp v\u1edbi \u1ea3nh ch\u1ee9ng minh th\u01b0"),this.setState({isCheckIn:!1,recognitionChanDung:!1}),this.scanFile(3))}).catch(e=>{this.setState({imageChanDung:"",recognitionChanDung:!1}),x.A.destroy(),x.A.error("C\xf3 l\u1ed7i x\u1ea3y ra khi nh\u1eadn di\u1ec7n khu\xf4n m\u1eb7t. Vui l\xf2ng th\u1eed l\u1ea1i")})}},this.reload=()=>{T.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n h\u1ee7y t\xe1c v\u1ee5 hi\u1ec7n t\u1ea1i kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{let{keyCamera:e}=this.state;e++,this.setState({imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",loadingTruoc:!1,loadingSau:!1,loadingChanDung:!1,recognitionTruoc:!1,recognitionSau:!1,recognitionChanDung:!1,today:ue,dataCMT:{HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",GioVao:"",TenCoQuan:"",GioiTinh:void 0,ThanNhiet:"",LoaiGiayTo:"",LyDoGap:void 0,LyDoKhac:""},loading:!1,isCheckOut:!1,ThongTinVaoRaID:"",checkCheckOut:!1,isCheckIn:!1,showCamera:!0,visiblePopoverMaThe:!1,visiblePopoverHoTen:!1,visiblePopoverCMND:!1,dataPopover:null,loadingSearchMaThe:!1,loadingSearchHoTen:!1,loadingSearchCMND:!1,selectIndex:-1,videoInput:[],isScanFile:!1,keyCamera:e,loadingBaoCao:!1,listTemper:[],temperUsing:{},visibleBadge:!1,listCheckin:[],visibleModalHangDoi:!1,sessionCode:""},()=>{this.getCamera(),this.props.getList(),this.handlePlayChanDung()})}})},this.changeValueCMT=(e,t)=>{const{dataCMT:a}=this.state;"HoVaTen"===e&&(t=t.toUpperCase()),a[e]=t,this.setState({dataCMT:a})},this.contentPopover=(e,t)=>{const{selectIndex:a}=this.state;let n="",i=400;if(1===t?n=document.getElementById("txtMaThe"):2===t?n=document.getElementById("txtCMND"):3===t&&(n=document.getElementById("txtHoTen")),i=n?n.clientWidth:i,e)return(0,Y.jsx)("div",{children:e.map((e,t)=>{const n=t%2!==0?t===a?"even-row":"odd-row":t===a?"even-row":"";return(0,Y.jsxs)("div",{className:"hover-content ".concat(n),style:{width:i,padding:0===t?"5px 12px":"10px 12px"},onClick:()=>this.loadDataCheckOut(e),children:[(0,Y.jsx)("b",{children:e.HoVaTen}),(0,Y.jsx)("br",{}),(0,Y.jsx)("i",{style:{paddingLeft:15},children:e.SoCMND}),(0,Y.jsx)("br",{}),""!==e.TenCoQuan?(0,Y.jsx)("i",{style:{paddingLeft:15},children:e.TenCoQuan}):""]})})})},this.loadDataCheckOut=e=>{clearInterval(this.videoCapture);const t=ie().cloneDeep(e);t.NgaySinh=t.NgaySinh?j()(t.NgaySinh):"",t.NgayCapCMND=t.NgayCapCMND?j()(t.NgayCapCMND):"",t.GapCanBo="".concat(e.GapCanBo,"_").concat(e.DonViCaNhan),this.setState({selectIndex:-1,visiblePopoverMaThe:!1,visiblePopoverCMND:!1,visiblePopoverHoTen:!1,isCheckOut:null===t.GioRa,dataCMT:t,checkCheckOut:null!==t.GioRa,imageCMTTruoc:t.AnhCMND_MTBase64?t.AnhCMND_MTBase64:"",imageCMTSau:t.AnhCMND_MSBase64?t.AnhCMND_MSBase64:"",imageChanDung:t.AnhChanDungBase64?t.AnhChanDungBase64:""})},this.getCamera=()=>{navigator.getUserMedia&&navigator.mediaDevices.enumerateDevices().then(e=>{const t=e.filter(e=>"videoinput"===e.kind);t.length&&this.setState({videoInput:t})}).catch(e=>{x.A.error(e.toString())})},this.blurMaThe=(e,t)=>{if(""===e)return;if(this.state.selectIndex>=0)return;const{isCheckOut:a,checkCheckOut:n}=this.state,i={MaThe:e,LoaiCheckOut:t};1===t?this.setState({loadingSearchMaThe:!0}):2===t?this.setState({loadingSearchCMND:!0}):3===t&&this.setState({loadingSearchHoTen:!0}),d.GetByMaThe(i).then(e=>{if(1===t?this.setState({loadingSearchMaThe:!1}):2===t?this.setState({loadingSearchCMND:!1}):3===t&&this.setState({loadingSearchHoTen:!1}),e.data.Status>0){const a=e.data.Data;a.length>0&&(this.setState({dataPopover:a}),1===t?this.setState({visiblePopoverMaThe:!0}):2===t?this.setState({visiblePopoverCMND:!0}):3===t&&this.setState({visiblePopoverHoTen:!0}))}}).catch(e=>{x.A.destroy(),x.A.error(e.toString())})},this.changeFilterBaoCao=(e,t)=>{const{filterBaoCao:a}=this.state;if("CanBoGapID"===t&&e){const t=e.split("_");a.CanBoGapID=t[0],a.DonViCaNhan=t[1]}else a[t]=e;this.setState({filterBaoCao:a})},this.TaoBaoCao=()=>{const e=Object.assign({},this.state.filterBaoCao);if(""===e.TuNgay||""===e.DenNgay||null===e.TuNgay||null===e.DenNgay)return x.A.destroy(),void x.A.warning("Ch\u01b0a nh\u1eadp k\u1ef3 b\xe1o c\xe1o");e.TuNgay=j()(e.TuNgay).format("YYYY-MM-DD"),e.DenNgay=j()(e.DenNgay).format("YYYY-MM-DD"),this.setState({loadingBaoCao:!0}),C.A.TaoBaoCao(e).then(e=>{if(this.setState({loadingBaoCao:!1}),e.data.Status>0){if(!e.data.Data)return x.A.destroy(),x.A.warning("K\u1ef3 b\xe1o c\xe1o hi\u1ec7n t\u1ea1i kh\xf4ng c\xf3 d\u1eef li\u1ec7u"),void this.setState({ListBaoCao:[],showBaoCao:!1});let{modalKey:t}=this.state;t++,this.setState({showBaoCao:!0,ListBaoCao:e.data.Data,modalKey:t})}else x.A.destroy(),x.A.error(e.data.Message)}).catch(e=>{this.setState({loadingBaoCao:!1}),x.A.destroy(),x.A.error(e.toString())})},this.closeBaoCao=()=>{this.setState({showBaoCao:!1})},this.clearImage=e=>{let{imageCMTTruoc:t,imageCMTSau:a,imageChanDung:n,isCheckOut:i}=this.state;1===e?t="":2===e?a="":3===e&&(n="",!i&&this.handlePlayChanDung()),this.setState({imageCMTTruoc:t,imageCMTSau:a,imageChanDung:n})},this.selectIndex=e=>{const{visiblePopoverMaThe:t,visiblePopoverCMND:a,visiblePopoverHoTen:n,dataPopover:i}=this.state;let{selectIndex:o}=this.state;const s=e.keyCode;(t||a||n)&&(40===s&&o<i.length-1?o++:38===s&&o>-1&&o--,27===s&&this.setState({visiblePopoverMaThe:!1,visiblePopoverCMND:!1,visiblePopoverHoTen:!1}),this.setState({selectIndex:o})),o>=0&&13===s&&this.loadDataCheckOut(i[o])},this.handleVisibleBadge=e=>{this.setState({visibleBadge:e})},this.getContentBadge=()=>{const{listTemper:e}=this.state,t=document.getElementById("txtTemper"),a=t?t.clientWidth+30:300;return(0,Y.jsx)("div",{className:"badge-container",children:e.map(e=>(0,Y.jsxs)("div",{className:"badge-item",style:{width:a},onClick:()=>this.selectTemper(e),children:["Th\u1eddi gian \u0111o:"," ",j()(e.time,"YYYYMMDDHHmmss").format("HH:mm:ss")," - K\u1ebft qu\u1ea3:"," ",e.temperature," \xb0C"]}))})},this.selectTemper=e=>{const{listTemper:t}=this.state,{thanNhiet:a}=this.props,n=t.findIndex(t=>t.time===e.time);n>=0&&(t.splice(n,1),this.setState({listTemper:t,visibleBadge:!1})),this.setState({temperUsing:e}),this.changeValueCMT("ThanNhiet",e.temperature),parseFloat(e.temperature)>parseFloat(a)&&T.A.warn({title:"C\u1ea3nh b\xe1o",content:"C\u1ea3nh b\xe1o th\xe2n nhi\u1ec7t cao !!!",okText:"\u0110\xf3ng"})},this.changeVisiblePopoverMaThe=e=>{e||this.setState({visiblePopoverMaThe:e,selectIndex:-1})},this.changeVisiblePopoverHoTen=e=>{e||this.setState({visiblePopoverHoTen:e,selectIndex:-1})},this.changeVisiblePopoverCMND=e=>{e||this.setState({visiblePopoverCMND:e,selectIndex:-1})},this.clearUsing=()=>{this.setState({temperUsing:{}}),this.changeValueCMT("ThanNhiet","")},this.openModalHangDoi=()=>{let{modalKey:e}=this.state;e++,this.setState({visibleModalHangDoi:!0,modalKey:e})},this.closeModalHangDoi=()=>{this.setState({visibleModalHangDoi:!1})},this.chonHangDoiCheckin=e=>{const{listCheckin:t,dataCMT:a}=this.state,i=t[e];t.splice(e,1),i.ThanNhiet=a.ThanNhiet?a.ThanNhiet:"",this.setState({dataCMT:(0,n.A)((0,n.A)({},a),i),imageCMTTruoc:i.imageCMTTruoc,listCheckin:t}),this.closeModalHangDoi()},this.xoaHangDoiCheckin=e=>{const{listCheckin:t}=this.state;t.splice(e,1),t.length||this.closeModalHangDoi(),this.setState({listCheckin:t})},this.handlePlayChanDung=()=>{clearInterval(this.videoCapture),this.videoCapture=setInterval(async()=>{const e=document.getElementById("camera-chan-dung");if(this.canvasRef.current&&e.readyState>=1){this.canvasRef.current.innerHTML=se.pL(e);const t={width:e.offsetWidth,height:e.offsetHeight};se.L0(this.canvasRef.current,t);const a=await se.R(e,new se.ex),n=se.Lz(a,t);if(this.canvasRef.current.getContext("2d").clearRect(0,0,e.width,e.height),se.$2.drawDetections(this.canvasRef.current,n),a.length){const e=this.webcamRefChanDung.current.getScreenshot({width:600,height:500});d.NhanDien({AnhChanDungBase64:e}).then(e=>{const t=e&&e.data;if(t.Status>0){if(3==t.Status)return;if(t.Data&&t.Data.CanBoID){clearInterval(this.videoCapture);const{Data:e}=t;this.loadDataFromNhanDien(e)}}else x.A.destroy(),x.A.error(t.Message)})}}},3e3)},this.loadDataFromNhanDien=e=>{const{dataCMT:t}=this.state,{thanNhiet:a}=this.props,i=(0,n.A)({},e);let o=!1;t.NgaySinh=i.NgaySinh?j()(i.NgaySinh):t.NgaySinh,t.NgayCapCMND=i.NgayCapCMND?j()(i.NgayCapCMND):t.NgayCapCMND,t.HoVaTen=i.HoVaTen?i.HoVaTen:t.HoVaTen,t.GioiTinh=i.GioiTinh?i.GioiTinh:t.GioiTinh,t.HoKhau=i.HoKhau?i.HoKhau:t.HoKhau,t.DienThoai=i.DienThoai?i.DienThoai:t.DienThoai,t.LoaiGiayTo=i.LoaiGiayTo?i.LoaiGiayTo:t.LoaiGiayTo,t.TenCoQuan=i.TenCoQuan?i.TenCoQuan:t.TenCoQuan,t.SoCMND=i.SoCMND?i.SoCMND:t.SoCMND,t.LaCanBo=i.LaCanBo,t.CanBoID=i.CanBoID,i.LaCanBo&&(t.LyDoGap=1),o=!!i.ThongTinVaoRaID,this.setState({isCheckOut:o,dataCMT:t,imageCMTTruoc:i.AnhCMND_MTBase64?i.AnhCMND_MTBase64:"",imageCMTSau:i.AnhCMND_MSBase64?i.AnhCMND_MSBase64:"",imageChanDung:i.AnhChanDungBase64?i.AnhChanDungBase64:""},()=>{i.ThongTinVaoRaID?(t.GapCanBo="".concat(i.GapCanBo,"_").concat(i.DonViCaNhan),t.LyDoGap=i.LyDoGap,t.GioVao=i.GioVao,t.ThongTinVaoRaID=i.ThongTinVaoRaID,i.LaCanBo&&this.setState({dataCMT:t},()=>{this.CheckOutv4()})):i.LaCanBo&&(t.ThanNhiet&&(parseFloat(t.ThanNhiet),parseFloat(a)),this.CheckInv4())})},document.title="Checkin",this.interval=null,this.webcamRefChanDung=i.createRef(),this.webcamRefTruoc=i.createRef(),this.webcamRefSau=i.createRef(),this.socket=null,this.socketIO=null,this.canvasRef=i.createRef(),this.videoCapture=null;let t=E.parse(this.props.location.search);t.PageNumber=t.PageNumber?t.PageNumber:1,t.PageSize=10,t.Keyword=t.Keyword?t.Keyword:"",t.Type=2,this.state={imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",loadingTruoc:!1,loadingSau:!1,loadingChanDung:!1,recognitionTruoc:!1,recognitionSau:!1,recognitionChanDung:!1,today:ue,dataCMT:{HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",GioVao:"",TenCoQuan:"",GioiTinh:void 0,ThanNhiet:"",LoaiGiayTo:"",LyDoGap:void 0,LyDoKhac:""},loading:!1,isCheckOut:!1,ThongTinVaoRaID:0,checkCheckOut:!1,isCheckIn:!1,showCamera:!0,visiblePopoverMaThe:!1,visiblePopoverHoTen:!1,visiblePopoverCMND:!1,dataPopover:null,loadingSearchMaThe:!1,loadingSearchHoTen:!1,loadingSearchCMND:!1,selectIndex:-1,videoInput:[],isScanFile:!1,keyCamera:0,filterData:t,TotalRow:0,ListCheckinLoaded:[],filterBaoCao:{TuNgay:j()(),DenNgay:j()(),LeTanID:void 0,CanBoGapID:void 0},ListBaoCao:[],showBaoCao:!1,modalKey:0,loadingBaoCao:!1,listTemper:[],temperUsing:{},visibleBadge:!1,listCheckin:[],visibleModalHangDoi:!1,sessionCode:"",loadingDataScan:!1,dataScan:{}}}componentWillUnmount(){clearInterval(this.interval),clearInterval(this.videoCapture),this.socket&&this.socket.close(),this.socketIO&&this.socketIO.stop();const{listTemper:e}=this.state;e.length&&this.props.getListTemperFromSite(e)}render(){const e=parseInt(localStorage.getItem("user_id")),t=te.M.getState().Auth.user;if(t&&1===t.NguoiDungID)return(0,Y.jsx)(ae.A,{to:"co-quan-don-vi"});const{role:a,roleBaoCao:i,DanhSachLeTan:o,TongHopNgay:s,DoiTuongGap:h}=this.props,{ListCheckinLoaded:c,ListBaoCao:r,filterBaoCao:l,showBaoCao:d,loadingBaoCao:g}=this.state,C=JSON.parse(localStorage.getItem("role")),p=C?C["checkin-out"]:null;p&&0!==!p.view||this.props.history.push("/dashboard");const{imageCMTTruoc:u,imageCMTSau:x,imageChanDung:T,loadingTruoc:f,loadingSau:k,loadingChanDung:L,dataCMT:I,isCheckOut:H,loading:G,checkCheckOut:O,isCheckIn:P,recognitionTruoc:_,recognitionSau:F,recognitionChanDung:U,visiblePopoverMaThe:E,dataPopover:q,visiblePopoverHoTen:$,visiblePopoverCMND:J,loadingSearchMaThe:X,loadingSearchCMND:ne,loadingSearchHoTen:ie,loadingDataScan:oe,videoInput:se,isScanFile:he,keyCamera:ce}=this.state,{listTemper:re,temperUsing:me,visibleBadge:xe,listCheckin:Te,visibleModalHangDoi:Ae,modalKey:De}=this.state,ve=j()(H?I.GioVao:ue).format("HH:mm"),ye=j()(H?I.GioVao:ue).format("DD/MM/YYYY"),Ne=O||H?j()(I.GioRa).format("HH:mm"):"",Me=O||H?j()(I.GioRa).format("DD/MM/YYYY"):"",Se={width:1200,height:1e3},be=se.find(e=>e.label.includes("USB CAM2")),fe=se.find(e=>e.label.includes("S520")),je=(0,Y.jsx)(w(),{audio:!1,id:"camera-chan-dung",ref:this.webcamRefChanDung,screenshotFormat:"image/jpeg",videoConstraints:(0,n.A)((0,n.A)({},Se),{},{deviceId:be&&be.deviceId?be.deviceId:""}),style:{zoom:.15},onUserMedia:this.handlePlayChanDung},be&&be.deviceId?be.deviceId:""),ke=(0,Y.jsx)(w(),{audio:!1,ref:this.webcamRefTruoc,screenshotFormat:"image/jpeg",videoConstraints:(0,n.A)((0,n.A)({},Se),{},{deviceId:fe&&fe.deviceId?fe.deviceId:""}),style:{zoom:.15}},fe&&fe.deviceId?fe.deviceId:""),we=H?(0,Y.jsx)(A.A,{type:"audit",style:{fontSize:50,color:"#ccc"}}):"";return(0,Y.jsxs)(B,{children:[(0,Y.jsxs)(D.A,{className:"col-container",children:[(0,Y.jsx)(v.A,{xl:14,lg:12,md:12,sm:24,xs:24,className:"col col-first",children:(0,Y.jsxs)("div",{className:"box-container",children:[(0,Y.jsx)("div",{className:"box box-camera",children:(0,Y.jsxs)(D.A,{gutter:24,children:[(0,Y.jsx)(v.A,{xl:4,lg:0}),(0,Y.jsx)(v.A,{xl:8,lg:24,children:(0,Y.jsxs)("div",{className:"camera-content",children:[(0,Y.jsxs)("div",{className:"content",children:[f?(0,Y.jsx)(A.A,{type:"loading"}):""!==u?(0,Y.jsxs)("div",{className:"box-image",children:[""===u||H?"":(0,Y.jsx)(A.A,{className:"close-ico",type:"close",onClick:()=>this.clearImage(1)}),(0,Y.jsx)("img",{src:u,alt:"avatar",style:{maxHeight:130},id:"imgTruoc"})]}):we,(0,Y.jsx)("div",{style:{display:""!==u||H?"none":"block"},children:ke})]}),(0,Y.jsx)("div",{className:"action",children:(0,Y.jsx)(m.$n,{icon:"camera",children:"\u1ea2nh gi\u1ea5y t\u1edd"})})]})}),(0,Y.jsx)(v.A,{xl:8,lg:24,children:(0,Y.jsxs)("div",{className:"camera-content",children:[(0,Y.jsxs)("div",{className:"content",children:[L?(0,Y.jsx)(A.A,{type:"loading"}):""!==T?(0,Y.jsxs)("div",{className:"box-image",children:[(0,Y.jsx)(A.A,{className:"close-ico",type:"close",onClick:()=>this.clearImage(3)}),(0,Y.jsx)("img",{src:T,alt:"avatar",style:{maxHeight:130}})]}):we,(0,Y.jsxs)("div",{className:"camera-canvas",style:{display:""!==T||H?"none":"flex"},children:[je,(0,Y.jsx)("canvas",{id:"detect-canvas",ref:this.canvasRef,style:{zoom:.15}})]})]}),(0,Y.jsx)("div",{className:"action",children:(0,Y.jsx)(m.$n,{icon:"camera",children:"\u1ea2nh ch\xe2n dung"})})]})}),(0,Y.jsx)(v.A,{xl:4,lg:0})]})}),(0,Y.jsxs)("div",{className:"box box-info",children:[(0,Y.jsx)("div",{className:"title",children:"TH\xd4NG TIN V\xc0O - RA"}),(0,Y.jsxs)(S.A,{children:[(0,Y.jsxs)(D.A,{children:[(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsxs)(de,(0,n.A)((0,n.A)({label:"Gi\u1edd v\xe0o"},Ce),{},{className:"datepicker",children:[(0,Y.jsx)(y.A,{placeholder:"",style:{width:"30%",maxWidth:100},value:P||H||O||""!==I.HoVaTen&&""!==I.SoCMND?ve:"",disabled:!0}),(0,Y.jsx)(y.A,{placeholder:"",style:{width:"calc(70% - 20px)",marginLeft:20,maxWidth:180},value:P||H||O||""!==I.HoVaTen&&""!==I.SoCMND?ye:"",disabled:!0,suffix:(0,Y.jsx)(A.A,{type:"calendar"})})]}))})),(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(D.A,{children:(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},ge),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"L\xfd do g\u1eb7p"},Ce),{},{children:(0,Y.jsxs)(m.l6,{placeholder:"Ch\u1ecdn l\xfd do g\u1eb7p",noGetPopupContainer:!0,value:I.LyDoGap,onChange:e=>this.changeValueCMT("LyDoGap",e),children:[(0,Y.jsx)(m.c$,{value:1,children:"H\u1ecdp"}),(0,Y.jsx)(m.c$,{value:2,children:"G\u1eb7p c\xe1n b\u1ed9"}),(0,Y.jsx)(m.c$,{value:3,children:"Kh\xe1c"})]})}))}))})}))]}),(0,Y.jsxs)(D.A,{children:[(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsxs)(de,(0,n.A)((0,n.A)({label:"Gi\u1edd ra"},Ce),{},{className:"datepicker",children:[(0,Y.jsx)(y.A,{placeholder:"",style:{width:"30%",maxWidth:100},value:H?j()(ue).format("HH:mm"):Ne,disabled:!0}),(0,Y.jsx)(y.A,{placeholder:"",style:{width:"calc(70% - 20px)",marginLeft:20,maxWidth:180},value:H?j()(ue).format("DD/MM/YYYY"):Me,disabled:!0,suffix:(0,Y.jsx)(A.A,{type:"calendar"})})]}))})),(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(D.A,{children:(0,Y.jsxs)(v.A,(0,n.A)((0,n.A)({},ge),{},{children:[2===I.LyDoGap?(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"\u0110\u1ed1i t\u01b0\u1ee3ng g\u1eb7p"},Ce),{},{children:(0,Y.jsx)(b.A,{noGetPopupContainer:!0,dropdownStyle:{maxHeight:300},value:I.GapCanBo,showSearch:!0,treeData:h,placeholder:"Ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea7n g\u1eb7p",allowClear:!0,treeDefaultExpandAll:!0,onChange:e=>this.changeCanBo(e)})})):"",3===I.LyDoGap?(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"N\u1ed9i dung"},Ce),{},{children:(0,Y.jsx)(y.A,{value:I.LyDoKhac,style:{width:"100%"},onChange:e=>this.changeValueCMT("LyDoKhac",e.target.value)})})):""]}))})}))]}),(0,Y.jsxs)(D.A,{children:[(0,Y.jsx)(v.A,(0,n.A)({},pe)),(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(D.A,{children:(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},ge),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"M\xe3 th\u1ebb"},Ce),{},{children:(0,Y.jsx)(V,{content:this.contentPopover(q,1),visible:E,trigger:"click",onVisibleChange:this.changeVisiblePopoverMaThe,placement:"bottomLeft",children:(0,Y.jsx)(y.A.Search,{style:{width:"100%"},onSearch:e=>this.blurMaThe(e,1),maxLength:20,value:I.MaThe,placeholder:"Nh\u1eadp m\xe3 th\u1ebb",onChange:e=>this.changeValueCMT("MaThe",e.target.value),id:"txtMaThe",loading:X,onKeyDown:this.selectIndex})})}))}))})}))]})]})]}),(0,Y.jsxs)("div",{className:"box box-info box-relative",children:[(0,Y.jsxs)("div",{className:"title flex",children:["TH\xd4NG TIN KH\xc1CH",Te.length?(0,Y.jsxs)("div",{style:{marginLeft:10},className:"sub-title queue-title",onClick:this.openModalHangDoi,children:["(C\xf3 ",Te.length," kh\xe1ch trong h\xe0ng \u0111\u1ee3i)"]}):""]}),_||F||U||oe?(0,Y.jsx)("div",{className:"div-loading",children:(0,Y.jsx)("div",{className:"spin",children:(0,Y.jsx)(N.A,{})})}):"",(0,Y.jsxs)(S.A,{children:[(0,Y.jsxs)(D.A,{children:[(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:(0,Y.jsxs)("span",{children:["H\u1ecd t\xean ",(0,Y.jsx)("span",{style:{color:"red"},children:"*"})]})},Ce),{},{children:(0,Y.jsx)(V,{content:this.contentPopover(q,3),visible:$,trigger:"click",onVisibleChange:this.changeVisiblePopoverHoTen,placement:"bottomLeft",children:(0,Y.jsx)(y.A.Search,{style:{width:"100%"},value:I.HoVaTen,onChange:e=>this.changeValueCMT("HoVaTen",e.target.value),onSearch:e=>this.blurMaThe(e,3),id:"txtHoTen",loading:ie,onKeyDown:this.selectIndex})})}))})),(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(D.A,{children:(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},ge),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"Gi\u1edbi t\xednh"},Ce),{},{children:(0,Y.jsxs)(m.l6,{value:I.GioiTinh,onChange:e=>this.changeValueCMT("GioiTinh",e),children:[(0,Y.jsx)(m.c$,{value:"Nam",children:"Nam"}),(0,Y.jsx)(m.c$,{value:"N\u1eef",children:"N\u1eef"})]})}))}))})}))]}),(0,Y.jsxs)(D.A,{children:[(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:(0,Y.jsxs)("span",{children:["S\u1ed1 gi\u1ea5y t\u1edd ",(0,Y.jsx)("span",{style:{color:"red"},children:"*"})]})},Ce),{},{children:(0,Y.jsx)(V,{content:this.contentPopover(q,2),visible:J,trigger:"click",onVisibleChange:this.changeVisiblePopoverCMND,placement:"bottomLeft",children:(0,Y.jsx)(y.A.Search,{style:{width:"100%"},value:I.SoCMND,onChange:e=>this.changeValueCMT("SoCMND",e.target.value),maxLength:12,onSearch:e=>this.blurMaThe(e,2),loading:ne,id:"txtCMND",onKeyDown:this.selectIndex})})}))})),(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(D.A,{children:(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},ge),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"},Ce),{},{children:(0,Y.jsx)(y.A,{style:{width:"100%"},value:I.DienThoai,onChange:e=>this.changeValueCMT("DienThoai",e.target.value),onKeyPress:this.inputNumber})}))}))})}))]}),(0,Y.jsxs)(D.A,{children:[(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"Lo\u1ea1i gi\u1ea5y t\u1edd"},Ce),{},{children:(0,Y.jsx)(y.A,{style:{width:"100%"},value:I.LoaiGiayTo,onChange:e=>this.changeValueCMT("LoaiGiayTo",e.target.value)})}))})),(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(D.A,{children:(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},ge),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"N\u01a1i c\xf4ng t\xe1c"},Ce),{},{children:(0,Y.jsx)(y.A,{style:{width:"100%"},value:I.TenCoQuan,onChange:e=>this.changeValueCMT("TenCoQuan",e.target.value)})}))}))})}))]}),(0,Y.jsx)(D.A,{children:(0,Y.jsx)(v.A,(0,n.A)((0,n.A)({},pe),{},{children:(0,Y.jsx)(de,(0,n.A)((0,n.A)({label:"\u0110\u1ecba ch\u1ec9"},Ce),{},{children:(0,Y.jsx)(y.A,{style:{width:"100%"},value:I.HoKhau,onChange:e=>this.changeValueCMT("HoKhau",e.target.value)})}))}))})]}),O?(0,Y.jsx)("div",{className:"notice-checkout",children:"Kh\xe1ch \u0111\xe3 checkout"}):""]})]})}),(0,Y.jsxs)(v.A,{xl:5,lg:6,md:6,sm:0,xs:0,className:"col-second",children:[(0,Y.jsx)("div",{className:"title center",children:"KH\xc1CH \u0110ANG CHECKIN"}),(0,Y.jsx)("div",{className:"boxSearch",children:(0,Y.jsx)(y.A.Search,{allowClear:!0,onSearch:e=>this.onSearch(e,"Keyword"),placeholder:"T\xecm th\xf4ng tin kh\xe1ch"})}),(0,Y.jsx)("div",{className:"card-container",children:c.map(e=>(0,Y.jsx)(K,{AnhCMT:e.AnhCMND_MTBase64,AnhChanDung:e.AnhChanDungBase64,TenCanBo:e.HoVaTen,onCheckOut:t=>this.callCheckOut(t,e.ThongTinVaoRaID),SoCMT:e.SoCMND,MaThe:e.MaThe,GioVao:e.GioVao,isPicked:this.state.dataCMT.ThongTinVaoRaID===e.ThongTinVaoRaID,onClick:()=>this.loadDataCheckOut(e)}))})]}),(0,Y.jsxs)(v.A,{xl:5,lg:6,md:6,sm:0,xs:0,className:"col-third",children:[(0,Y.jsx)("div",{className:"title center",children:"L\u01af\u1ee2T KH\xc1CH TRONG NG\xc0Y"}),(0,Y.jsxs)("div",{className:"box-container",children:[(0,Y.jsx)("div",{className:"box-info",style:{backgroundImage:"url(".concat(Q,")")},children:(0,Y.jsxs)("div",{className:"text-number",children:["T\u1ed5ng s\u1ed1 kh\xe1ch t\u1edbi: ",s.Tong]})}),(0,Y.jsx)("div",{className:"box-info",style:{backgroundImage:"url(".concat(W,")")},children:(0,Y.jsxs)("div",{className:"text-number",children:["Kh\xe1ch \u0111ang checkin: ",s.DangGap]})}),(0,Y.jsx)("div",{className:"box-info",style:{backgroundImage:"url(".concat(z,")")},children:(0,Y.jsxs)("div",{className:"text-number",children:["Kh\xe1ch \u0111\xe3 checkout: ",s.DaVe]})}),(0,Y.jsxs)("div",{className:"div-report",children:[(0,Y.jsx)("div",{className:"title center",children:"L\u1eccC B\xc1O C\xc1O"}),(0,Y.jsx)("div",{className:"main-report flex",children:(0,Y.jsx)("div",{className:"report-label",style:{width:"100%"},children:"Th\u1eddi gian"})}),(0,Y.jsxs)("div",{className:"main-report flex",children:[(0,Y.jsxs)("div",{className:"report-wrapper",style:{width:"70%"},children:["T\u1eeb"," ",(0,Y.jsx)(m.lr,{style:{width:120},value:l.TuNgay,onChange:e=>this.changeFilterBaoCao(e,"TuNgay")})]}),(0,Y.jsxs)("div",{className:"report-wrapper",style:{width:"70%"},children:["\u0110\u1ebfn"," ",(0,Y.jsx)(m.lr,{style:{width:120},value:l.DenNgay,onChange:e=>this.changeFilterBaoCao(e,"DenNgay")})]})]}),(0,Y.jsxs)("div",{className:"main-report",children:[(0,Y.jsx)("div",{className:"report-label",children:"\u0110\u01a1n v\u1ecb / C\xe1 nh\xe2n"}),(0,Y.jsx)("div",{className:"report-wrapper",children:(0,Y.jsx)(b.A,{style:{width:"100%"},dropdownStyle:{maxHeight:300},showSearch:!0,treeData:h,placeholder:"Ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea7n g\u1eb7p",allowClear:!0,treeDefaultExpandAll:!0,onChange:e=>this.changeFilterBaoCao(e,"CanBoGapID")})})]}),(0,Y.jsxs)("div",{className:"main-report",children:[(0,Y.jsx)("div",{className:"report-label",children:"L\u1ec5 t\xe2n"}),(0,Y.jsx)("div",{className:"report-wrapper",children:(0,Y.jsx)(m.l6,{style:{width:"100%"},showSearch:!0,allowClear:!0,placeholder:"Ch\u1ecdn l\u1ec5 t\xe2n ti\u1ebfp \u0111\xf3n",onChange:e=>this.changeFilterBaoCao(e,"LeTanID"),children:o.map(e=>(0,Y.jsx)(m.c$,{value:e.CanBoID,label:"".concat(e.TenCanBo," ").concat(e.TenCoQuan),children:(0,Y.jsxs)(M.A,{title:"".concat(e.TenCanBo," - ").concat(e.TenCoQuan),children:[e.TenCanBo," - ",(0,Y.jsx)("i",{children:e.TenCoQuan})]})}))})})]}),(0,Y.jsx)("div",{className:"action-report",children:(0,Y.jsx)(m.$n,{type:"primary",onClick:this.TaoBaoCao,loading:g,children:"Th\u1ed1ng k\xea"})}),(0,Y.jsx)(Z,{dataBaoCao:r,onCancel:this.closeBaoCao,visible:d,filterData:l},De),(0,Y.jsx)(ee,{listCheckin:Te,visible:Ae,onCancel:this.closeModalHangDoi,chooseLine:this.chonHangDoiCheckin,deleteLine:this.xoaHangDoiCheckin},De)]})]})]})]}),(0,Y.jsxs)("div",{className:"div-footer",children:[(0,Y.jsxs)("div",{className:"div-action",children:[(0,Y.jsx)(m.$n,{type:"primary",onClick:this.CheckIn,disabled:H||G||""===I.HoVaTen||""===I.SoCMND||0===a.add||1===e,children:"Checkin"}),(0,Y.jsx)(m.$n,{type:"primary",onClick:this.CheckOut,disabled:!H||G||0===a.add||1===e,children:"Checkout"}),(0,Y.jsx)(m.$n,{icon:"redo",onClick:this.reload,children:"T\u1ea3i l\u1ea1i"})]}),(0,Y.jsxs)("div",{className:"div-action",style:{color:"#096DD9",marginTop:10,fontWeight:"bold"},children:[(0,Y.jsx)("ins",{children:"L\u01b0u \xfd"}),": C\xf3 th\u1ec3 nh\u1eadp t\xean, s\u1ed1 CMND ho\u1eb7c M\xe3 th\u1ebb \u0111\u1ec3 th\u1ef1c hi\u1ec7n checkout"]})]}),(0,Y.jsxs)("div",{className:"footer-main",children:[(0,Y.jsx)("img",{src:R,alt:"",width:30,style:{marginRight:10}}),(0,Y.jsxs)("i",{children:["Copyright \xa9 2010-",le," ",(0,Y.jsx)("b",{children:"GO SOLUTIONS"}),". All rights"]})]})]})}}const xe=(0,o.Ng)(function(e){return(0,n.A)((0,n.A)({},e.CheckinOut),{},{app:e.App,thanNhiet:(0,oe.op)("thanNhiet",37.5)})},(0,n.A)((0,n.A)({},s.A),{},{changeCurrent:he,setListTemperWait:ce,getListTemperFromSite:re}))(me)},85341:e=>{e.exports=Object.freeze({COL_ITEM_LAYOUT_HALF:{md:{span:24},lg:{span:12}},ITEM_LAYOUT_HALF:{labelAlign:"left",labelCol:{lg:7,md:8,xs:6},wrapperCol:{lg:15,md:14,xs:16}}})},97318:()=>{}}]);
//# sourceMappingURL=202.fd0d6288.chunk.js.map