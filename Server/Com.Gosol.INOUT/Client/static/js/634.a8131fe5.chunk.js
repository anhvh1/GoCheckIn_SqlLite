"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[634],{27204:(n,t,a)=>{a.d(t,{A:()=>c});var e,i=a(89379),o=(a(65043),a(57528));const s=a(22121).Ay.div(e||(e=(0,o.A)(["\n  padding: 15px 20px 5px 20px;\n  display: flex;\n  flex-flow: row wrap;\n  overflow-y: hidden;\n  \n  @media only screen and (max-width: 767px) {\n    padding: 15px 20px;\n  }\n  \n  .action-btn {\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    \n    .anticon {\n      margin-right: 10px;\n      font-size: 26px;\n      \n      &:last-child {\n        margin-right: 0;\n      }\n    }\n    \n    .ant-switch {\n      border-radius: 10px;\n    }\n    \n    a {\n      color: inherit !important;\n      margin-right: 10px;\n    }\n  }\n"])));var h=a(71349),l=a(70579);const r=(new Date).getFullYear(),c=n=>(0,l.jsxs)(s,(0,i.A)((0,i.A)({className:null!=n.className?"".concat(n.className," isoLayoutContentWrapper"):"isoLayoutContentWrapper"},n),{},{children:[n.children,(0,l.jsxs)("div",{className:"footer-main",children:[(0,l.jsx)("img",{src:h,alt:"",width:30,style:{marginRight:10}}),(0,l.jsxs)("i",{children:["Copyright \xa9 2010-",r," ",(0,l.jsx)("b",{children:"GO SOLUTIONS"}),". All rights"]})]})]}))},30443:(n,t,a)=>{a.d(t,{A:()=>c});a(65043);var e,i=a(57528),o=a(22121),s=a(93317);const h=o.Ay.div(e||(e=(0,i.A)(["\n  text-align: right;\n  display: inline-block;\n  flex: 1;\n  padding: 0 3px 0 0;\n  margin-bottom: 15px;\n  \n  @media only screen and (max-width: 720px) {\n    text-align: left;\n    display: block;\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n  }\n  \n  button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n  }\n"]))),l=(0,s.A)(h);var r=a(70579);const c=n=>(0,r.jsx)(l,{children:n.children})},41617:(n,t,a)=>{a.d(t,{A:()=>c});a(65043);var e,i=a(57528),o=a(22121),s=a(93317);const h=o.Ay.div(e||(e=(0,i.A)(["\n  padding-bottom: 20px;\n  .ant-select-search, .ant-select, .ant-calendar-picker {\n    margin-right: 10px;\n    \n    &.ant-calendar-picker {\n      margin-left: 5px;\n    }\n    \n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"]))),l=(0,s.A)(h);var r=a(70579);const c=n=>(0,r.jsx)(l,{children:n.children})},44138:(n,t,a)=>{a.d(t,{A:()=>d});a(65043);var e,i=a(57528),o=a(22121),s=a(17159),h=a(93317);const l=o.Ay.h1(e||(e=(0,i.A)(["\n  font-size: 19px;\n  font-weight: 500;\n  color: ",";\n  margin-bottom: 15px;\n  display: inline-flex;\n  align-items: center;\n  white-space: nowrap;\n  text-transform: uppercase;\n\n  &:before {\n    content: '';\n    width: 5px;\n    height: 40px;\n    background-color: ",";\n    display: flex;\n    margin: 0 15px 0 0;\n  }\n"])),(0,s.palette)("secondary",2),(0,s.palette)("secondary",3)),r=(0,h.A)(l);a.p;var c=a(70579);const d=n=>(0,c.jsx)(r,{className:"isoComponentTitle",children:n.children})},73162:(n,t,a)=>{a.r(t),a.d(t,{default:()=>sn});var e,i=a(89379),o=a(65043),s=a(1262),h=a(26367),l=a(18161),r=a.n(l),c=a(93940),d=a(33496),u=a(94635),p=a(76649),g=a(84493),m=a(27204),C=a(44138),D=a(83305),x=a(41617),A=a(92089),T=a(30443),f=a(2252),S=a(53541),y=a(47419),j=a(11645),b=a(19292),v=a(12758),Q=a(57528);const I=a(22121).Ay.div(e||(e=(0,Q.A)(["\n  &.modal {\n    input {\n      &::placeholder {\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n    \n    .ant-select-selection__placeholder {\n      color: rgba(0, 0, 0, 0.5);\n    }  \n    \n    .frame-picture {\n      width: 150px;\n      height: 150px;\n      border: dotted 5px #ccc;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      color: #ccc;\n      \n      .anticon {\n        font-size: 30px;\n        margin-bottom: 15px;\n      }\n      \n      &:hover {\n        cursor: pointer;\n        border-color: #71a4eb;\n        color: #71a4eb\n      }\n    }\n    \n    .img-nhan-dien {\n      width: 150px;\n      height: 150px;\n      max-width: 150px;\n      max-height: 150px;\n    }\n  }\n  \n  &.index {\n    width: 100%;\n    \n    .action-btn {\n      color: #096dd9;\n    }\n    \n    .qr-container {\n      display: flex;\n      justify-content: space-around;\n      \n      .qr-img {\n        width: 80px;\n        height: 80px;\n      }\n      \n      .qr-action {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        \n        .qr-download {\n          color: #096dd9;\n        }\n        \n        .qr-printer {\n          color: #ea3146;\n        }\n        \n        .anticon {\n          font-size: 26px;\n        }\n      }\n    }\n    \n    .tk-container {\n      display: flex;\n      justify-content: space-between;\n      \n      .tk-action {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        \n        .anticon {\n          font-size: 26px;\n          color: #096dd9;\n          margin-bottom: 15px;\n          \n          &:last-child {\n            margin-bottom: 0;\n          }\n        }\n      }\n    }\n    \n    .row-content {\n      width: calc(100vw - 135px);\n      \n      .col-qr {\n        padding: 10px;\n      \n        .qr-container {\n          width: 100%;\n          display: block;\n          text-align: center;\n        \n          .img-qr {\n            width: 200px;\n            height: 200px;\n          }\n          \n          .action-qr {\n            margin-top: 10px;\n            display: flex;\n            justify-content: space-around;\n            align-items: center;\n          }\n        }\n      }\n      \n      .col-table {\n        margin-bottom: 10px;\n      }\n    }\n  }\n  \n  &.modal-camera {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"])));var N=a(70579);const{REQUIRED:B}=r(),{Item:w}=S.A,M=S.A.create({name:"modal_add_edit_taikhoan"})(class extends o.Component{constructor(n){var t;super(n),t=this,this.onOk=n=>{n.preventDefault(),this.props.form.validateFields((n,t)=>{if(!n){const{onCreate:n}=this.props;t.TenCanBo=(0,b.Fj)(t.TenCanBo),n(t)}})},this.onCancel=()=>{const{onCancel:n}=this.props;n()},this.inputNum=n=>{const t=n.charCode;(t<48||t>57)&&n.preventDefault()},this.onChangeTinh=function(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n?v.A.DanhSachDiaGioi({ID:n,Cap:r().HUYEN}).then(n=>{n.data.Status>0?(t.setState({DanhSachHuyen:n.data.Data},()=>{a&&t.props.form.setFieldsValue({HuyenID:void 0,XaID:void 0})}),a&&t.setState({DanhSachXa:[]})):(d.A.destroy(),d.A.error(n.data.Message))}).catch(n=>{d.A.destroy(),d.A.error(n.toString())}):t.setState({DanhSachHuyen:[],DanhSachXa:[]},()=>{a&&t.props.form.setFieldsValue({HuyenID:void 0,XaID:void 0})})},this.onChangeHuyen=function(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n?v.A.DanhSachDiaGioi({ID:n,Cap:r().XA}).then(n=>{n.data.Status>0?t.setState({DanhSachXa:n.data.Data},()=>{a&&t.props.form.setFieldsValue({XaID:void 0})}):(d.A.destroy(),d.A.error(n.data.Message))}).catch(n=>{d.A.destroy(),d.A.error(n.toString())}):t.setState({DanhSachXa:[]},()=>{a&&t.props.form.setFieldsValue({XaID:void 0})})},this.state={DanhSachHuyen:[],DanhSachXa:[]}}componentDidMount(){const{dataEdit:n}=this.props;n.CoQuanID&&(this.props.form.setFieldsValue((0,i.A)({},n)),this.onChangeTinh(n.TinhID,!1),this.onChangeHuyen(n.HuyenID,!1))}render(){const{visible:n,onCancel:t,form:a,dataEdit:e,loading:o,DanhSachTinh:s}=this.props,{DanhSachHuyen:h,DanhSachXa:l}=this.state,{getFieldDecorator:r}=a,c={labelCol:24,wrapperCol:24};return(0,N.jsx)(f.aF,{top:30,title:"".concat(e.CoQuanID?"S\u1eeda":"Th\xeam"," th\xf4ng tin \u0111\u01a1n v\u1ecb"),width:650,onCancel:this.onCancel,visible:n,footer:[(0,N.jsx)(f.$n,{onClick:t,children:"H\u1ee7y"},"back"),(0,N.jsx)(f.$n,{htmlType:"submit",type:"primary",form:"formsp",onClick:this.onOk,loading:o,children:"L\u01b0u"},"submit")],children:(0,N.jsx)(I,{className:"modal",children:(0,N.jsxs)(S.A,{id:"formsp",children:[r("CoQuanID",{initialValue:null}),r("CanBoID",{initialValue:null}),r("NguoiDungID",{initialValue:null}),r("TrangThai",{initialValue:!0}),(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"T\xean \u0111\u01a1n v\u1ecb",children:r("TenCoQuan",{rules:[(0,i.A)({},B)],initialValue:""})((0,N.jsx)(f.pd,{className:"required",autoFocus:!0}))})),(0,N.jsxs)(y.A,{children:[(0,N.jsx)(j.A,{span:8,style:{paddingRight:10},children:(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"T\u1ec9nh/Th\xe0nh ph\u1ed1",children:r("TinhID",{rules:[(0,i.A)({},B)],initialValue:void 0})((0,N.jsx)(f.l6,{onChange:this.onChangeTinh,showSearch:!0,children:s.map(n=>(0,N.jsx)(f.c$,{value:n.ID,children:n.Ten}))}))}))}),(0,N.jsx)(j.A,{span:8,children:(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"Qu\u1eadn/Huy\u1ec7n",children:r("HuyenID",{rules:[(0,i.A)({},B)],initialValue:void 0})((0,N.jsx)(f.l6,{onChange:this.onChangeHuyen,showSearch:!0,children:h.map(n=>(0,N.jsx)(f.c$,{value:n.ID,children:n.Ten}))}))}))}),(0,N.jsx)(j.A,{span:8,style:{paddingLeft:10},children:(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"X\xe3/Ph\u01b0\u1eddng",children:r("XaID",{rules:[(0,i.A)({},B)],initialValue:void 0})((0,N.jsx)(f.l6,{showSearch:!0,children:l.map(n=>(0,N.jsx)(f.c$,{value:n.ID,children:n.Ten}))}))}))})]}),(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"\u0110\u1ecba ch\u1ec9 \u0111\u01a1n v\u1ecb",children:r("DiaChi",{initialValue:""})((0,N.jsx)(f.pd,{}))})),(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"H\u1ecd v\xe0 t\xean qu\u1ea3n tr\u1ecb",children:r("TenCanBo",{rules:[(0,i.A)({},B)],initialValue:""})((0,N.jsx)(f.pd,{style:{textTransform:"capitalize"}}))})),(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"Email li\xean h\u1ec7",children:r("Email",{rules:[(0,i.A)({},B),{type:"email",message:"Email kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng"}],initialValue:""})((0,N.jsx)(f.pd,{}))})),e.CoQuanID?(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"T\xean ng\u01b0\u1eddi d\xf9ng",children:r("TenNguoiDung",{rules:[(0,i.A)({},B)],initialValue:""})((0,N.jsx)(f.pd,{}))})):"",(0,N.jsx)(w,(0,i.A)((0,i.A)({},c),{},{label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",children:r("DienThoai",{rules:[(0,i.A)({},B)],initialValue:""})((0,N.jsx)(f.pd,{maxLength:11,onKeyPress:this.inputNum}))}))]})})})}});var k=a(9370),V=a(45543),P=a(84236);const E={suacanbo:P.Ay.apiInOutv2+"HeThongCanBo/CapNhatThongTinCanBo",suacanbov4:P.Ay.apiInOutv2+"HeThongCanBo/CapNhatThongTinCanBo_v4",chitiettaikhoan:P.Ay.apiInOut+"HeThongCanBo/getbyid",resetmatkhau:P.Ay.apiInOut+"HeThongNguoiDung/ResetPassword",diagioi:P.Ay.apiInOut+"danhmucdiagioihanhchinh/getallbycap",coquansudungpm:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/DanhSachDonViSuDungPhanMem",xoacoquan:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/XoaPhongBan",capnhattrangthai:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/CapNhatTrangThaiSuDungPhanMem",suacoquan:P.Ay.apiInOut+"DanhMucCoQuanDonVi/Update",themdonvi:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/KhoiTaoDonViSuDungPhanMem",chitietdonvi:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/ChiTietDonViSuDungPhanMem",suadonvi:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/CapNhatThongTinDonViSuDungPhanMem",danhsachcanbodonvi:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/DanhSachCanBoThuocDonViSuDungPhanMen",themcanbo:P.Ay.apiInOutv4+"DanhMucCoQuanDonVi/ThemCanBoVaoDonViSuDungPhanMen",xoacanbo:P.Ay.apiInOut+"HeThongCanBo/delete",chitietcanbo:P.Ay.apiInOut+"HeThongCanBo/GetByID",suatencoquan:P.Ay.apiInOutv2+"DanhMucCoQuanDonVi/SuaPhongBan"},R={ChiTietTaiKhoan:n=>(0,V.vk)(E.chitiettaikhoan,(0,i.A)({},n)),SuaCanBo:n=>(0,V.zO)(E.suacanbo,(0,i.A)({},n)),ResetMatKhau:n=>(0,V.vk)(E.resetmatkhau,(0,i.A)({},n)),DanhSachDiaGioi:n=>(0,V.vk)(E.diagioi,(0,i.A)({},n)),DanhSachCoQuanSuDungPM:n=>(0,V.vk)(E.coquansudungpm,(0,i.A)((0,i.A)({},n),{},{PageNumber:n.PageNumber?n.PageNumber:1,PageSize:n.PageSize?n.PageSize:(0,b.WT)()})),XoaCoQuan:n=>(0,V.zO)(E.xoacoquan,(0,i.A)((0,i.A)({},n),{},{TenCoQuan:"empty"})),CapNhatTrangThai:n=>(0,V.zO)(E.capnhattrangthai,(0,i.A)({},n)),SuaCoQuan:n=>(0,V.zO)(E.suacoquan,(0,i.A)({},n)),ThemDonVi:n=>(0,V.zO)(E.themdonvi,(0,i.A)({},n)),SuaDonVi:n=>(0,V.zO)(E.suadonvi,(0,i.A)({},n)),ChiTietCoQuanSuDungPM:n=>(0,V.vk)(E.chitietdonvi,(0,i.A)({},n)),DanhSachCanBoDonVi:n=>(0,V.vk)(E.danhsachcanbodonvi,(0,i.A)((0,i.A)({},n),{},{PageNumber:n.PageNumber?n.PageNumber:1,PageSize:n.PageSize?n.PageSize:(0,b.WT)()})),XoaTaiKhoan:n=>(0,V.zO)(E.xoacanbo,(0,i.A)({},n)),ThemCanBo:n=>(0,V.zO)(E.themcanbo,(0,i.A)({},n)),ChiTietCanBo:n=>(0,V.vk)(E.chitietcanbo,(0,i.A)({},n)),SuaTenCoQuan:n=>(0,V.zO)(E.suatencoquan,(0,i.A)({},n))};var O=a(827);class L extends o.Component{constructor(n){super(n),this.onSearch=(n,t)=>{let a=this.state.filterData,e={value:n,property:t},i=(0,b.D5)(a,e,null);this.setState({filterData:i},()=>{(0,b._Y)(this.state.filterData),this.props.getListSP(this.state.filterData)})},this.onTableChange=(n,t,a)=>{let e=this.state.filterData,i={pagination:n,filters:t,sorter:a},o=(0,b.D5)(e,null,i);this.setState({filterData:o},()=>{(0,b._Y)(this.state.filterData),this.props.getListSP(this.state.filterData)})},this.resetPassword=n=>{const{defaultPassword:t}=this.props;c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{R.ResetMatKhau({NguoiDungID:n}).then(n=>{n.data.Status>0?c.A.success({title:"Th\xf4ng b\xe1o",content:"M\u1eadt kh\u1ea9u \u0111\xe3 \u0111\u01b0\u1ee3c chuy\u1ec3n v\u1ec1 m\u1eb7c \u0111\u1ecbnh l\xe0: ".concat(t),okText:"\u0110\xf3ng"}):(0,b.M)(n.data.Message)}).catch(n=>{(0,b.M)(n.toString())})}})},this.ThemDonVi=()=>{let{modalKey:n}=this.state;n++,this.setState({dataEditDonVi:{},action:"add",visibleModalDonVi:!0,modalKey:n})},this.closeModalDonVi=()=>{this.setState({visibleModalDonVi:!1})},this.submitModalDonVi=n=>{const{action:t}=this.state;"add"===t?(delete n.CoQuanID,delete n.CanBoID,delete n.NguoiDungID,delete n.TrangThai,this.setState({loading:!0}),R.ThemDonVi(n).then(n=>{this.setState({loading:!1}),n.data.Status>0?(d.A.success("Th\xeam \u0111\u01a1n v\u1ecb s\u1eed d\u1ee5ng th\xe0nh c\xf4ng"),this.closeModalDonVi(),this.props.getListSP(this.state.filterData)):(0,b.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())})):"edit"===t&&(this.setState({loading:!0}),R.SuaDonVi(n).then(n=>{this.setState({loading:!1}),n.data.Status>0?(d.A.success("C\u1eadp nh\u1eadt th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.closeModalDonVi(),this.props.getListSP(this.state.filterData)):(0,b.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())}))},this.XoaDonVi=n=>{c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{R.XoaCoQuan({CoQuanID:n}).then(n=>{n.data.Status>0?(d.A.success("X\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.props.getListSP(this.state.filterData)):(0,b.M)(n.data.Message)}).catch(n=>{(0,b.M)(n.toString())})}})},this.printQR=n=>{this.setState({CoQuanQRPrint:n},()=>{setTimeout(()=>{(0,b.Tu)(this.printRef.current.innerHTML)},500)})},this.downloadQR=n=>{const t=document.createElement("a");t.href=n.QRCode,t.target="_blank",t.download="QRCheckin-".concat(n.TenCoQuan,".png"),t.click()},this.changeTrangThaiSuDung=(n,t)=>{const a={CoQuanID:n.CoQuanID,TrangThai:t,TenCoQuan:"a"};R.CapNhatTrangThai(a).then(n=>{n.data.Status>0?(d.A.destroy(),d.A.success("C\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i s\u1eed d\u1ee5ng th\xe0nh c\xf4ng"),this.props.getListSP(this.state.filterData)):(0,b.M)(n.data.Message)}).catch(n=>{(0,b.M)(n.toString())})},this.EditCoQuan=n=>{R.ChiTietCoQuanSuDungPM({CoQuanID:n.CoQuanID}).then(n=>{if(n.data.Status>0){let{modalKey:t}=this.state;t++,this.setState({dataEditDonVi:n.data.Data,modalKey:t,action:"edit",visibleModalDonVi:!0})}else(0,b.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())})},this.renderTenCoQuan=n=>{const t="".concat(n.DiaChi?n.DiaChi+", ":"").concat(n.TenXa,", ").concat(n.TenHuyen,", ").concat(n.TenTinh);return(0,N.jsxs)("div",{children:[n.TenCoQuan,(0,N.jsx)("div",{style:{fontSize:12},children:t})]})},this.renderQRCode=n=>(0,N.jsxs)("div",{className:"qr-container",children:[(0,N.jsx)("img",{className:"qr-img",src:n.QRCode}),(0,N.jsxs)("div",{className:"qr-action",children:[(0,N.jsx)(u.A,{type:"download",className:"qr-download",onClick:()=>this.downloadQR(n)}),(0,N.jsx)(u.A,{type:"printer",className:"qr-printer",onClick:()=>this.printQR(n)})]})]}),this.renderTaiKhoan=n=>(0,N.jsxs)("div",{className:"tk-container",children:[(0,N.jsxs)("div",{children:[n.TenCanBo,(0,N.jsx)("br",{}),n.TenNguoiDung]}),(0,N.jsx)("div",{className:"tk-action",children:(0,N.jsx)(p.A,{title:"Reset m\u1eadt kh\u1ea9u",children:(0,N.jsx)(u.A,{type:"reload",onClick:()=>this.resetPassword(n.NguoiDungID)})})})]}),this.renderThaoTac=n=>(0,N.jsxs)("div",{className:"action-btn",children:[(0,N.jsx)(u.A,{type:"form",onClick:()=>this.EditCoQuan(n)}),(0,N.jsx)(u.A,{type:"delete",onClick:()=>this.XoaDonVi(n.CoQuanID)}),(0,N.jsx)(g.A,{checked:n.TrangThai,onChange:t=>this.changeTrangThaiSuDung(n,t)})]});const t=k.parse(this.props.location.search);this.state={modalKey:0,visibleModalDonVi:!1,dataEditDonVi:{},action:"",loading:!1,filterData:t,CoQuanQRPrint:{}},this.printRef=o.createRef()}componentDidMount(){this.props.getInitDataSP(this.state.filterData)}render(){const{modalKey:n,visibleModalDonVi:t,dataEditDonVi:a,loading:e,filterData:i,action:o,CoQuanQRPrint:s}=this.state,{DanhSachQuanTri:h,DanhSachTinh:l,TotalRow:r,TableLoading:c,role:d}=this.props,u=i.PageNumber?parseInt(i.PageNumber):1,p=i.PageSize?parseInt(i.PageSize):(0,b.WT)(),g=[{title:"STT",align:"center",width:"5%",render:(n,t,a)=>(0,N.jsx)("span",{children:(u-1)*p+(a+1)})},{title:"T\xean c\u01a1 quan \u0111\u01a1n v\u1ecb",width:"35%",render:(n,t)=>this.renderTenCoQuan(t)},{title:"QR Code",width:"20%",render:(n,t)=>this.renderQRCode(t)},{title:"T\xe0i kho\u1ea3n \u0111\u01a1n v\u1ecb",width:"25%",render:(n,t)=>this.renderTaiKhoan(t)},{title:"Thao t\xe1c",width:"15%",align:"center",render:(n,t)=>this.renderThaoTac(t)}];return(0,N.jsxs)(m.A,{children:[(0,N.jsx)(C.A,{children:"Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng"}),(0,N.jsx)(T.A,{children:d.add?(0,N.jsx)(f.$n,{type:"primary",onClick:this.ThemDonVi,children:"Th\xeam m\u1edbi"}):""}),(0,N.jsxs)(I,{className:"index",children:[(0,N.jsxs)(D.A,{children:[(0,N.jsx)(x.A,{children:(0,N.jsx)(f.NJ,{placeholder:"T\xecm ki\u1ebfm \u0111\u01a1n v\u1ecb",style:{width:300},allowClear:!0,onSearch:n=>this.onSearch(n,"Keyword"),defaultValue:i.Keyword})}),(0,N.jsx)(A.Ay,{columns:g,rowKey:"CoQuanID",dataSource:h,pagination:{showSizeChanger:!0,showTotal:(n,t)=>"T\u1eeb ".concat(t[0]," \u0111\u1ebfn ").concat(t[1]," tr\xean ").concat(n),total:r,current:u,pageSize:p},loading:c,onChange:this.onTableChange})]}),(0,N.jsx)(M,{visible:t,dataEdit:a,DanhSachTinh:l,onCreate:this.submitModalDonVi,onCancel:this.closeModalDonVi,loading:e},n),(0,N.jsx)("div",{ref:this.printRef,style:{display:"none"},children:(0,N.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,N.jsx)("img",{style:{marginTop:20,width:400,height:400},src:s.QRCode}),(0,N.jsx)("div",{style:{marginTop:20,fontWeight:"bold",fontSize:30},children:s.TenCoQuan})]})})]})]})}}const F=(0,s.Ng)(function(n){return(0,i.A)((0,i.A)({},n.QuanTriHeThong),{},{role:(0,b.vh)(n.Auth.role,"quan-tri-he-thong"),defaultPassword:(0,b.op)("defaultPassword",10)})},h.A)(L);var K=a(71482),z=a(37261),H=a(3259),q=a(48750),X=a(17029),$=a.n(X);const _=class extends o.Component{constructor(n){super(n),this.handlePlayChanDung=()=>{this.setState({disableChup:!1})},this.ChupAnh=()=>{const{CanBoID:n}=this.props;let t=this.cameraRef.current.getScreenshot({width:600,height:400});fetch(t).then(n=>n.blob()).then(a=>{const e=new File([a],"anh_chan_dung_".concat(n,".jpeg"));this.props.onOk(e,t)})},this.state={cameraChanDung:null,disableChup:!0},this.cameraRef=o.createRef()}componentDidMount(){navigator.getUserMedia&&navigator.mediaDevices.enumerateDevices().then(n=>{const t=n.filter(n=>"videoinput"===n.kind);if(t.length){const n=t.find(n=>n.label.includes("USB CAM2"));this.setState({cameraChanDung:n})}}).catch(n=>{d.A.error(n.toString())})}render(){const{onCancel:n,visible:t}=this.props,{cameraChanDung:a,disableChup:e}=this.state;return(0,N.jsx)(f.aF,{title:"Ch\u1ee5p \u1ea3nh nh\u1eadn di\u1ec7n",width:700,onCancel:n,visible:t,footer:(0,N.jsxs)("div",{style:{textAlign:"center"},children:[(0,N.jsx)(f.$n,{type:"primary",disabled:e,onClick:this.ChupAnh,children:"Ch\u1ee5p \u1ea3nh"}),(0,N.jsx)(f.$n,{onClick:n,children:"\u0110\xf3ng"})]}),children:(0,N.jsx)(I,{className:"modal-camera",children:(0,N.jsx)($(),{audio:!1,ref:this.cameraRef,screenshotFormat:"image/jpeg",onUserMedia:this.handlePlayChanDung,videoConstraints:(0,i.A)((0,i.A)({},{width:600,height:400}),{},{deviceId:a&&a.deviceId?a.deviceId:""})},a&&a.deviceId?a.deviceId:"")})})}},{REQUIRED:U}=r(),{Item:G}=H.A,{Group:W}=K.Ay,Y=class extends o.Component{constructor(n){var t;super(n),t=this,this.onOk=async n=>{n.preventDefault();const t=this.formRef.current,a=await t.validateFields();if(!a.CoQuanID&&!a.TenCoQuan)return d.A.destroy(),void d.A.warn("Ch\u01b0a ch\u1ecdn c\u01a1 quan");if(!a.DanhSachCanBo||!a.DanhSachCanBo.length)return d.A.destroy(),void d.A.warn("Danh s\xe1ch c\xe1n b\u1ed9 r\u1ed7ng");a.DanhSachCanBo.forEach(n=>{n.TenCanBo=(0,b.Fj)(n.TenCanBo),n.DanhSachNhomNguoiDung=n.ListNhomNguoiDungID.map(n=>({NhomNguoiDungID:n})),delete n.ListNhomNguoiDungID});if(this.checkDuplicateEmail(a.DanhSachCanBo))return;const{AnhNhanDien:e}=this.state;this.props.onCreate(a,e)},this.checkDuplicateEmail=n=>{const t=n.map(n=>n.Email);return!!t.filter((n,a)=>t.indexOf(n)!==a).length&&((0,b.M)("Email nh\u1eadp m\u1edbi b\u1ecb tr\xf9ng, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"),!0)},this.setInitialCoQuan=()=>{const{DanhSachCoQuan:n}=this.props;if(n.length){const t=n[0].CoQuanID,a=this.formRef.current;a&&a.setFieldsValue({CoQuanID:t}),this.changeCoQuan(t,!0)}},this.setInitialTenCoQuan=()=>{const n=this.formRef.current;n&&n.setFieldsValue({TenCoQuan:""}),this.changeCoQuan(null,!0);const{DanhSachCoQuan:t}=this.props;if(t.length){const n=t[0].CoQuanID;O.A.DanhSachNhomByCoQuanID({CoQuanID:n}).then(n=>{if(n.data.Status>0){const t=n.data.Data;t.forEach(n=>{n.NhomNguoiDungID=n.NhomTongID});const a=t.find(n=>"Truy v\u1ebft Y t\u1ebf tr\xean to\xe0n t\u1ec9nh"===n.TenNhom);if(a){const n=t.indexOf(a);t.splice(n,1)}this.setState({DanhSachNhomNguoiDung:t})}})}},this.onCancel=()=>{const{onCancel:n}=this.props;n()},this.changeCoQuan=function(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const e=t.formRef.current;if(e){const{DanhSachCanBo:n}=t.state;let i=e.getFieldValue("DanhSachCanBo");i=i&&Object.values(i),a&&n.forEach((n,t)=>{e.setFieldsValue({DanhSachCanBo:{[t]:{ListNhomNguoiDungID:[],TenCanBo:i[t].TenCanBo,Email:i[t].Email}}})})}n?O.A.DanhSachNhomByCoQuanID({CoQuanID:n}).then(n=>{if(n.data.Status>0){const a=n.data.Data,e=a.find(n=>"Truy v\u1ebft Y t\u1ebf tr\xean to\xe0n t\u1ec9nh"===n.TenNhom);if(e){const n=a.indexOf(e);a.splice(n,1)}t.setState({DanhSachNhomNguoiDung:a})}}):t.setState({DanhSachNhomNguoiDung:[]})},this.ThemCanBo=()=>{const{DanhSachCanBo:n}=this.state;n.unshift({});let t={};const a=this.formRef.current;if(a){const{getFieldValue:n}=a;t=n("DanhSachCanBo")}this.setState({DanhSachCanBo:n},()=>{if(t=Object.values(t),t.unshift({TenCanBo:"",Email:"",ListNhomNguoiDungID:[]}),a){const{setFieldsValue:n}=a;n({DanhSachCanBo:t})}})},this.XoaCanBo=n=>{const{DanhSachCanBo:t}=this.state,a=this.formRef.current,{setFieldsValue:e,getFieldValue:i}=a;let o=i("DanhSachCanBo");o=Object.values(o),o.splice(n,1),e({DanhSachCanBo:o}),t.splice(n,1),this.setState({DanhSachCanBo:t})},this.changeLoaiThemCoQuan=n=>{const t=n.target.value;1===t&&this.setInitialCoQuan(),2===t&&this.setInitialTenCoQuan(),this.setState({LoaiThemCoQuan:t})},this.beforeUpload=(n,t)=>{const{fileLimit:a}=this.props,e=n.size/1024/1024<a,i=n.type.includes("image");return e?i?(0,b.In)(n,t):d.A.error("Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ea3i l\xean file \u1ea3nh"):d.A.error("File \u0111\xednh k\xe8m ph\u1ea3i nh\u1ecf h\u01a1n ".concat(a,"MB")),!1},this.renderAnhNhanDien=(n,t)=>{const a={FileUrl:t,FileData:n};this.setState({AnhNhanDien:a})},this.checkFileImage=n=>{const{fileLimit:t}=this.props,a=n.size/1024/1024<t,e=n.type.includes("image");return e||d.A.error("Sai \u0111\u1ecbnh d\u1ea1ng \u1ea3nh (JPG ho\u1eb7c PNG)"),a||d.A.error("File \u1ea3nh ph\u1ea3i nh\u1ecf h\u01a1n ".concat(t,"MB")),e&&a},this.openCamera=()=>{let{modalKey:n}=this.state;n++,this.setState({visibleModalCamera:!0,modalKey:n})},this.closeModalCamera=()=>{this.setState({visibleModalCamera:!1})},this.submitModalCamera=(n,t)=>{this.renderAnhNhanDien(n,t),this.closeModalCamera()},this.state={DanhSachNhomNguoiDung:[],DanhSachCanBo:[],LoaiThemCoQuan:1,AnhNhanDien:null,visibleModalCamera:!1,modalKey:0},this.formRef=o.createRef()}componentDidMount(){const{dataEdit:n}=this.props;n.CanBoID?setTimeout(()=>{const t=this.formRef.current,{DanhSachCanBo:a}=this.state;a.push({}),this.setState({DanhSachCanBo:a},()=>{const a=n.CoQuanID.toString(),e=n.CanBoID,i=[{TenCanBo:n.TenCanBo,Email:n.Email,ListNhomNguoiDungID:n.ListNhomNguoiDungID}];if(this.changeCoQuan(a,!1),t&&t.setFieldsValue({CoQuanID:a,CanBoID:e,DanhSachCanBo:i}),n.AnhHoSo){const t={FileUrl:n.AnhHoSo};this.setState({AnhNhanDien:t})}})},200):(this.ThemCanBo(),setTimeout(()=>{this.setInitialCoQuan()},200))}render(){const{visible:n,onCancel:t,dataEdit:a,loading:e,DanhSachCoQuan:o}=this.props,{DanhSachNhomNguoiDung:s,DanhSachCanBo:h,LoaiThemCoQuan:l,AnhNhanDien:r}=this.state,{visibleModalCamera:c,modalKey:d}=this.state;return(0,N.jsxs)(f.aF,{title:"".concat(a.CanBoID?"S\u1eeda":"Th\xeam"," th\xf4ng tin c\xe1n b\u1ed9"),width:950,onCancel:this.onCancel,visible:n,footer:[(0,N.jsx)(f.$n,{onClick:t,children:"H\u1ee7y"},"back"),(0,N.jsx)(f.$n,{htmlType:"submit",type:"primary",form:"formsp",onClick:this.onOk,loading:e,children:"L\u01b0u"},"submit")],children:[(0,N.jsx)(I,{className:"modal",children:(0,N.jsxs)(H.A,(0,i.A)((0,i.A)({ref:this.formRef},{wrapperCol:24,labelAlign:"left"}),{},{children:[(0,N.jsx)(G,{name:"CanBoID",hidden:!0,initialValue:null}),(0,N.jsxs)(W,{value:l,onChange:this.changeLoaiThemCoQuan,style:{marginBottom:15},children:[(0,N.jsx)(K.Ay,{value:1,children:"Ch\u1ecdn ph\xf2ng ban"}),(0,N.jsx)(K.Ay,{value:2,disabled:a.CanBoID,children:"Th\xeam ph\xf2ng ban"})]}),(0,N.jsx)(y.A,{style:{borderBottom:"solid 1px #e6e6e6",marginBottom:15},children:1===l?(0,N.jsx)(G,{name:"CoQuanID",initialValue:void 0,children:(0,N.jsx)(f.f7,{style:{width:400},placeholder:"Ch\u1ecdn ph\xf2ng ban",noGetPopupContainer:!0,showSearch:!0,treeData:o,dropdownStyle:{maxHeight:400,overflow:"auto"},allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title",onChange:n=>this.changeCoQuan(n)})}):(0,N.jsx)(G,{name:"TenCoQuan",initialValue:"",children:(0,N.jsx)(f.pd,{style:{width:400},placeholder:"T\xean ph\xf2ng ban"})})}),a.CanBoID?"":(0,N.jsxs)(y.A,{style:{marginBottom:20},children:[(0,N.jsxs)(j.A,{span:7,children:["T\xean c\xe1n b\u1ed9 ",(0,N.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,N.jsx)(j.A,{span:6,push:1,children:"Email"}),(0,N.jsx)(j.A,{span:6,push:2,children:"Vai tr\xf2"}),(0,N.jsx)(j.A,{span:1,push:4,children:a.CanBoID?"":(0,N.jsx)("div",{style:{textAlign:"right"},children:(0,N.jsx)(p.A,{title:"Th\xeam c\xe1n b\u1ed9",children:(0,N.jsx)(f.$n,{type:"primary",icon:"plus",onClick:this.ThemCanBo,style:{borderRadius:"50%",width:40,height:40}})})})})]}),a.CanBoID?"":h.map((n,t)=>(0,N.jsxs)(y.A,{children:[(0,N.jsx)(j.A,{span:7,children:(0,N.jsx)(G,{name:["DanhSachCanBo",t,"TenCanBo"],initialValue:"",rules:[(0,i.A)({},U)],children:(0,N.jsx)(f.pd,{style:{textTransform:"capitalize"}})})}),(0,N.jsx)(j.A,{span:6,push:1,children:(0,N.jsx)(G,{name:["DanhSachCanBo",t,"Email"],initialValue:"",children:(0,N.jsx)(f.pd,{})})}),(0,N.jsx)(j.A,{span:8,push:2,children:(0,N.jsx)(G,{initialValue:[],name:["DanhSachCanBo",t,"ListNhomNguoiDungID"],children:(0,N.jsx)(f.l6,{allowClear:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",showSearch:!0,mode:"multiple",noGetPopupContainer:!0,children:s.map(n=>(0,N.jsx)(f.c$,{value:n.NhomNguoiDungID,children:n.TenNhom}))})})}),a.CanBoID?"":(0,N.jsx)(j.A,{span:1,push:2,children:(0,N.jsx)(G,{style:{textAlign:"right"},children:(0,N.jsx)(f.$n,{icon:"minus",type:"danger",onClick:()=>this.XoaCanBo(t)})})})]})),a.CanBoID?(0,N.jsxs)(y.A,{children:[(0,N.jsx)(j.A,(0,i.A)((0,i.A)({},{lg:{span:8},md:{span:10},sm:{span:24},xs:{span:24}}),{},{children:h.map((n,t)=>(0,N.jsxs)(y.A,{children:[(0,N.jsx)(G,{label:"T\xean c\xe1n b\u1ed9",name:["DanhSachCanBo",t,"TenCanBo"],initialValue:"",rules:[(0,i.A)({},U)],children:(0,N.jsx)(f.pd,{style:{textTransform:"capitalize"}})}),(0,N.jsx)(G,{label:"Email",name:["DanhSachCanBo",t,"Email"],initialValue:"",children:(0,N.jsx)(f.pd,{})}),(0,N.jsx)(G,{label:"Vai tr\xf2",initialValue:[],name:["DanhSachCanBo",t,"ListNhomNguoiDungID"],children:(0,N.jsx)(f.l6,{allowClear:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",showSearch:!0,mode:"multiple",noGetPopupContainer:!0,children:s.map(n=>(0,N.jsx)(f.c$,{value:n.NhomNguoiDungID,children:n.TenNhom}))})})]}))})),(0,N.jsxs)(j.A,(0,i.A)((0,i.A)({},{lg:{span:12,push:2},md:{span:13,push:1},sm:{span:24},xs:{span:24}}),{},{children:[(0,N.jsx)(G,{label:"\u1ea2nh nh\u1eadn di\u1ec7n",labelCol:{xs:6,md:6,lg:8},wrapperCol:{xs:18,md:18,lg:16},children:(0,N.jsx)(q.A,(0,i.A)((0,i.A)({},{grid:!0,modalOk:"C\u1eaft \u1ea3nh",modalCancel:"H\u1ee7y",modalTitle:"Ch\u1ec9nh s\u1eeda h\xecnh \u1ea3nh",maxZoom:5,minZoom:.8}),{},{beforeCrop:this.checkFileImage,children:(0,N.jsx)(z.A,{accept:".jpg, .png",showUploadList:!1,beforeUpload:n=>this.beforeUpload(n,this.renderAnhNhanDien),children:r?(0,N.jsx)("img",{className:"img-nhan-dien",src:r.FileUrl}):(0,N.jsxs)("div",{className:"frame-picture",children:[(0,N.jsx)(u.A,{type:"plus"}),(0,N.jsx)("div",{children:"Nh\u1ea5n \u0111\u1ec3 t\u1ea3i \u1ea3nh"})]})})}))}),(0,N.jsx)(G,{label:"Ho\u1eb7c",labelCol:{xs:6,md:6,lg:8},wrapperCol:{xs:18,md:18,lg:16},children:(0,N.jsx)(f.$n,{type:"primary",style:{width:150},onClick:this.openCamera,children:"M\u1edf camera"})})]}))]}):""]}))}),a.CanBoID?(0,N.jsx)(_,{visible:c,onCancel:this.closeModalCamera,onOk:this.submitModalCamera,CanBoID:a.CanBoID}):""]})}};var J=a(40854),Z=a.n(J);class nn extends o.Component{constructor(n){super(n),this.onSearch=(n,t)=>{let a=this.state.filterData,e={value:n,property:t},i=(0,b.D5)(a,e,null);this.setState({filterData:i},()=>{(0,b._Y)(this.state.filterData),this.props.getList(this.state.filterData)})},this.onTableChange=(n,t,a)=>{let e=this.state.filterData,i={pagination:n,filters:t,sorter:a},o=(0,b.D5)(e,null,i);this.setState({filterData:o},()=>{(0,b._Y)(this.state.filterData),this.props.getList(this.state.filterData)})},this.resetPassword=n=>{const{defaultPassword:t}=this.props;c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{R.ResetMatKhau({NguoiDungID:n}).then(n=>{n.data.Status>0?c.A.success({title:"Th\xf4ng b\xe1o",content:"M\u1eadt kh\u1ea9u \u0111\xe3 \u0111\u01b0\u1ee3c chuy\u1ec3n v\u1ec1 m\u1eb7c \u0111\u1ecbnh l\xe0: ".concat(t),okText:"\u0110\xf3ng"}):(0,b.M)(n.data.Message)}).catch(n=>{(0,b.M)(n.toString())})}})},this.ThemCanBo=()=>{let{modalKey:n}=this.state;n++,this.setState({dataEditCanBo:{},action:"add",visibleModalCanBo:!0,modalKey:n})},this.EditCanBo=(n,t)=>{R.ChiTietCanBo({CanBoID:n}).then(n=>{if(n.data.Status>0){let{modalKey:a}=this.state;a++,this.setState({dataEditCanBo:n.data.Data,action:"edit",visibleModalCanBo:!0,modalKey:a,NguoiDungID:t})}else(0,b.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())})},this.closeModalCanBo=()=>{this.setState({visibleModalCanBo:!1})},this.submitModalCanBo=(n,t)=>{const{action:a}=this.state;if("add"===a)delete n.CanBoID,this.setState({loading:!0}),R.ThemCanBo(n).then(t=>{this.setState({loading:!1}),t.data.Status>0?(d.A.success("Th\xeam c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),this.closeModalCanBo(),this.props.getList(this.state.filterData),!n.CoQuanID&&n.TenCoQuan&&this.props.getCQ()):(0,b.M)(t.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())});else if("edit"===a){const a=n.DanhSachCanBo[0],s=(0,i.A)({CanBoID:n.CanBoID,CoQuanID:n.CoQuanID,NguoiDungID:this.state.NguoiDungID},a),h=new FormData;t&&t.FileData&&h.append("files",t.FileData),h.append("HeThongCanBoV2ModelStr",JSON.stringify(s)),this.setState({loading:!0}),(e=E.suacanbov4,o=h,Z()({method:"POST",url:e,data:o,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).catch(n=>{const{status:t,statusText:a}=n.response;return{Status:0,Message:t||a?"".concat(t," - ").concat(a):"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"}})).then(n=>{this.setState({loading:!1}),n.data.Status>0?(d.A.success("C\u1eadp nh\u1eadt th\xf4ng tin c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),this.closeModalCanBo(),this.setState({NguoiDungID:null}),this.props.getList(this.state.filterData)):(0,b.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())})}var e,o},this.XoaCanBo=n=>{c.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a th\xf4ng tin c\xe1n b\u1ed9 n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{R.XoaTaiKhoan({ListID:[n]}).then(n=>{n.data.Status>0?(d.A.success("X\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.props.getList(this.state.filterData)):(0,b.M)(n.data.Message)}).catch(n=>{(0,b.M)(n.toString())})}})},this.XoaCoQuan=n=>{c.A.confirm({title:"Th\xf4ng b\xe1o",content:"Thao t\xe1c n\xe0y s\u1ebd x\xf3a ph\xf2ng ban v\xe0 to\xe0n b\u1ed9 c\xe1n b\u1ed9 thu\u1ed9c ph\xf2ng ban, b\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ph\xf2ng ban n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{R.XoaCoQuan({CoQuanID:n}).then(n=>{n.data.Status>0?(d.A.success("X\xf3a th\xf4ng tin \u0111\u01a1n v\u1ecb th\xe0nh c\xf4ng"),this.props.getListSP(this.state.filterData),this.props.getCQ()):(0,b.M)(n.data.Message)}).catch(n=>{(0,b.M)(n.toString())})}})},this.EditCoQuan=n=>{this.setState({CoQuanEdit:n.CoQuanID,TenCoQuanEdit:n.TenCoQuan})},this.CancelEditCoQuan=()=>{this.setState({CoQuanEdit:null,TenCoQuanEdit:""})},this.SaveEditCoQuan=(n,t)=>{R.SuaTenCoQuan({CoQuanID:n,TenCoQuan:t}).then(n=>{n.data.Status>0?(d.A.destroy(),d.A.success("Thay \u0111\u1ed5i th\xf4ng tin ph\xf2ng ban th\xe0nh c\xf4ng"),this.CancelEditCoQuan(),this.props.getList(this.state.filterData),this.props.getCQ()):(0,b.M)(n.data.Message)}).catch(n=>{this.setState({loading:!1}),(0,b.M)(n.toString())})},this.printQR=()=>{setTimeout(()=>{(0,b.Tu)(this.printRef.current.innerHTML)},500)},this.downloadQR=()=>{const{QRCode:n,TenCoQuan:t}=this.props,a=document.createElement("a");a.href=n,a.target="_blank",a.download="QRCheckin-".concat(t,".png"),a.click()},this.renderTenCanBo=n=>{const{DanhSachNhomNguoiDung:t}=n,a=t.map(n=>n.TenNhom),e=a.join(", ");return(0,N.jsxs)("div",{children:["T\xean c\xe1n b\u1ed9: ",n.TenCanBo,(0,N.jsx)("br",{}),"T\xe0i kho\u1ea3n: ",n.TenNguoiDung,(0,N.jsx)("br",{}),a.length?"Vai tr\xf2: ".concat(e):""]})},this.renderTenCoQuan=(n,t)=>{const{CoQuanEdit:a,TenCoQuanEdit:e}=this.state;return a&&a===t.CoQuanID?(0,N.jsx)(f.NJ,{enterButton:(0,N.jsx)(u.A,{type:"save"}),value:e,onSearch:n=>this.SaveEditCoQuan(a,n),onChange:this.changeEditCoQuan}):n},this.changeEditCoQuan=n=>{this.setState({TenCoQuanEdit:n.target.value})},this.renderThaoTacCoQuan=n=>{const{CoQuanEdit:t}=this.state;return(0,N.jsxs)("div",{className:"action-btn",children:[(0,N.jsx)(p.A,{title:t&&t===n.CoQuanID?"H\u1ee7y":"S\u1eeda ph\xf2ng ban",children:t&&t===n.CoQuanID?(0,N.jsx)(u.A,{type:"close",style:{color:"red"},onClick:this.CancelEditCoQuan}):(0,N.jsx)(u.A,{type:"form",onClick:()=>this.EditCoQuan(n)})}),(0,N.jsx)(p.A,{title:"X\xf3a ph\xf2ng b\u1ea1n",children:(0,N.jsx)(u.A,{type:"delete",onClick:()=>this.XoaCoQuan(n.CoQuanID)})})]})},this.renderThaoTacCanBo=n=>(0,N.jsxs)("div",{className:"action-btn",children:[(0,N.jsx)(p.A,{title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",children:(0,N.jsx)(u.A,{type:"reload",onClick:()=>this.resetPassword(n.NguoiDungID)})}),(0,N.jsx)(p.A,{title:"S\u1eeda c\xe1n b\u1ed9",children:(0,N.jsx)(u.A,{type:"form",onClick:()=>this.EditCanBo(n.CanBoID,n.NguoiDungID)})}),(0,N.jsx)(p.A,{title:"X\xf3a c\xe1n b\u1ed9",children:(0,N.jsx)(u.A,{type:"delete",onClick:()=>this.XoaCanBo(n.CanBoID)})})]});const t=k.parse(this.props.location.search);this.state={modalKey:0,visibleModalCanBo:!1,dataEditCanBo:{},action:"",loading:!1,filterData:t,NguoiDungID:null,CoQuanEdit:null,TenCoQuanEdit:""},this.printRef=o.createRef()}componentDidMount(){this.props.getInitData(this.state.filterData)}render(){const{modalKey:n,visibleModalCanBo:t,dataEditCanBo:a,loading:e,filterData:i,CoQuanQRPrint:o}=this.state,{DanhSachCanBo:s,DanhSachCoQuan:h,TotalRow:l,TableLoading:r,role:c,QRCode:d,TenCoQuan:u,fileLimit:p}=this.props,g=i.PageNumber?parseInt(i.PageNumber):1,S=i.PageSize?parseInt(i.PageSize):(0,b.WT)(),v=[{title:"STT",align:"center",width:"5%",render:(n,t,a)=>(0,N.jsx)("span",{children:(g-1)*S+(a+1)})},{title:"C\xe1n b\u1ed9 \u0111\u01a1n v\u1ecb",width:"35%",render:(n,t)=>this.renderTenCanBo(t)},{title:"Thao t\xe1c",width:"15%",render:(n,t)=>this.renderThaoTacCanBo(t)},{title:"Ph\xf2ng ban",width:"30%",dataIndex:"TenCoQuan",render:(n,t)=>this.renderTenCoQuan(n,t)},{title:"Thao t\xe1c",width:"15%",render:(n,t)=>this.renderThaoTacCoQuan(t)}];return(0,N.jsxs)(m.A,{children:[(0,N.jsx)(C.A,{children:"Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng"}),(0,N.jsx)(T.A,{children:c.add?(0,N.jsx)(f.$n,{icon:"user-add",type:"primary",onClick:this.ThemCanBo,children:"Th\xeam m\u1edbi"}):""}),(0,N.jsxs)(I,{className:"index",children:[(0,N.jsx)(D.A,{children:(0,N.jsxs)(y.A,{className:"row-content",children:[(0,N.jsxs)(j.A,{xs:24,md:24,lg:18,xl:20,className:"col-table",children:[(0,N.jsxs)(x.A,{children:[(0,N.jsx)(f.f7,{showSearch:!0,treeData:h,defaultValue:i.CoQuanID,style:{width:200},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ph\xf2ng ban",allowClear:!0,treeDefaultExpandAll:!0,onChange:n=>this.onSearch(n,"CoQuanID"),notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}),(0,N.jsx)(f.NJ,{placeholder:"T\xecm ki\u1ebfm c\xe1n b\u1ed9",style:{width:300},allowClear:!0,onSearch:n=>this.onSearch(n,"Keyword"),defaultValue:i.Keyword})]}),(0,N.jsx)(A.Ay,{columns:v,rowKey:"CanBoID",dataSource:s,pagination:{showSizeChanger:!0,showTotal:(n,t)=>"T\u1eeb ".concat(t[0]," \u0111\u1ebfn ").concat(t[1]," tr\xean ").concat(n),total:l,current:g,pageSize:S},loading:r,onChange:this.onTableChange,scroll:{y:"calc(100vh - 400px)",x:800}})]}),(0,N.jsx)(j.A,{xs:24,md:24,lg:6,xl:4,className:"col-qr",children:(0,N.jsxs)("div",{className:"qr-container",children:[(0,N.jsx)("img",{src:d,className:"img-qr",style:{width:200,height:200}}),(0,N.jsxs)("div",{className:"action-qr",children:[(0,N.jsx)(f.$n,{icon:"printer",type:"danger",onClick:this.printQR,children:"In"}),(0,N.jsx)(f.$n,{icon:"download",type:"primary",onClick:this.downloadQR,children:"T\u1ea3i xu\u1ed1ng"})]})]})})]})}),(0,N.jsx)(Y,{visible:t,dataEdit:a,DanhSachCoQuan:h,onCreate:this.submitModalCanBo,onCancel:this.closeModalCanBo,fileLimit:p},n),(0,N.jsx)("div",{ref:this.printRef,style:{display:"none"},children:(0,N.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,N.jsx)("img",{style:{marginTop:"20%",width:400,height:400},src:d}),(0,N.jsx)("div",{style:{marginTop:20,fontWeight:"bold",fontSize:30},children:u})]})})]})]})}}const tn=(0,s.Ng)(function(n){return(0,i.A)((0,i.A)({},n.QuanTriHeThong),{},{role:(0,b.vh)(n.Auth.role,"quan-tri-he-thong"),defaultPassword:(0,b.op)("defaultPassword",10),fileLimit:(0,b.op)("fileLimit",10)})},h.A)(nn);var an=a(11643);const{ROLEID:en}=r();class on extends o.Component{constructor(n){document.title="Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng",super(n)}render(){const{user:n,role:t}=this.props;if(!t.view)return(0,N.jsx)(an.A,{to:"/dashboard"});return(n&&n.RoleID||0)===en.ADMIN?(0,N.jsx)(F,(0,i.A)({},this.props)):(0,N.jsx)(tn,(0,i.A)({},this.props))}}const sn=(0,s.Ng)(function(n){return{user:n.Auth.user,role:(0,b.vh)(n.Auth.role,"quan-tri-he-thong")}},h.A)(on)},83305:(n,t,a)=>{a.d(t,{A:()=>g});a(65043);var e,i,o=a(57528),s=a(22121),h=a(17159);const l=s.Ay.h3(e||(e=(0,o.A)(["\n  font-size: 14px;\n  font-weight: 500;\n  color: ",";\n  margin: 0;\n  margin-bottom: 5px;\n"])),(0,h.palette)("text",0)),r=s.Ay.p(i||(i=(0,o.A)(["\n  font-size: 13px;\n  font-weight: 400;\n  color: ",";\n  line-height: 24px;\n"])),(0,h.palette)("text",3));var c=a(70579);const d=n=>(0,c.jsxs)("div",{children:[n.title?(0,c.jsxs)(l,{className:"isoBoxTitle",children:[" ",n.title," "]}):"",n.subtitle?(0,c.jsxs)(r,{className:"isoBoxSubTitle",children:[" ",n.subtitle," "]}):""]});var u;const p=s.Ay.div(u||(u=(0,o.A)(["\n  width: 100%;\n  height: 100%;\n  padding: 20px 20px 5px 20px;\n  background-color: #ffffff;\n  border: 1px solid ",";\n  margin: 0 0 30px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  @media only screen and (max-width: 767px) {\n    padding: 20px;\n    ",";\n  }\n\n  &.half {\n    width: calc(50% - 34px);\n    @media (max-width: 767px) {\n      width: 100%;\n    }\n  }\n"])),(0,h.palette)("border",0),""),g=n=>(0,c.jsxs)(p,{className:"".concat(n.className||""," isoBoxWrapper"),style:n.style,children:[(0,c.jsx)(d,{title:n.title,subtitle:n.subtitle}),n.children]})}}]);
//# sourceMappingURL=634.a8131fe5.chunk.js.map