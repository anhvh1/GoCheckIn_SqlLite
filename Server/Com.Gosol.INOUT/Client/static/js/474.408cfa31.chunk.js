(self.webpackChunkisomorphic=self.webpackChunkisomorphic||[]).push([[474],{76174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ve});var a=n(89379),i=n(65043),o=n(44398),s=n(78143),h=n(44246),c=n(45543),r=n(84236);const l={uploadimage:r.Ay.apiImage+"recognition",verification:r.Ay.apiImage+"verification",checkin:r.Ay.apiInOut+"VaoRa/Vao",checkinv4:r.Ay.apiInOutv4+"VaoRa/Vao",checkout:r.Ay.apiInOut+"VaoRa/Ra",checkoutv4:r.Ay.apiInOutv4+"VaoRa/Ra",danhsachcanbo:r.Ay.apiInOut+"HeThongCanBo/DanhSachCanBo_TrongCoQuanSuDungPhanMem",danhsachletan:r.Ay.apiInOut+"HeThongCanBo/GetDanhSachLeTan",getbymathe:r.Ay.apiInOutv4+"VaoRa/GetByMaThe",getbychandung:r.Ay.apiInOut+"VaoRa/Get_By_AnhChanDung",getimagecamera:r.Ay.apiInOut+"VaoRa/Get_AnhChanDung_FromCamera",getipcamera:r.Ay.apiInOut+"SystemConfig/GetByKey",getlistpaging:r.Ay.apiInOutv4+"VaoRa/GetListPageBySearch",nhandien:r.Ay.apiInOutv4+"VaoRa/NhanDienKhuonMat"},d={UploadImage:e=>(0,c.p3)(l.uploadimage,(0,a.A)({},e)),Checkin:e=>(0,c.zO)(l.checkin,(0,a.A)({},e)),Checkinv4:e=>(0,c.zO)(l.checkinv4,(0,a.A)({},e)),Checkout:e=>(0,c.zO)(l.checkout,(0,a.A)({},e)),Checkoutv4:e=>(0,c.zO)(l.checkoutv4,(0,a.A)({},e)),DanhSachCanBo:()=>(0,c.vk)(l.danhsachcanbo),DanhSachLeTan:()=>(0,c.vk)(l.danhsachletan),GetByMaThe:e=>(0,c.vk)(l.getbymathe,(0,a.A)({},e)),Verification:e=>(0,c.p3)(l.verification,(0,a.A)({},e)),GetByChanDung:e=>(0,c.zO)(l.getbychandung,(0,a.A)({},e)),GetImageCamera:e=>(0,c.vk)(l.getimagecamera,(0,a.A)({},e)),GetIPCamera:e=>(0,c.vk)(l.getipcamera,(0,a.A)({},e)),GetList:e=>(0,c.vk)(l.getlistpaging,(0,a.A)({},e)),NhanDien:e=>(0,c.zO)(l.nhandien,(0,a.A)({},e))};var g,C=n(92288),p=n(18161),u=n.n(p),m=n(96365),x=n(52528),T=n(45594),A=n(47419),y=n(11645),D=n(59877),v=n(5397),N=n(35696),M=n(25850),S=n(53793),b=n(86178),f=n.n(b),j=n(17029),k=n.n(j),w=n(57528),L=n(94574);const I=L.Ay.div(g||(g=(0,w.A)(["\n  .title {\n    font-weight: bold;\n    font-size: 18px;\n\n    .sub-title {\n      font-weight: normal;\n      font-size: 14px;\n    }\n  }\n\n  .queue-title {\n    cursor: pointer;\n    text-decoration: underline;\n    color: #d9363e;\n  }\n\n  .flex {\n    display: flex;\n    align-items: center;\n  }\n\n  .center {\n    text-align: center;\n  }\n\n  .ant-form .ant-form-item {\n    margin-bottom: 5px !important;\n  }\n\n  .col-container {\n    width: 100%;\n    display: flex;\n    padding: 5px 10px;\n\n    .col {\n      /* margin-right: 10px; */\n\n      &:last-child {\n        margin-right: 0;\n      }\n    }\n\n    .col-first {\n      // width: 50%;\n\n      .box-container {\n        overflow: auto;\n        max-height: calc(100vh - 180px);\n      }\n\n      .box {\n        box-shadow: rgba(0, 0, 0, 0.35) 0px 2px 2px;\n        border-radius: 4px;\n        margin-bottom: 10px;\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n\n      .box-relative {\n        position: relative;\n      }\n\n      .div-loading {\n        background-color: rgba(255, 255, 255, 0.6);\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        top: 0;\n        z-index: 1000;\n\n        .spin {\n          top: 50%;\n          left: 50%;\n          position: absolute;\n        }\n      }\n\n      .box-camera {\n        box-shadow: none;\n\n        .camera-content {\n          width: 100%;\n          height: 190px;\n          border: dotted 4px #ccc;\n          border-radius: 8px;\n\n          .content {\n            height: 140px;\n            width: 100%;\n            text-align: center;\n            padding-top: 5px;\n\n            .box-image {\n              position: relative;\n\n              .close-ico {\n                color: #000;\n                position: absolute;\n                top: 0;\n                right: 5px;\n              }\n            }\n\n            .camera-canvas {\n              display: flex;\n              position: relative;\n              justify-content: center;\n\n              #detect-canvas {\n                position: absolute;\n              }\n            }\n          }\n\n          .action {\n            text-align: center;\n\n            button {\n              background: #ccc;\n\n              &:hover {\n                &:not(.ant-btn[disabled]) {\n                  border-color: #ccc;\n                  color: #000;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      .box-info {\n        padding: 20px;\n\n        .ant-col {\n          margin-bottom: 0;\n        }\n\n        .ant-input[disabled] {\n          color: rgba(0, 0, 0, 0.7);\n        }\n\n        .ant-select-disabled {\n          color: rgba(0, 0, 0, 0.7);\n        }\n      }\n    }\n\n    .col-second {\n      .boxSearch {\n        padding: 5px 25px;\n\n        input {\n          border-radius: 14px;\n        }\n      }\n\n      .card-container {\n        padding: 0 15px;\n        max-height: calc(100vh - 250px);\n        overflow: auto;\n      }\n    }\n\n    .col-third {\n      .box-container {\n        padding: 0 15px;\n        overflow: auto;\n        min-height: 430px;\n        max-height: calc(100vh - 230px);\n\n        .box-info {\n          width: 100%;\n          height: 120px;\n          box-shadow: rgba(0, 0, 0, 0.35) 0px 2px 2px;\n          border-radius: 8px;\n          margin-top: 15px;\n          position: relative;\n          background-size: cover;\n          background-position: center;\n\n          &:last-child {\n            margin-bottom: 15px;\n          }\n\n          .text-number {\n            color: #fff;\n            text-align: center;\n            font-size: 18px;\n            line-height: 50px;\n            background: rgba(84, 73, 241, 0.8);\n            position: absolute;\n            bottom: 0;\n            height: 50px;\n            width: 100%;\n            border-bottom-right-radius: 8px;\n            border-bottom-left-radius: 8px;\n          }\n        }\n      }\n\n      .div-report {\n        margin-top: 20px;\n        border-top: solid 1px #ccc;\n\n        .flex {\n          display: flex;\n        }\n\n        .main-report {\n          // display: flex;\n          margin-top: 10px;\n\n          .report-label {\n            font-weight: bold;\n            // width: 30%;\n          }\n\n          .report-wrapper {\n            // width: 70%;\n          }\n        }\n\n        .action-report {\n          width: 100%;\n          text-align: center;\n          margin-top: 15px;\n\n          button {\n            border-radius: 8px;\n          }\n        }\n      }\n    }\n  }\n\n  .div-footer {\n    width: 100%;\n    position: fixed;\n    bottom: 25px;\n    background-color: #e8e8e8;\n    padding: 10px 0 20px 0;\n    z-index: 999;\n    border-top: solid 1px #ccc;\n    height: 75px;\n\n    .div-action {\n      width: 100%;\n      text-align: center;\n    }\n  }\n\n  .footer-main {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    text-align: center;\n    color: black;\n    font-size: 12px;\n    font-family: generic-family, serif;\n    background-color: #fff;\n    z-index: 999;\n    height: 25px;\n    padding-bottom: 5px;\n  }\n\n  .x-red {\n    text-align: center;\n    color: red;\n    font-weight: bold;\n    font-size: 16px;\n    cursor: pointer;\n  }\n"])));var B,G=n(42857),H=n(70579);const Y=(0,L.Ay)(G.A)(B||(B=(0,w.A)(["\n  \n"]))),V=e=>(0,H.jsx)(Y,(0,a.A)((0,a.A)({},e),{},{children:e.children}));var O,P=n(71349),R=n(80532),K=n(40905);const _=L.Ay.div(O||(O=(0,w.A)(["\n  width: 100%;\n  border: solid 1px #5449f1;\n  display: flex;\n  min-height: 75px;\n  margin: 10px 0;\n  border-radius: 4px;\n  cursor: pointer;\n  position: relative;\n\n  &:hover {\n    border: solid 2px #5449f1;\n  }\n\n  .image-div {\n    display: flex;\n    width: calc(100% / 3);\n    justify-content: center;\n    align-items: center;\n\n    img {\n      //width: 100%;\n      //height: 75%;\n      max-height: 60px;\n    }\n\n    .icon-empty {\n      font-size: 36px;\n      color: #ccc;\n    }\n  }\n\n  .info-div {\n    width: calc(100% * 2 / 3);\n    padding: 5px 10px;\n    font-size: 14px;\n    position: relative;\n\n    .info-mathe {\n      border: solid 1px #ccc;\n      border-radius: 4px;\n      width: 50px;\n      height: 20px;\n      line-height: 20px;\n      text-align: center;\n      font-weight: normal;\n      margin-left: auto;\n      order: 2;\n    }\n\n    .info-giovao {\n    }\n\n    .info-name {\n      font-weight: bold;\n      display: flex;\n    }\n  }\n\n  .btn-checkout {\n    background-color: rgba(96, 80, 244, 0.5);\n    color: #fff;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    padding: 0;\n    position: absolute;\n    right: 5px;\n    bottom: 5px;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &:hover {\n      background-color: #513ff3;\n    }\n  }\n"]))),F=e=>(0,H.jsxs)(_,{onClick:e.onClick,style:{border:"".concat(e.isPicked?"solid 2px #5449F1":"solid 1px #5449F1")},children:[(0,H.jsx)("div",{className:"image-div",children:""!==e.AnhChanDung||""!==e.AnhCMT?(0,H.jsx)("img",{src:e.AnhChanDung?e.AnhChanDung:e.AnhCMT}):(0,H.jsx)(R.A,{className:"icon-empty",type:"audit"})}),(0,H.jsxs)("div",{className:"info-div",children:[(0,H.jsxs)("div",{className:"info-name",children:[e.TenCanBo,e.MaThe&&""!==e.MaThe?(0,H.jsx)("div",{className:"info-mathe",children:e.MaThe}):""]}),(0,H.jsxs)("div",{children:["S\u1ed1 gi\u1ea5y t\u1edd: ",e.SoCMT]}),(0,H.jsxs)("div",{className:"info-giovao",children:["Gi\u1edd v\xe0o: ",f()(e.GioVao).format("DD/MM/YYYY - HH:mm")]})]}),(0,H.jsx)("div",{className:"btn-checkout",onClick:e.onCheckOut,children:(0,H.jsx)(K.A,{})})]});var U=n(85341),E=n.n(U),Q=n(9370);const W=n.p+"static/media/checkin.1724412cf6e39fa1e13e.png",z=n.p+"static/media/checkout.a53284b48765516505bc.png",q=n.p+"static/media/meetting.b059f563e98b5af39d8b.png";var $,J=n(41528);const X=L.Ay.div($||($=(0,w.A)(["\n  .title {\n    text-align: center;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  \n  .weight {\n    font-weight: bold;\n  }\n  \n  .queue-container {\n    .queue-item {\n      display: flex;\n      justify-items: center;\n      padding: 10px;\n      border-bottom: solid 1px #ccc;\n      \n      &:hover {\n        cursor: pointer;\n        color: #fff;\n        background: #8cc8ff;\n      }\n      \n      .action {\n        margin-left: auto;\n        \n        .anticon {\n          &:hover {\n            color: red;\n          }\n        }\n      }\n    }\n  }\n"])));var Z=n(92089);class ee extends i.Component{constructor(e){super(e),this.renderDivPrint=()=>{const{dataBaoCao:e,filterData:t}=this.props,n={table:{width:"100%",borderCollapse:"collapse",fontFamily:"Times New Roman"},th:{textAlign:"center",fontWeight:"bold",border:"solid 0.5pt #999",padding:5},td:{border:"solid 0.5pt #999",padding:5}};return(0,H.jsxs)("table",{style:n.table,children:[(0,H.jsx)("tr",{children:(0,H.jsx)("td",{colSpan:10,style:(0,a.A)((0,a.A)({},n.td),{},{border:"none",textAlign:"center"}),children:(0,H.jsx)("b",{children:"DANH S\xc1CH KH\xc1CH V\xc0O - RA C\u1ee6A C\u01a0 QUAN"})})}),(0,H.jsx)("tr",{children:(0,H.jsxs)("td",{colSpan:10,style:(0,a.A)((0,a.A)({},n.td),{},{border:"none",textAlign:"center"}),children:["T\u1eeb ng\xe0y: ",f()(t.TuNgay).format("DD/MM/YYYY")," - \u0110\u1ebfn ng\xe0y: ",f()(t.DenNgay).format("DD/MM/YYYY")]})}),(0,H.jsx)("tr",{}),(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:50}),children:"STT"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:200}),children:"H\u1ecd t\xean kh\xe1ch"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:200}),children:"C\u01a1 quan"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:100}),children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:150}),children:"S\u1ed1 CMND"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:200}),children:"\u0110\u1ecba ch\u1ec9"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:150}),children:"Ng\xe0y gi\u1edd v\xe0o"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:150}),children:"Ng\xe0y gi\u1edd ra"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:100}),children:"Th\xe2n nhi\u1ec7t"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:200}),children:"C\xe1n b\u1ed9 g\u1eb7p"}),(0,H.jsx)("th",{style:(0,a.A)((0,a.A)({},n.th),{},{width:200}),children:"B\u1ed9 ph\u1eadn"})]}),e.map((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:t+1}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"left"}),children:e.HoVaTen}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"left"}),children:e.TenCoQuan}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:e.DienThoai}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:"'".concat(e.SoCMND)}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"left"}),children:e.HoKhau}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:f()(e.GioVao).format("DD/MM/YYYY HH:ss")}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:e.GioRa?f()(e.GioRa).format("DD/MM/YYYY HH:ss"):""}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:e.ThanNhiet?"".concat(e.ThanNhiet," \xb0C"):""}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"left"}),children:e.TenCanBoGap}),(0,H.jsx)("td",{style:(0,a.A)((0,a.A)({},n.td),{},{textAlign:"center"}),children:e.TenBoPhanGap})]}))]})},this.exportExcel=()=>{let e,t,n,a;e="<html><head><meta charset='utf-8'></head><body>"+this.refPrint.current.innerHTML+"</body></html>",n=new Blob(["\ufeff",e],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(n),t=document.createElement("A"),t.href=a,t.download="B\xe1o c\xe1o ra v\xe0o.xls",document.body.appendChild(t),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(n,"B\xe1o c\xe1o ra v\xe0o.xls"):t.click(),document.body.removeChild(t)},this.printComponent=()=>{let e=document.querySelectorAll("iframe");e&&e.length&&e.forEach(e=>{e.parentNode.removeChild(e)});const t=this.refPrint.current.innerHTML;let n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write(t),n.contentWindow.document.close(),n.contentWindow.focus(),n.contentWindow.print()},this.renderLyDoGap=e=>{switch(e.LyDoGap){case 1:return"H\u1ecdp";case 2:return"G\u1eb7p ".concat(e.TenCanBoGap?"c\xe1n b\u1ed9 ".concat(e.TenCanBoGap):e.TenBoPhanGap);case 3:return"L\xfd do kh\xe1c".concat(e.LyDoKhac?": ".concat(e.LyDoKhac):"")}},this.refPrint=i.createRef(),this.state={}}render(){const{visible:e,onCancel:t,dataBaoCao:n,filterData:a}=this.props,i=[{title:"STT",align:"center",width:"5%",render:(e,t,n)=>n+1},{title:"H\u1ecd t\xean kh\xe1ch",dataIndex:"HoVaTen",width:"15%"},{title:"C\u01a1 quan",dataIndex:"TenCoQuan",width:"10%"},{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",dataIndex:"DienThoai",align:"center",width:"10%"},{title:"S\u1ed1 CMND",dataIndex:"SoCMND",align:"center",width:"10%"},{title:"\u0110\u1ecba ch\u1ec9",dataIndex:"HoKhau",width:"10%"},{title:"Ng\xe0y gi\u1edd v\xe0o",width:"10%",align:"center",dataIndex:"GioVao",render:e=>f()(e).format("DD/MM/YYYY HH:mm")},{title:"Ng\xe0y gi\u1edd ra",width:"10%",align:"center",dataIndex:"GioRa",render:(e,t)=>t.GioRa?f()(e).format("DD/MM/YYYY HH:mm"):""},{title:"Th\xe2n nhi\u1ec7t",dataIndex:"ThanNhiet",width:"5%",align:"center",render:(e,t)=>t.ThanNhiet?"".concat(t.ThanNhiet," \xb0C"):""},{title:"L\xfd do g\u1eb7p",align:"center",width:"15%",render:(e,t)=>this.renderLyDoGap(t)}];return(0,H.jsx)(T.A,{title:"",width:1200,onCancel:t,visible:e,style:{top:20},footer:(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(J.A,{type:"primary",onClick:this.printComponent,children:"In danh s\xe1ch"}),(0,H.jsx)(J.A,{type:"primary",style:{marginLeft:20},onClick:this.exportExcel,children:"Xu\u1ea5t excel"})]}),children:(0,H.jsxs)(X,{children:[(0,H.jsx)("div",{className:"title weight",children:"DANH S\xc1CH KH\xc1CH V\xc0O - RA C\u1ee6A C\u01a0 QUAN"}),(0,H.jsxs)("div",{className:"title",children:["T\u1eeb ng\xe0y: ",f()(a.TuNgay).format("DD/MM/YYYY")," \u0111\u1ebfn ng\xe0y: ",f()(a.DenNgay).format("DD/MM/YYYY")]}),(0,H.jsx)(Z.Ay,{columns:i,rowKey:"ThongTinVaoRaID",dataSource:n,pagination:!1,scroll:{y:600}}),(0,H.jsx)("div",{style:{display:"none"},children:(0,H.jsx)("div",{ref:this.refPrint,children:this.renderDivPrint()})})]})})}}var te=n(15615);const ne=class extends i.Component{constructor(e){super(e),this.deleteLine=(e,t)=>{e.stopPropagation(),this.props.deleteLine(t)},this.refPrint=i.createRef(),this.state={}}render(){const{visible:e,onCancel:t,listCheckin:n,chooseLine:a}=this.props;return(0,H.jsx)(m.aF,{title:"Danh s\xe1ch h\xe0ng \u0111\u1ee3i checkin",width:450,onCancel:t,visible:e,footer:null,children:(0,H.jsx)(X,{children:(0,H.jsx)("div",{className:"queue-container",children:n.map((e,t)=>(0,H.jsxs)("div",{className:"queue-item",onClick:()=>a(t),children:[(0,H.jsxs)("div",{className:"item",children:[e.HoVaTen," - S\u1ed1 gi\u1ea5y t\u1edd: ",e.SoCMND]}),(0,H.jsx)("div",{className:"action",children:(0,H.jsx)(te.A,{onClick:e=>this.deleteLine(e,t)})})]}))})})})}};var ae=n(45722),ie=n(42575),oe=n(53536),se=n.n(oe),he=n(19292),ce=n(57319),re=n(23816),le=n(6881),de=n(46795);const{changeCurrent:ge,setListTemperWait:Ce,getListTemperFromSite:pe}=h.A,ue=(new Date).getFullYear(),{Item:me}=M.A,{COL_COL_ITEM_LAYOUT_RIGHT:xe}=u(),{ITEM_LAYOUT_HALF:Te,COL_ITEM_LAYOUT_HALF:Ae}=E();let ye=new Date;class De extends i.Component{constructor(e){super(e),this.changeLoadingDataScan=e=>{this.setState((0,a.A)((0,a.A)({},this.state),{},{loadingDataScan:e}))},this.handleConnectSocketScan=()=>{const e=new WebSocket("ws://localhost:".concat(r.Ay.socketPort));console.log("start connect websocket"),e.onopen=()=>{console.log("socket connected port ")},e.onmessage=e=>{const t=JSON.parse(e.data);"READ"===t.EventName&&this.changeLoadingDataScan(!0),"CARD_RESULT"===t.EventName&&this.setState({loadingDataScan:!1,dataCMT:(0,a.A)((0,a.A)({},this.state.dataCMT),{},{HoVaTen:t.PersonalInfo.personName,GioiTinh:t.PersonalInfo.gender,SoCMND:t.PersonalInfo.idCode,LoaiGiayTo:"CCCD",HoKhau:t.PersonalInfo.residencePlace}),imageChanDung:t.ChipFace}),"FAILURE"===t.Status&&(this.setState({loadingDataScan:!1}),x.Ay.destroy(),x.Ay.warning("X\u1ea3y ra l\u1ed7i trong qu\xe1 tr\xecnh \u0111\u1ecdc th\xf4ng tin CCCD"))},e.onerror=e=>{this.changeLoadingDataScan(!1),console.log("\u274c L\u1ed7i: "+e)},e.onclose=()=>{this.changeLoadingDataScan(!1),console.log("\ud83d\udd0c K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng")}},this.componentDidMount=async()=>{this.handleConnectSocketScan(),this.props.getInitData(this.state.filterData),this.interval=setInterval(()=>{ye=new Date,this.setState({today:ye})},1e3),this.getCamera(),this.GetListCheckin();const e=document.getElementsByClassName("card-container");e[0]&&e[0].addEventListener("scroll",this.ScrollContainer),this.socket&&this.socket.close(),this.socketIO&&this.socketIO.stop(),this.socketIO=(0,he.Qc)(),await this.socketIO.start(),this.socketIO.on("scan",e=>{this.setDataOnSocket(e)}),this.getListTemperFromTopBar()},this.connect=()=>{this.socket=new WebSocket("ws://localhost:8000"),this.socket.onopen=()=>{console.log("Socket temperate connected")},this.socket.onclose=e=>{console.log("Socket temperate disconnected",e)},this.socket.onerror=e=>{console.error("Socket temperate encountered error: ",e,"Closing socket temperate"),this.socket.close()}},this.setDataOnSocket=e=>{const{dataCMT:t,listCheckin:n}=this.state;let i=localStorage.getItem("user");i=JSON.parse(i);if(i.CoQuanSuDungPhanMem==e.coQuanSuDungPhanMem){const i=(0,a.A)((0,a.A)({},t),{},{HoVaTen:e.hoVaTen,SoCMND:e.soCMND,HoKhau:e.hoKhau,LoaiGiayTo:e.loaiGiayTo,GioiTinh:e.gioiTinh,sessionCode:e.sessionCode,CoQuanSuDungPhanMem:e.coQuanSuDungPhanMem,LyDoGap:e.lyDoGap,GapCanBo:"".concat(e.gapCanBo,"_").concat(e.donViCaNhan),DienThoai:e.dienThoai,TenCoQuan:e.tenCoQuan});""!==t.HoVaTen||""!==t.SoCMND?n.push((0,a.A)((0,a.A)({},i),{},{imageCMTTruoc:e.anhCMND_MTBase64,ThanNhiet:""})):this.setState({dataCMT:i,imageCMTTruoc:e.anhCMND_MTBase64})}},this.getListTemperFromTopBar=()=>{const{app:e}=this.props,{temperWait:t}=e;if(t.length){const e=t[0];if(this.selectTemper(e),t.length>1){const e=t.slice(1,t.length);this.setState({listTemper:e})}this.props.setListTemperWait(!1)}},this.ScrollContainer=e=>{const t=e.target;if(t.scrollTop===t.scrollHeight-t.clientHeight){let e=this.state.filterData;const{ListCheckinLoaded:t,TotalRow:n}=this.state;t.length<n&&(e.PageNumber+=1,this.setState({filterData:e},()=>this.GetListCheckin()))}},this.GetListCheckin=()=>{let{filterData:e,ListCheckinLoaded:t,TotalRow:n}=this.state;d.GetList((0,a.A)({},e)).then(a=>{a.data.Status>0&&(1===e.PageNumber?t=a.data.Data:a.data.Data.forEach(e=>t.push(e)),n=a.data.TotalRow,this.setState({ListCheckinLoaded:t,TotalRow:n}))})},this.onSearch=(e,t)=>{let{filterData:n}=this.state;n[t]=e,n.PageNumber=1,this.setState({filterData:n,ListCheckinLoaded:[]},()=>this.GetListCheckin())},this.fillData=(e,t)=>{const{dataCMT:n}=this.state;n.HoVaTen="N/A"!==e.name?e.name:2===t?n.HoVaTen:"",n.NgaySinh="N/A"!==e.birthday?f()(e.birthday,"DD-MM-YYYY"):2===t?n.NgaySinh:"",n.HoKhau="N/A"!==e.address?e.address:2===t?n.HoKhau:"",n.SoCMND="N/A"!==e.id?e.id:2===t?n.SoCMND:"",n.NoiCapCMND="N/A"!==e.issue_by?e.issue_by:1===t?n.NoiCapCMND:"",n.NgayCapCMND="N/A"!==e.issue_date?f()(e.issue_date,"DD-MM-YYYY"):1===t?n.NgayCapCMND:"",n.GioiTinh="N/A"!==e.sex?e.sex:2===t?n.GioiTinh:void 0,n.LoaiGiayTo="N/A"!==e.document?e.document:2===t?n.LoaiGiayTo:"",1===t?"N/A"!==e.name&&"N/A"!==e.id||(x.Ay.destroy(),x.Ay.warning("\u1ea2nh CMND m\u1eb7t tr\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7")):2===t&&("N/A"===e.name&&"N/A"===e.id||(x.Ay.destroy(),x.Ay.warning("\u1ea2nh CMND m\u1eb7t sau kh\xf4ng h\u1ee3p l\u1ec7"))),this.setState({dataCMT:n})},this.inputNumber=e=>{const t=e.charCode;(t<48||t>57)&&e.preventDefault()},this.CheckIn=()=>{const e=(0,a.A)({},this.state.dataCMT);if(e.NgaySinh=""!==e.NgaySinh?f()(e.NgaySinh,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.NgayCapCMND=""!==e.NgayCapCMND?f()(e.NgayCapCMND,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.AnhChanDungBase64=this.state.imageChanDung,e.AnhCMND_MTBase64=this.state.imageCMTTruoc,e.AnhCMND_MSBase64=this.state.imageCMTSau,delete e.GioVao,void 0===e.LyDoGap)return x.Ay.destroy(),void x.Ay.warning("Ch\u01b0a ch\u1ecdn l\xfd do v\xe0o c\u01a1 quan");if(2===e.LyDoGap){if(void 0===e.GapCanBo)return x.Ay.destroy(),void x.Ay.warning("Ch\u01b0a ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng g\u1eb7p");{const t=e.GapCanBo.split("_");e.GapCanBo=t[0],e.DonViCaNhan=t[1]}}else e.GapCanBo=0,e.DonViCaNhan=0;this.setState({loading:!0}),d.Checkinv4(e).then(t=>{if(t.data.Status>0){const n={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0};T.A.success({title:"Th\xf4ng b\xe1o",content:"Checkin th\xe0nh c\xf4ng",okText:"\u0110\xf3ng",onOk:()=>{let{filterData:e}=this.state;e.PageNumber=1,this.setState({dataCMT:n,loading:!1,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckIn:!1,showCamera:!0,ListCheckinLoaded:[],filterData:e,temperUsing:{}},()=>{this.props.getList(),this.GetListCheckin()})}});const i=t.data.Data;"Connected"===this.socketIO.connectionState&&this.socketIO.invoke("scan",(0,a.A)((0,a.A)({},i),{},{sessionCode:e.sessionCode}))}else this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(t.data.Message)}).catch(e=>{this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})},this.CheckInv4=()=>{const e=(0,a.A)({},this.state.dataCMT);if(e.NgaySinh=""!==e.NgaySinh?f()(e.NgaySinh,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.NgayCapCMND=""!==e.NgayCapCMND?f()(e.NgayCapCMND,"DD/MM/YYYY").format("YYYY-MM-DD"):"",e.AnhChanDungBase64=this.state.imageChanDung,e.AnhCMND_MTBase64=this.state.imageCMTTruoc,e.AnhCMND_MSBase64=this.state.imageCMTSau,delete e.GioVao,void 0===e.LyDoGap)return x.Ay.destroy(),void x.Ay.warning("Ch\u01b0a ch\u1ecdn l\xfd do v\xe0o c\u01a1 quan");if(2===e.LyDoGap){if(void 0===e.GapCanBo)return x.Ay.destroy(),void x.Ay.warning("Ch\u01b0a ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng g\u1eb7p");{const t=e.GapCanBo.split("_");e.GapCanBo=t[0],e.DonViCaNhan=t[1]}}else e.GapCanBo=0,e.DonViCaNhan=0;this.setState({loading:!0}),d.Checkinv4(e).then(t=>{if(t.data.Status>0){x.Ay.destroy(),x.Ay.success("C\xe1n b\u1ed9 checkin th\xe0nh c\xf4ng");const n={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0};let{filterData:i}=this.state;i.PageNumber=1,this.setState({dataCMT:n,loading:!1,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckIn:!1,showCamera:!0,ListCheckinLoaded:[],filterData:i,temperUsing:{}},()=>{this.props.getList(),this.GetListCheckin()});const o=t.data.Data;"Connected"===this.socketIO.connectionState&&this.socketIO.invoke("scan",(0,a.A)((0,a.A)({},o),{},{sessionCode:e.sessionCode}))}else this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(t.data.Message)}).catch(e=>{this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})},this.CheckOut=()=>{const e={ThongTinVaoRaID:this.state.dataCMT.ThongTinVaoRaID};this.setState({loading:!0}),d.Checkoutv4(e).then(e=>{if(e.data.Status>0){const e={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0,ThongTinVaoRaID:0};T.A.success({title:"Th\xf4ng b\xe1o",content:"Checkout th\xe0nh c\xf4ng",okText:"\u0110\xf3ng",onOk:()=>{let{filterData:t}=this.state;t.PageNumber=1,this.setState({dataCMT:e,loading:!1,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckOut:!1,showCamera:!0,ListCheckinLoaded:[],filterData:t},()=>{this.props.getList(),this.GetListCheckin()})}})}else this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.data.Message)}).catch(e=>{this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})},this.CheckOutv4=()=>{const e={ThongTinVaoRaID:this.state.dataCMT.ThongTinVaoRaID};this.setState({loading:!0}),d.Checkoutv4(e).then(e=>{if(this.setState({loading:!1}),e.data.Status>0){3!==e.data.Status&&(x.Ay.destroy(),x.Ay.success("C\xe1n b\u1ed9 checkout th\xe0nh c\xf4ng"));const t={HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",LyDoGap:void 0,ThongTinVaoRaID:0};let{filterData:n}=this.state;n.PageNumber=1,this.setState({dataCMT:t,imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",isCheckOut:!1,showCamera:!0,ListCheckinLoaded:[],filterData:n},()=>{this.props.getList(),this.GetListCheckin()})}else this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.data.Message)}).catch(e=>{this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})},this.callCheckOut=(e,t)=>{e.stopPropagation(),T.A.confirm({title:"Checkout",content:"B\u1ea1n c\xf3 mu\u1ed1n checkout kh\xe1ch n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{const e={ThongTinVaoRaID:t};d.Checkout(e).then(e=>{if(e.data.Status>0){T.A.success({title:"Th\xf4ng b\xe1o",content:"Checkout th\xe0nh c\xf4ng",okText:"\u0110\xf3ng",onOk:()=>{let{filterData:e}=this.state;e.PageNumber=1,this.setState({loading:!1,isCheckOut:!1,showCamera:!0,ListCheckinLoaded:[],filterData:e},()=>{this.props.getList(),this.GetListCheckin()})}})}else this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.data.Message)}).catch(e=>{this.setState({loading:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})}})},this.changeCanBo=e=>{const{dataCMT:t}=this.state;t.GapCanBo=e,this.setState({dataCMT:t})},this.scanFile=e=>{const{videoInput:t}=this.state;if(3===e){const e=!this.state.showCamera;t.length||this.getCamera(),this.setState({showCamera:e,imageChanDung:""})}else if(1===e){const t=this.webcamRefTruoc.current.getScreenshot({width:1200,height:1e3});this.setState({imageCMTTruoc:t,loadingTruoc:!1,recognitionTruoc:!0}),d.UploadImage({image:t}).then(t=>{200===t.data.result_code?(this.fillData(t.data,e),this.setState({recognitionTruoc:!1})):500===t.data.result_code?(this.setState({recognitionTruoc:!1}),x.Ay.destroy(),x.Ay.error("\u1ea2nh CMND m\u1eb7t tr\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7")):(this.setState({recognitionTruoc:!1}),x.Ay.destroy(),x.Ay.error(t.data.result_message))}).catch(e=>{this.setState({recognitionTruoc:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})}else if(2===e){const t=this.webcamRefSau.current.getScreenshot({width:1200,height:1e3});this.setState({imageCMTSau:t,loadingSau:!1,recognitionSau:!0}),d.UploadImage({image:t}).then(t=>{200===t.data.result_code?(this.fillData(t.data,e),this.setState({recognitionSau:!1})):500===t.data.result_code?(this.setState({recognitionSau:!1}),x.Ay.destroy(),x.Ay.error("\u1ea2nh CMND m\u1eb7t tr\u01b0\u1edbc kh\xf4ng h\u1ee3p l\u1ec7")):(this.setState({recognitionSau:!1}),x.Ay.destroy(),x.Ay.error(t.data.result_message))}).catch(e=>{this.setState({recognitionSau:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})}else this.Scan(e)},this.triggerUpload=()=>{clearInterval(this.videoCapture),this.setState({loadingChanDung:!0});let e=this.webcamRefChanDung.current.getScreenshot({width:600,height:500});this.setState({imageChanDung:e,showCamera:!1,loadingChanDung:!1});const{imageCMTTruoc:t,imageCMTSau:n}=this.state;if(""===t&&""===n);else{const a={image_cmt:t,image_cmt2:n,image_live:e};this.setState({recognitionChanDung:!0}),d.Verification(a).then(e=>{2===e.data.verify_result?this.setState({isCheckIn:!0,recognitionChanDung:!1}):(x.Ay.destroy(),x.Ay.warning("\u1ea2nh ch\xe2n dung kh\xf4ng kh\u1edbp v\u1edbi \u1ea3nh ch\u1ee9ng minh th\u01b0"),this.setState({isCheckIn:!1,recognitionChanDung:!1}),this.scanFile(3))}).catch(e=>{this.setState({imageChanDung:"",recognitionChanDung:!1}),x.Ay.destroy(),x.Ay.error("C\xf3 l\u1ed7i x\u1ea3y ra khi nh\u1eadn di\u1ec7n khu\xf4n m\u1eb7t. Vui l\xf2ng th\u1eed l\u1ea1i")})}},this.reload=()=>{T.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n h\u1ee7y t\xe1c v\u1ee5 hi\u1ec7n t\u1ea1i kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{let{keyCamera:e}=this.state;e++,this.setState({imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",loadingTruoc:!1,loadingSau:!1,loadingChanDung:!1,recognitionTruoc:!1,recognitionSau:!1,recognitionChanDung:!1,today:ye,dataCMT:{HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",GioVao:"",TenCoQuan:"",GioiTinh:void 0,ThanNhiet:"",LoaiGiayTo:"",LyDoGap:void 0,LyDoKhac:""},loading:!1,isCheckOut:!1,ThongTinVaoRaID:"",checkCheckOut:!1,isCheckIn:!1,showCamera:!0,visiblePopoverMaThe:!1,visiblePopoverHoTen:!1,visiblePopoverCMND:!1,dataPopover:null,loadingSearchMaThe:!1,loadingSearchHoTen:!1,loadingSearchCMND:!1,selectIndex:-1,videoInput:[],isScanFile:!1,keyCamera:e,loadingBaoCao:!1,listTemper:[],temperUsing:{},visibleBadge:!1,listCheckin:[],visibleModalHangDoi:!1,sessionCode:""},()=>{this.getCamera(),this.props.getList()})}})},this.changeValueCMT=(e,t)=>{const{dataCMT:n}=this.state;"HoVaTen"===e&&(t=t.toUpperCase()),n[e]=t,this.setState({dataCMT:n})},this.contentPopover=(e,t)=>{const{selectIndex:n}=this.state;let a="",i=400;if(1===t?a=document.getElementById("txtMaThe"):2===t?a=document.getElementById("txtCMND"):3===t&&(a=document.getElementById("txtHoTen")),i=a?a.clientWidth:i,e)return(0,H.jsx)("div",{children:e.map((e,t)=>{const a=t%2!==0?t===n?"even-row":"odd-row":t===n?"even-row":"";return(0,H.jsxs)("div",{className:"hover-content ".concat(a),style:{width:i,padding:0===t?"5px 12px":"10px 12px"},onClick:()=>this.loadDataCheckOut(e),children:[(0,H.jsx)("b",{children:e.HoVaTen}),(0,H.jsx)("br",{}),(0,H.jsx)("i",{style:{paddingLeft:15},children:e.SoCMND}),(0,H.jsx)("br",{}),""!==e.TenCoQuan?(0,H.jsx)("i",{style:{paddingLeft:15},children:e.TenCoQuan}):""]})})})},this.loadDataCheckOut=e=>{clearInterval(this.videoCapture);const t=se().cloneDeep(e);t.NgaySinh=t.NgaySinh?f()(t.NgaySinh):"",t.NgayCapCMND=t.NgayCapCMND?f()(t.NgayCapCMND):"",t.GapCanBo="".concat(e.GapCanBo,"_").concat(e.DonViCaNhan),this.setState({selectIndex:-1,visiblePopoverMaThe:!1,visiblePopoverCMND:!1,visiblePopoverHoTen:!1,isCheckOut:null===t.GioRa,dataCMT:t,checkCheckOut:null!==t.GioRa,imageCMTTruoc:t.AnhCMND_MTBase64?t.AnhCMND_MTBase64:"",imageCMTSau:t.AnhCMND_MSBase64?t.AnhCMND_MSBase64:"",imageChanDung:t.AnhChanDungBase64?t.AnhChanDungBase64:""})},this.getCamera=()=>{navigator.getUserMedia&&navigator.mediaDevices.enumerateDevices().then(e=>{const t=e.filter(e=>"videoinput"===e.kind);t.length&&this.setState({videoInput:t})}).catch(e=>{x.Ay.error(e.toString())})},this.blurMaThe=(e,t)=>{if(""===e)return;if(this.state.selectIndex>=0)return;const{isCheckOut:n,checkCheckOut:a}=this.state,i={MaThe:e,LoaiCheckOut:t};1===t?this.setState({loadingSearchMaThe:!0}):2===t?this.setState({loadingSearchCMND:!0}):3===t&&this.setState({loadingSearchHoTen:!0}),d.GetByMaThe(i).then(e=>{if(1===t?this.setState({loadingSearchMaThe:!1}):2===t?this.setState({loadingSearchCMND:!1}):3===t&&this.setState({loadingSearchHoTen:!1}),e.data.Status>0){const n=e.data.Data;n.length>0&&(this.setState({dataPopover:n}),1===t?this.setState({visiblePopoverMaThe:!0}):2===t?this.setState({visiblePopoverCMND:!0}):3===t&&this.setState({visiblePopoverHoTen:!0}))}}).catch(e=>{x.Ay.destroy(),x.Ay.error(e.toString())})},this.changeFilterBaoCao=(e,t)=>{const{filterBaoCao:n}=this.state;if("CanBoGapID"===t&&e){const t=e.split("_");n.CanBoGapID=t[0],n.DonViCaNhan=t[1]}else n[t]=e;this.setState({filterBaoCao:n})},this.TaoBaoCao=()=>{const e=Object.assign({},this.state.filterBaoCao);if(""===e.TuNgay||""===e.DenNgay||null===e.TuNgay||null===e.DenNgay)return x.Ay.destroy(),void x.Ay.warning("Ch\u01b0a nh\u1eadp k\u1ef3 b\xe1o c\xe1o");e.TuNgay=f()(e.TuNgay).format("YYYY-MM-DD"),e.DenNgay=f()(e.DenNgay).format("YYYY-MM-DD"),this.setState({loadingBaoCao:!0}),C.A.TaoBaoCao(e).then(e=>{if(this.setState({loadingBaoCao:!1}),e.data.Status>0){if(!e.data.Data)return x.Ay.destroy(),x.Ay.warning("K\u1ef3 b\xe1o c\xe1o hi\u1ec7n t\u1ea1i kh\xf4ng c\xf3 d\u1eef li\u1ec7u"),void this.setState({ListBaoCao:[],showBaoCao:!1});let{modalKey:t}=this.state;t++,this.setState({showBaoCao:!0,ListBaoCao:e.data.Data,modalKey:t})}else x.Ay.destroy(),x.Ay.error(e.data.Message)}).catch(e=>{this.setState({loadingBaoCao:!1}),x.Ay.destroy(),x.Ay.error(e.toString())})},this.closeBaoCao=()=>{this.setState({showBaoCao:!1})},this.clearImage=e=>{let{imageCMTTruoc:t,imageCMTSau:n,imageChanDung:a,isCheckOut:i}=this.state;1===e?t="":2===e?n="":3===e&&(a=""),this.setState({imageCMTTruoc:t,imageCMTSau:n,imageChanDung:a})},this.selectIndex=e=>{const{visiblePopoverMaThe:t,visiblePopoverCMND:n,visiblePopoverHoTen:a,dataPopover:i}=this.state;let{selectIndex:o}=this.state;const s=e.keyCode;(t||n||a)&&(40===s&&o<i.length-1?o++:38===s&&o>-1&&o--,27===s&&this.setState({visiblePopoverMaThe:!1,visiblePopoverCMND:!1,visiblePopoverHoTen:!1}),this.setState({selectIndex:o})),o>=0&&13===s&&this.loadDataCheckOut(i[o])},this.handleVisibleBadge=e=>{this.setState({visibleBadge:e})},this.getContentBadge=()=>{const{listTemper:e}=this.state,t=document.getElementById("txtTemper"),n=t?t.clientWidth+30:300;return(0,H.jsx)("div",{className:"badge-container",children:e.map(e=>(0,H.jsxs)("div",{className:"badge-item",style:{width:n},onClick:()=>this.selectTemper(e),children:["Th\u1eddi gian \u0111o:"," ",f()(e.time,"YYYYMMDDHHmmss").format("HH:mm:ss")," - K\u1ebft qu\u1ea3:"," ",e.temperature," \xb0C"]}))})},this.selectTemper=e=>{const{listTemper:t}=this.state,{thanNhiet:n}=this.props,a=t.findIndex(t=>t.time===e.time);a>=0&&(t.splice(a,1),this.setState({listTemper:t,visibleBadge:!1})),this.setState({temperUsing:e}),this.changeValueCMT("ThanNhiet",e.temperature),parseFloat(e.temperature)>parseFloat(n)&&T.A.warn({title:"C\u1ea3nh b\xe1o",content:"C\u1ea3nh b\xe1o th\xe2n nhi\u1ec7t cao !!!",okText:"\u0110\xf3ng"})},this.changeVisiblePopoverMaThe=e=>{e||this.setState({visiblePopoverMaThe:e,selectIndex:-1})},this.changeVisiblePopoverHoTen=e=>{e||this.setState({visiblePopoverHoTen:e,selectIndex:-1})},this.changeVisiblePopoverCMND=e=>{e||this.setState({visiblePopoverCMND:e,selectIndex:-1})},this.clearUsing=()=>{this.setState({temperUsing:{}}),this.changeValueCMT("ThanNhiet","")},this.openModalHangDoi=()=>{let{modalKey:e}=this.state;e++,this.setState({visibleModalHangDoi:!0,modalKey:e})},this.closeModalHangDoi=()=>{this.setState({visibleModalHangDoi:!1})},this.chonHangDoiCheckin=e=>{const{listCheckin:t,dataCMT:n}=this.state,i=t[e];t.splice(e,1),i.ThanNhiet=n.ThanNhiet?n.ThanNhiet:"",this.setState({dataCMT:(0,a.A)((0,a.A)({},n),i),imageCMTTruoc:i.imageCMTTruoc,listCheckin:t}),this.closeModalHangDoi()},this.xoaHangDoiCheckin=e=>{const{listCheckin:t}=this.state;t.splice(e,1),t.length||this.closeModalHangDoi(),this.setState({listCheckin:t})},this.handlePlayChanDung=()=>{clearInterval(this.videoCapture),this.videoCapture=setInterval(async()=>{const e=document.getElementById("camera-chan-dung");if(this.canvasRef.current&&e.readyState>=1){this.canvasRef.current.innerHTML=faceapi.createCanvasFromMedia(e);const t={width:e.offsetWidth,height:e.offsetHeight};faceapi.matchDimensions(this.canvasRef.current,t);const n=await faceapi.detectAllFaces(e,new faceapi.TinyFaceDetectorOptions),a=faceapi.resizeResults(n,t);if(this.canvasRef.current.getContext("2d").clearRect(0,0,e.width,e.height),faceapi.draw.drawDetections(this.canvasRef.current,a),n.length){const e=this.webcamRefChanDung.current.getScreenshot({width:600,height:500});d.NhanDien({AnhChanDungBase64:e}).then(e=>{const t=e&&e.data;if(t.Status>0){if(3==t.Status)return;if(t.Data&&t.Data.CanBoID){clearInterval(this.videoCapture);const{Data:e}=t;this.loadDataFromNhanDien(e)}}else x.Ay.destroy(),x.Ay.error(t.Message)})}}},3e3)},this.loadDataFromNhanDien=e=>{const{dataCMT:t}=this.state,{thanNhiet:n}=this.props,i=(0,a.A)({},e);let o=!1;t.NgaySinh=i.NgaySinh?f()(i.NgaySinh):t.NgaySinh,t.NgayCapCMND=i.NgayCapCMND?f()(i.NgayCapCMND):t.NgayCapCMND,t.HoVaTen=i.HoVaTen?i.HoVaTen:t.HoVaTen,t.GioiTinh=i.GioiTinh?i.GioiTinh:t.GioiTinh,t.HoKhau=i.HoKhau?i.HoKhau:t.HoKhau,t.DienThoai=i.DienThoai?i.DienThoai:t.DienThoai,t.LoaiGiayTo=i.LoaiGiayTo?i.LoaiGiayTo:t.LoaiGiayTo,t.TenCoQuan=i.TenCoQuan?i.TenCoQuan:t.TenCoQuan,t.SoCMND=i.SoCMND?i.SoCMND:t.SoCMND,t.LaCanBo=i.LaCanBo,t.CanBoID=i.CanBoID,i.LaCanBo&&(t.LyDoGap=1),o=!!i.ThongTinVaoRaID,this.setState({isCheckOut:o,dataCMT:t,imageCMTTruoc:i.AnhCMND_MTBase64?i.AnhCMND_MTBase64:"",imageCMTSau:i.AnhCMND_MSBase64?i.AnhCMND_MSBase64:"",imageChanDung:i.AnhChanDungBase64?i.AnhChanDungBase64:""},()=>{i.ThongTinVaoRaID?(t.GapCanBo="".concat(i.GapCanBo,"_").concat(i.DonViCaNhan),t.LyDoGap=i.LyDoGap,t.GioVao=i.GioVao,t.ThongTinVaoRaID=i.ThongTinVaoRaID,i.LaCanBo&&this.setState({dataCMT:t},()=>{this.CheckOutv4()})):i.LaCanBo&&(t.ThanNhiet&&(parseFloat(t.ThanNhiet),parseFloat(n)),this.CheckInv4())})},document.title="Checkin",this.interval=null,this.webcamRefChanDung=i.createRef(),this.webcamRefTruoc=i.createRef(),this.webcamRefSau=i.createRef(),this.socket=null,this.socketIO=null,this.canvasRef=i.createRef(),this.videoCapture=null;let t=Q.parse(this.props.location.search);t.PageNumber=t.PageNumber?t.PageNumber:1,t.PageSize=10,t.Keyword=t.Keyword?t.Keyword:"",t.Type=2,this.state={imageCMTTruoc:"",imageCMTSau:"",imageChanDung:"",loadingTruoc:!1,loadingSau:!1,loadingChanDung:!1,recognitionTruoc:!1,recognitionSau:!1,recognitionChanDung:!1,today:ye,dataCMT:{HoVaTen:"",NgaySinh:"",HoKhau:"",DienThoai:"",SoCMND:"",NoiCapCMND:"",NgayCapCMND:"",GapCanBo:void 0,MaThe:"",GioVao:"",TenCoQuan:"",GioiTinh:void 0,ThanNhiet:"",LoaiGiayTo:"",LyDoGap:void 0,LyDoKhac:""},loading:!1,isCheckOut:!1,ThongTinVaoRaID:0,checkCheckOut:!1,isCheckIn:!1,showCamera:!0,visiblePopoverMaThe:!1,visiblePopoverHoTen:!1,visiblePopoverCMND:!1,dataPopover:null,loadingSearchMaThe:!1,loadingSearchHoTen:!1,loadingSearchCMND:!1,selectIndex:-1,videoInput:[],isScanFile:!1,keyCamera:0,filterData:t,TotalRow:0,ListCheckinLoaded:[],filterBaoCao:{TuNgay:f()(),DenNgay:f()(),LeTanID:void 0,CanBoGapID:void 0},ListBaoCao:[],showBaoCao:!1,modalKey:0,loadingBaoCao:!1,listTemper:[],temperUsing:{},visibleBadge:!1,listCheckin:[],visibleModalHangDoi:!1,sessionCode:"",loadingDataScan:!1,dataScan:{}}}componentWillUnmount(){clearInterval(this.interval),clearInterval(this.videoCapture),this.socket&&this.socket.close(),this.socketIO&&this.socketIO.stop();const{listTemper:e}=this.state;e.length&&this.props.getListTemperFromSite(e)}render(){const e=parseInt(localStorage.getItem("user_id")),t=ae.M.getState().Auth.user;if(t&&1===t.NguoiDungID)return(0,H.jsx)(ie.A,{to:"co-quan-don-vi"});const{role:n,roleBaoCao:i,DanhSachLeTan:o,TongHopNgay:s,DoiTuongGap:h}=this.props,{ListCheckinLoaded:c,ListBaoCao:r,filterBaoCao:l,showBaoCao:d,loadingBaoCao:g}=this.state,C=JSON.parse(localStorage.getItem("role")),p=C?C["checkin-out"]:null;p&&0!==!p.view||this.props.history.push("/dashboard");const{imageCMTTruoc:u,imageCMTSau:x,imageChanDung:T,loadingTruoc:b,loadingSau:j,loadingChanDung:w,dataCMT:L,isCheckOut:B,loading:G,checkCheckOut:Y,isCheckIn:O,recognitionTruoc:K,recognitionSau:_,recognitionChanDung:U,visiblePopoverMaThe:E,dataPopover:Q,visiblePopoverHoTen:$,visiblePopoverCMND:J,loadingSearchMaThe:X,loadingSearchCMND:Z,loadingSearchHoTen:oe,loadingDataScan:se,videoInput:he,isScanFile:ge,keyCamera:Ce}=this.state,{listTemper:pe,temperUsing:De,visibleBadge:ve,listCheckin:Ne,visibleModalHangDoi:Me,modalKey:Se}=this.state,be=f()(B?L.GioVao:ye).format("HH:mm"),fe=f()(B?L.GioVao:ye).format("DD/MM/YYYY"),je=Y||B?f()(L.GioRa).format("HH:mm"):"",ke=Y||B?f()(L.GioRa).format("DD/MM/YYYY"):"",we={width:1200,height:1e3},Le=he.find(e=>e.label.includes("USB CAM2")),Ie=he.find(e=>e.label.includes("S520"));k(),this.webcamRefChanDung,(0,a.A)((0,a.A)({},we),{},{deviceId:Le&&Le.deviceId?Le.deviceId:""}),Le&&Le.deviceId&&Le.deviceId,k(),this.webcamRefTruoc,(0,a.A)((0,a.A)({},we),{},{deviceId:Ie&&Ie.deviceId?Ie.deviceId:""}),Ie&&Ie.deviceId&&Ie.deviceId,B&&R.A;return(0,H.jsxs)(I,{children:[(0,H.jsxs)(A.A,{className:"col-container",children:[(0,H.jsx)(y.A,{xl:14,lg:12,md:12,sm:24,xs:24,className:"col col-first",children:(0,H.jsxs)("div",{className:"box-container",children:[(0,H.jsx)("div",{className:"box box-camera",children:(0,H.jsxs)(A.A,{gutter:24,children:[(0,H.jsx)(y.A,{xl:4,lg:0}),(0,H.jsx)(y.A,{xl:8,lg:24,children:(0,H.jsxs)("div",{className:"camera-content",children:[(0,H.jsx)("div",{className:"content",children:b?(0,H.jsx)(ce.A,{}):""!==u?(0,H.jsxs)("div",{className:"box-image",children:[""===u||B?"":(0,H.jsx)(te.A,{className:"close-ico",type:"close",onClick:()=>this.clearImage(1)}),(0,H.jsx)("img",{src:u,alt:"avatar",style:{maxHeight:130},id:"imgTruoc"})]}):null}),(0,H.jsx)("div",{className:"action",children:(0,H.jsxs)(m.$n,{children:[(0,H.jsx)(re.A,{}),"\u1ea2nh gi\u1ea5y t\u1edd"]})})]})}),(0,H.jsx)(y.A,{xl:8,lg:24,children:(0,H.jsxs)("div",{className:"camera-content",children:[(0,H.jsx)("div",{className:"content",children:w?(0,H.jsx)(ce.A,{}):""!==T?(0,H.jsxs)("div",{className:"box-image",children:[(0,H.jsx)(te.A,{className:"close-ico",type:"close",onClick:()=>this.clearImage(3)}),(0,H.jsx)("img",{src:T,alt:"avatar",style:{maxHeight:130}})]}):null}),(0,H.jsx)("div",{className:"action",children:(0,H.jsxs)(m.$n,{children:[(0,H.jsx)(re.A,{}),"\u1ea2nh ch\xe2n dung"]})})]})}),(0,H.jsx)(y.A,{xl:4,lg:0})]})}),(0,H.jsxs)("div",{className:"box box-info",children:[(0,H.jsx)("div",{className:"title",children:"TH\xd4NG TIN V\xc0O - RA"}),(0,H.jsxs)(M.A,{children:[(0,H.jsxs)(A.A,{children:[(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsxs)(me,(0,a.A)((0,a.A)({label:"Gi\u1edd v\xe0o"},Te),{},{className:"datepicker",children:[(0,H.jsx)(D.A,{placeholder:"",style:{width:"30%",maxWidth:100},value:O||B||Y||""!==L.HoVaTen&&""!==L.SoCMND?be:"",disabled:!0}),(0,H.jsx)(D.A,{placeholder:"",style:{width:"calc(70% - 20px)",marginLeft:20,maxWidth:180},value:O||B||Y||""!==L.HoVaTen&&""!==L.SoCMND?fe:"",disabled:!0,suffix:(0,H.jsx)(le.A,{})})]}))})),(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(A.A,{children:(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},xe),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"L\xfd do g\u1eb7p"},Te),{},{children:(0,H.jsxs)(m.l6,{placeholder:"Ch\u1ecdn l\xfd do g\u1eb7p",noGetPopupContainer:!0,value:L.LyDoGap,onChange:e=>this.changeValueCMT("LyDoGap",e),children:[(0,H.jsx)(m.c$,{value:1,children:"H\u1ecdp"}),(0,H.jsx)(m.c$,{value:2,children:"G\u1eb7p c\xe1n b\u1ed9"}),(0,H.jsx)(m.c$,{value:3,children:"Kh\xe1c"})]})}))}))})}))]}),(0,H.jsxs)(A.A,{children:[(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsxs)(me,(0,a.A)((0,a.A)({label:"Gi\u1edd ra"},Te),{},{className:"datepicker",children:[(0,H.jsx)(D.A,{placeholder:"",style:{width:"30%",maxWidth:100},value:B?f()(ye).format("HH:mm"):je,disabled:!0}),(0,H.jsx)(D.A,{placeholder:"",style:{width:"calc(70% - 20px)",marginLeft:20,maxWidth:180},value:B?f()(ye).format("DD/MM/YYYY"):ke,disabled:!0,suffix:(0,H.jsx)(le.A,{})})]}))})),(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(A.A,{children:(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},xe),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"M\xe3 th\u1ebb"},Te),{},{children:(0,H.jsx)(V,{content:this.contentPopover(Q,1),visible:E,trigger:"click",onVisibleChange:this.changeVisiblePopoverMaThe,placement:"bottomLeft",children:(0,H.jsx)(D.A.Search,{style:{width:"100%"},onSearch:e=>this.blurMaThe(e,1),maxLength:20,value:L.MaThe,placeholder:"Nh\u1eadp m\xe3 th\u1ebb",onChange:e=>this.changeValueCMT("MaThe",e.target.value),id:"txtMaThe",loading:X,onKeyDown:this.selectIndex})})}))}))})}))]}),(0,H.jsxs)(A.A,{children:[(0,H.jsx)(y.A,(0,a.A)({},Ae)),(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(A.A,{children:(0,H.jsxs)(y.A,(0,a.A)((0,a.A)({},xe),{},{children:[2===L.LyDoGap?(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"\u0110\u1ed1i t\u01b0\u1ee3ng g\u1eb7p"},Te),{},{children:(0,H.jsx)(S.A,{noGetPopupContainer:!0,dropdownStyle:{maxHeight:300},value:L.GapCanBo,showSearch:!0,treeData:h,placeholder:"Ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea7n g\u1eb7p",allowClear:!0,treeDefaultExpandAll:!0,onChange:e=>this.changeCanBo(e)})})):"",3===L.LyDoGap?(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"N\u1ed9i dung"},Te),{},{children:(0,H.jsx)(D.A,{value:L.LyDoKhac,style:{width:"100%"},onChange:e=>this.changeValueCMT("LyDoKhac",e.target.value)})})):""]}))})}))]})]})]}),(0,H.jsxs)("div",{className:"box box-info box-relative",children:[(0,H.jsxs)("div",{className:"title flex",children:["TH\xd4NG TIN KH\xc1CH",Ne.length?(0,H.jsxs)("div",{style:{marginLeft:10},className:"sub-title queue-title",onClick:this.openModalHangDoi,children:["(C\xf3 ",Ne.length," kh\xe1ch trong h\xe0ng \u0111\u1ee3i)"]}):""]}),K||_||U||se?(0,H.jsx)("div",{className:"div-loading",children:(0,H.jsx)("div",{className:"spin",children:(0,H.jsx)(v.A,{})})}):"",(0,H.jsxs)(M.A,{children:[(0,H.jsxs)(A.A,{children:[(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:(0,H.jsxs)("span",{children:["H\u1ecd t\xean ",(0,H.jsx)("span",{style:{color:"red"},children:"*"})]})},Te),{},{children:(0,H.jsx)(V,{content:this.contentPopover(Q,3),visible:$,trigger:"click",onVisibleChange:this.changeVisiblePopoverHoTen,placement:"bottomLeft",children:(0,H.jsx)(D.A.Search,{style:{width:"100%"},value:L.HoVaTen,onChange:e=>this.changeValueCMT("HoVaTen",e.target.value),onSearch:e=>this.blurMaThe(e,3),id:"txtHoTen",loading:oe,onKeyDown:this.selectIndex})})}))})),(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(A.A,{children:(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},xe),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"Gi\u1edbi t\xednh"},Te),{},{children:(0,H.jsxs)(m.l6,{value:L.GioiTinh,onChange:e=>this.changeValueCMT("GioiTinh",e),children:[(0,H.jsx)(m.c$,{value:"Nam",children:"Nam"}),(0,H.jsx)(m.c$,{value:"N\u1eef",children:"N\u1eef"})]})}))}))})}))]}),(0,H.jsxs)(A.A,{children:[(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:(0,H.jsxs)("span",{children:["S\u1ed1 gi\u1ea5y t\u1edd ",(0,H.jsx)("span",{style:{color:"red"},children:"*"})]})},Te),{},{children:(0,H.jsx)(V,{content:this.contentPopover(Q,2),visible:J,trigger:"click",onVisibleChange:this.changeVisiblePopoverCMND,placement:"bottomLeft",children:(0,H.jsx)(D.A.Search,{style:{width:"100%"},value:L.SoCMND,onChange:e=>this.changeValueCMT("SoCMND",e.target.value),maxLength:12,onSearch:e=>this.blurMaThe(e,2),loading:Z,id:"txtCMND",onKeyDown:this.selectIndex})})}))})),(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(A.A,{children:(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},xe),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"},Te),{},{children:(0,H.jsx)(D.A,{style:{width:"100%"},value:L.DienThoai,onChange:e=>this.changeValueCMT("DienThoai",e.target.value),onKeyPress:this.inputNumber})}))}))})}))]}),(0,H.jsxs)(A.A,{children:[(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"Lo\u1ea1i gi\u1ea5y t\u1edd"},Te),{},{children:(0,H.jsx)(D.A,{style:{width:"100%"},value:L.LoaiGiayTo,onChange:e=>this.changeValueCMT("LoaiGiayTo",e.target.value)})}))})),(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(A.A,{children:(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},xe),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"N\u01a1i c\xf4ng t\xe1c"},Te),{},{children:(0,H.jsx)(D.A,{style:{width:"100%"},value:L.TenCoQuan,onChange:e=>this.changeValueCMT("TenCoQuan",e.target.value)})}))}))})}))]}),(0,H.jsx)(A.A,{children:(0,H.jsx)(y.A,(0,a.A)((0,a.A)({},Ae),{},{children:(0,H.jsx)(me,(0,a.A)((0,a.A)({label:"\u0110\u1ecba ch\u1ec9"},Te),{},{children:(0,H.jsx)(D.A,{style:{width:"100%"},value:L.HoKhau,onChange:e=>this.changeValueCMT("HoKhau",e.target.value)})}))}))})]}),Y?(0,H.jsx)("div",{className:"notice-checkout",children:"Kh\xe1ch \u0111\xe3 checkout"}):""]})]})}),(0,H.jsxs)(y.A,{xl:5,lg:6,md:6,sm:0,xs:0,className:"col-second",children:[(0,H.jsx)("div",{className:"title center",children:"KH\xc1CH \u0110ANG CHECKIN"}),(0,H.jsx)("div",{className:"boxSearch",children:(0,H.jsx)(D.A.Search,{allowClear:!0,onSearch:e=>this.onSearch(e,"Keyword"),placeholder:"T\xecm th\xf4ng tin kh\xe1ch"})}),(0,H.jsx)("div",{className:"card-container",children:c.map(e=>(0,H.jsx)(F,{AnhCMT:e.AnhCMND_MTBase64,AnhChanDung:e.AnhChanDungBase64,TenCanBo:e.HoVaTen,onCheckOut:t=>this.callCheckOut(t,e.ThongTinVaoRaID),SoCMT:e.SoCMND,MaThe:e.MaThe,GioVao:e.GioVao,isPicked:this.state.dataCMT.ThongTinVaoRaID===e.ThongTinVaoRaID,onClick:()=>this.loadDataCheckOut(e)}))})]}),(0,H.jsxs)(y.A,{xl:5,lg:6,md:6,sm:0,xs:0,className:"col-third",children:[(0,H.jsx)("div",{className:"title center",children:"L\u01af\u1ee2T KH\xc1CH TRONG NG\xc0Y"}),(0,H.jsxs)("div",{className:"box-container",children:[(0,H.jsx)("div",{className:"box-info",style:{backgroundImage:"url(".concat(W,")")},children:(0,H.jsxs)("div",{className:"text-number",children:["T\u1ed5ng s\u1ed1 kh\xe1ch t\u1edbi: ",s.Tong]})}),(0,H.jsx)("div",{className:"box-info",style:{backgroundImage:"url(".concat(q,")")},children:(0,H.jsxs)("div",{className:"text-number",children:["Kh\xe1ch \u0111ang checkin: ",s.DangGap]})}),(0,H.jsx)("div",{className:"box-info",style:{backgroundImage:"url(".concat(z,")")},children:(0,H.jsxs)("div",{className:"text-number",children:["Kh\xe1ch \u0111\xe3 checkout: ",s.DaVe]})}),(0,H.jsxs)("div",{className:"div-report",children:[(0,H.jsx)("div",{className:"title center",children:"L\u1eccC B\xc1O C\xc1O"}),(0,H.jsx)("div",{className:"main-report flex",children:(0,H.jsx)("div",{className:"report-label",style:{width:"100%"},children:"Th\u1eddi gian"})}),(0,H.jsxs)("div",{className:"main-report flex",children:[(0,H.jsxs)("div",{className:"report-wrapper",style:{width:"70%"},children:["T\u1eeb"," ",(0,H.jsx)(m.lr,{style:{width:120},value:l.TuNgay,onChange:e=>this.changeFilterBaoCao(e,"TuNgay")})]}),(0,H.jsxs)("div",{className:"report-wrapper",style:{width:"70%"},children:["\u0110\u1ebfn"," ",(0,H.jsx)(m.lr,{style:{width:120},value:l.DenNgay,onChange:e=>this.changeFilterBaoCao(e,"DenNgay")})]})]}),(0,H.jsxs)("div",{className:"main-report",children:[(0,H.jsx)("div",{className:"report-label",children:"\u0110\u01a1n v\u1ecb / C\xe1 nh\xe2n"}),(0,H.jsx)("div",{className:"report-wrapper",children:(0,H.jsx)(S.A,{style:{width:"100%"},dropdownStyle:{maxHeight:300},showSearch:!0,treeData:h,placeholder:"Ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea7n g\u1eb7p",allowClear:!0,treeDefaultExpandAll:!0,onChange:e=>this.changeFilterBaoCao(e,"CanBoGapID")})})]}),(0,H.jsxs)("div",{className:"main-report",children:[(0,H.jsx)("div",{className:"report-label",children:"L\u1ec5 t\xe2n"}),(0,H.jsx)("div",{className:"report-wrapper",children:(0,H.jsx)(m.l6,{style:{width:"100%"},showSearch:!0,allowClear:!0,placeholder:"Ch\u1ecdn l\u1ec5 t\xe2n ti\u1ebfp \u0111\xf3n",onChange:e=>this.changeFilterBaoCao(e,"LeTanID"),children:o.map(e=>(0,H.jsx)(m.c$,{value:e.CanBoID,label:"".concat(e.TenCanBo," ").concat(e.TenCoQuan),children:(0,H.jsxs)(N.A,{title:"".concat(e.TenCanBo," - ").concat(e.TenCoQuan),children:[e.TenCanBo," - ",(0,H.jsx)("i",{children:e.TenCoQuan})]})}))})})]}),(0,H.jsx)("div",{className:"action-report",children:(0,H.jsx)(m.$n,{type:"primary",onClick:this.TaoBaoCao,loading:g,children:"Th\u1ed1ng k\xea"})}),(0,H.jsx)(ee,{dataBaoCao:r,onCancel:this.closeBaoCao,visible:d,filterData:l},Se),(0,H.jsx)(ne,{listCheckin:Ne,visible:Me,onCancel:this.closeModalHangDoi,chooseLine:this.chonHangDoiCheckin,deleteLine:this.xoaHangDoiCheckin},Se)]})]})]})]}),(0,H.jsxs)("div",{className:"div-footer",children:[(0,H.jsxs)("div",{className:"div-action",children:[(0,H.jsx)(m.$n,{type:"primary",onClick:this.CheckIn,disabled:B||G||""===L.HoVaTen||""===L.SoCMND||0===n.add||1===e,children:"Checkin"}),(0,H.jsx)(m.$n,{type:"primary",onClick:this.CheckOut,disabled:!B||G||0===n.add||1===e,children:"Checkout"}),(0,H.jsxs)(m.$n,{onClick:this.reload,children:[(0,H.jsx)(de.A,{}),"T\u1ea3i l\u1ea1i"]})]}),(0,H.jsxs)("div",{className:"div-action",style:{color:"#096DD9",marginTop:10,fontWeight:"bold"},children:[(0,H.jsx)("ins",{children:"L\u01b0u \xfd"}),": C\xf3 th\u1ec3 nh\u1eadp t\xean, s\u1ed1 CMND ho\u1eb7c M\xe3 th\u1ebb \u0111\u1ec3 th\u1ef1c hi\u1ec7n checkout"]})]}),(0,H.jsxs)("div",{className:"footer-main",children:[(0,H.jsx)("img",{src:P,alt:"",width:30,style:{marginRight:10}}),(0,H.jsxs)("i",{children:["Copyright \xa9 2010-",ue," ",(0,H.jsx)("b",{children:"GO SOLUTIONS"}),". All rights"]})]})]})}}const ve=(0,o.Ng)(function(e){return(0,a.A)((0,a.A)({},e.CheckinOut),{},{app:e.App,thanNhiet:(0,he.op)("thanNhiet",37.5)})},(0,a.A)((0,a.A)({},s.A),{},{changeCurrent:ge,setListTemperWait:Ce,getListTemperFromSite:pe}))(De)},85341:e=>{e.exports=Object.freeze({COL_ITEM_LAYOUT_HALF:{md:{span:24},lg:{span:12}},ITEM_LAYOUT_HALF:{labelAlign:"left",labelCol:{lg:7,md:8,xs:6},wrapperCol:{lg:15,md:14,xs:16}}})}}]);